var yn=Object.defineProperty;var Sn=(t,e,s)=>e in t?yn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Qt=(t,e,s)=>(Sn(t,typeof e!="symbol"?e+"":e,s),s);import{b as wn,r as S,j as o,L as Zt,C as He,T as Ms,d as v,e as Et,I as vn,G as fe,B as ne,f as Bs,h as ee,i as ut,A as ze,S as $e,P as zs,k as $,l as jn,m as Ct,n as Ze,o as Cn,N as se,u as Tn,q as Pe,s as An,D as pt,t as On,v as Nn,w as Rt,x as st,y as Pn,z,E as ie,F as Be,H as En,J as rt,K as es,M as ft,O as Rn,Q as Ln,U as Un,V as In,W as Dn,X as kn,Y as We,Z as ts,_ as _n,$ as ss,a0 as Mn,a1 as de,a2 as Bn,a3 as zn,a4 as $n,a5 as Fn,a6 as Vn,a7 as Hn,a8 as Kn,a9 as Wn,aa as qn,ab as Jn,ac as Gn,ad as Xn,ae as Yn,c as Ye,a as Qn,af as Zn,ag as er,R as tr,ah as sr}from"./ui-f010e983.js";import{_ as le,u as Jt,a as Gt,T as Lt,i as nr,b as rr}from"./ton_tg-888ad219.js";import{r as ir,d as T,c as or}from"./ton_core-5c71ad4f.js";function ar(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Ut={},ns=wn;Ut.createRoot=ns.createRoot,Ut.hydrateRoot=ns.hydrateRoot;const lr="_inner_hgqr3_1",cr="_content_hgqr3_12",dr="_title_hgqr3_22",ur="_control_hgqr3_36",fr="_image_hgqr3_42",hr="_highlight_hgqr3_51",Ee={inner:lr,content:cr,title:dr,control:ur,image:fr,highlight:hr};function pr(){const[t,e]=S.useState(!1);return S.useEffect(()=>{le.initDataUnsafe.user!==void 0&&e(!0)},[]),{webApp:le,isWebApp:t}}function gr(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Le(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const rs={};function It(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];Le(e[0])&&rs[e[0]]||(Le(e[0])&&(rs[e[0]]=new Date),gr(...e))}const $s=(t,e)=>()=>{if(t.isInitialized)e();else{const s=()=>{setTimeout(()=>{t.off("initialized",s)},0),e()};t.on("initialized",s)}},is=(t,e,s)=>{t.loadNamespaces(e,$s(t,s))},os=(t,e,s,n)=>{Le(s)&&(s=[s]),s.forEach(r=>{t.options.ns.indexOf(r)<0&&t.options.ns.push(r)}),t.loadLanguages(e,$s(t,n))},mr=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=e.languages[0],r=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(l,c)=>{const d=e.services.backendConnector.state[`${l}|${c}`];return d===-1||d===2};return s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(n,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(n,t)&&(!r||a(i,t)))},xr=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(It("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:s.lng,precheck:(r,i)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}):mr(t,e,s)},Le=t=>typeof t=="string",br=t=>typeof t=="object"&&t!==null,yr=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Sr={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},wr=t=>Sr[t],vr=t=>t.replace(yr,wr);let Dt={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:vr};const jr=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Dt={...Dt,...t}},Cr=()=>Dt;let Fs;const Tr=t=>{Fs=t},Ar=()=>Fs,Or={type:"3rdParty",init(t){jr(t.options.react),Tr(t)}},Nr=S.createContext();class Pr{constructor(){Qt(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}}const Er=(t,e)=>{const s=S.useRef();return S.useEffect(()=>{s.current=e?s.current:t},[t,e]),s.current},Vs=(t,e,s,n)=>t.getFixedT(e,s,n),Rr=(t,e,s,n)=>S.useCallback(Vs(t,e,s,n),[t,e,s,n]),ye=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:s}=e,{i18n:n,defaultNS:r}=S.useContext(Nr)||{},i=s||n||Ar();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Pr),!i){It("You will need to pass in an i18next instance by using initReactI18next");const j=(O,k)=>Le(k)?k:br(k)&&Le(k.defaultValue)?k.defaultValue:Array.isArray(O)?O[O.length-1]:O,U=[j,{},!1];return U.t=j,U.i18n={},U.ready=!1,U}i.options.react&&i.options.react.wait!==void 0&&It("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const a={...Cr(),...i.options.react,...e},{useSuspense:l,keyPrefix:c}=a;let d=t||r||i.options&&i.options.defaultNS;d=Le(d)?[d]:d||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(d);const f=(i.isInitialized||i.initializedStoreOnce)&&d.every(j=>xr(j,i,a)),p=Rr(i,e.lng||null,a.nsMode==="fallback"?d:d[0],c),u=()=>p,g=()=>Vs(i,e.lng||null,a.nsMode==="fallback"?d:d[0],c),[b,m]=S.useState(u);let y=d.join();e.lng&&(y=`${e.lng}${y}`);const L=Er(y),E=S.useRef(!0);S.useEffect(()=>{const{bindI18n:j,bindI18nStore:U}=a;E.current=!0,!f&&!l&&(e.lng?os(i,e.lng,d,()=>{E.current&&m(g)}):is(i,d,()=>{E.current&&m(g)})),f&&L&&L!==y&&E.current&&m(g);const O=()=>{E.current&&m(g)};return j&&i&&i.on(j,O),U&&i&&i.store.on(U,O),()=>{E.current=!1,j&&i&&j.split(" ").forEach(k=>i.off(k,O)),U&&i&&U.split(" ").forEach(k=>i.store.off(k,O))}},[i,y]),S.useEffect(()=>{E.current&&f&&m(u)},[i,c,f]);const F=[b,i,f];if(F.t=b,F.i18n=i,F.ready=f,f||!f&&!l)return F;throw new Promise(j=>{e.lng?os(i,e.lng,d,()=>j()):is(i,d,()=>j())})};function it({data:t}){const[e]=Jt(),{isWebApp:s}=pr(),{t:n}=ye(),r=[];for(let i=0;i<t.itemsCount;i++)r.push(o.jsxs(Zt.Item,{children:[o.jsx("b",{children:n(`custom:heroPage.items.${i}.main`)})," – ",n(`custom:heroPage.items.${i}.desc`)]},i));return o.jsx(He,{size:"xl",children:o.jsxs("div",{className:Ee.inner,children:[o.jsxs("div",{className:Ee.content,children:[o.jsxs(Ms,{className:Ee.title,children:[n("custom:heroPage.title.first")," ",o.jsx("span",{className:Ee.highlight,children:n("custom:heroPage.title.second")})," ",n("custom:heroPage.title.third")]}),o.jsx(v,{c:"dimmed",mt:"md",children:n("heroPage.description",{ns:"custom"})}),o.jsx(Zt,{mt:30,spacing:"sm",size:"sm",icon:o.jsx(Et,{size:20,radius:"xl",children:o.jsx(vn,{size:12,stroke:1.5})}),children:r}),!s&&o.jsx(fe,{className:Ee.controls,children:o.jsx(ne,{mt:30,radius:"xl",size:"md",className:Ee.control,onClick:()=>e.openModal(),children:n("Connect Wallet")})})]}),o.jsx(Bs,{src:t.image,className:Ee.image})]})})}const Lr="_card_1ag5c_1",Ur="_imageSection_1ag5c_6",Ir="_label_1ag5c_14",Dr="_section_1ag5c_23",kr="_buttonSection_1ag5c_28",_r="_inputWrapper_1ag5c_34",Mr="_loader_1ag5c_39",St={card:Lr,imageSection:Ur,label:Ir,section:Dr,buttonSection:kr,inputWrapper:_r,loader:Mr};function Hs({data:t}){const{t:e}=ye(),s=[];for(let n=0;n<t.length;n++){const r=t[n];s.push(o.jsxs(ee,{withBorder:!0,children:[o.jsxs(ee.Section,{p:"xs",children:[o.jsx(ut,{children:o.jsx(ze,{variant:"filled",radius:"xl",src:r.logo,size:"xl"})}),o.jsx(ut,{children:o.jsx(v,{fw:500,ml:"2px",truncate:"end",children:r.name})})]}),o.jsxs(v,{size:"xs",children:[" ",e("Loan"),": ",r.size," ",r.usdt?"USDT":"TON"]}),o.jsxs(v,{size:"xs",children:[" ",e("Per day"),": ",r.interest," %"]}),o.jsxs(v,{size:"xs",children:[" ",e("Term"),": ",r.duration," ",e("days")]})]},n))}return o.jsxs(He,{size:"xl",p:"xs",m:"xs",children:[o.jsx(ut,{children:o.jsx(Ms,{order:3,children:e("Available collections")})}),o.jsx($e,{cols:{base:2,md:3,lg:4},spacing:"xs",mt:"md",children:s})]})}var Br=ir();const qe=86400,zr=1e4,Ae=1e9,ue=1e6,je=.1,Ce=.4,kt=.05,$r=["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2","0:46fa0e9a864014196a5e7d66f1f83ffdb10f2859bbf2ea9baeabbf14d9ce0d50","0:fd8a466aeb13e02a3ce67411b41b44bcd11bd42636f0807acf6570ca73fc2c13","0:ab180f6c942a24b200fe3724438ed1f248a3744ecf24ea176e78991491965d0f","0:13b9419dbeb8cbbd3584e69a5514e542a94d9d9422d49ca4ecbb49f52589bd95","0:388b9f22b92f4351846d519f7bb19a399a791b898501a565d039eddd11409c3f","0:fa987f5bc1b9fa4b733fb424563afa80216f0cdf8911c1b234d678862d13de0c","0:02710a51d9f99d784356744d98190587571493c80f19ab8fe4eeb93f21ac4245","0:c9b0df4e24184a199a16656b64129ce409f22ed7a67d5334d66d88de2e9b8775","0:30cee6dea09c27aa6981b933e99d44aead1cd63c1f0447371fcf1e7967662313","0:70dad3b951a27873f617b7723ccb9283d24dfbb2d699c5e755d8ee479abca22b","0:d3ae8fa88096d2ee8f8e043e9bb76372b0fb7b4a71a6e737ee457181d6713fad","0:9e7eb8e1083dbfec7448af6966c2df596aa786fed76c781bc00c2ebaf37de405","0:ee9b2ddb9d96335786d258c492664997ab1e745ee1f977d4655ffc848b614d96","0:d0e838d169b4d8480c5fdb1ad9b27b17b6a7089b56e3f5d179c7f87c94d8d63e","0:7a02d04f3ae4ed42697ca1203b5fc66a27942670e618aa8cfddac4185c6510af","0:b200c91be9b37236528f1f4b496ee6e4d55563012ab2abdb19c2427c01bc4c93","0:5a38bf261f9632c245e3929b3ae57d4e2cf347ee99ece1871f2e6695a456a834","0:2d154f46ac67e2c78506f433a2bcde7c431be004951a019fe97590590a66e12a","0:1a4c847ba09ca8c038ae9982d5374a1eeb590613723a10f127ed68073c6b9601","0:3c0c25b2096cb2c2038a60e45ead1a1255ebd6ad443f16329080d8a1c58d76db","0:78c77b13d4355d383cdacb71fee1524874ea284b9fa44e0c8a7183195a880f3a","0:03bc9c4cc421c0edf465623a1c7813917fb4702acd2bce355a29ea5000232767"],Fr=function(t,e,s){if(t.length<=e)return t;s=s||"...";var n=s.length,r=e-n,i=Math.ceil(r/2),a=Math.floor(r/2);return t.substring(0,i)+s+t.substring(t.length-a)},Ks=function(t){return t?Fr(t,18,"..."):""},Vr=function(t){return Ks(t.toString())},Ws=async function(t,e){const s=t.nft,n=t.props.usdt===!0?e*ue:T.toNano(e);if(t.props.custom===!0)return T.beginCell().storeCoins(n).endCell();const r=$r.indexOf(s.collectionAddress);if(r>-1){let i;r<2?i=s.name.slice(1).replace(/ /g,""):i=s.name.replace(/#/g,"-").replace(/[ ’]/g,"").toLowerCase(),console.log("[getForwardPayload] teleitem name: ",i);const l=(await Br.sha256(i)).toString("hex"),c=BigInt(`0x${l}`),d=T.beginCell().storeUint(c,256).endCell();return T.beginCell().storeCoins(n).storeRef(d).endCell()}else return T.beginCell().storeUint(BigInt(s.tokenId),64).storeCoins(n).endCell()},Hr=async function(t){const e=[],s=[],n=[];for(let r=0;r<t.length;r++){const i=t[r];e.push(i.nft.address),s.push(i.props.verifier),n.push(await Ws(i,i.props.size))}return{nftAddresses:e,vItemAddresses:s,forwardPayloads:n}},W={ERROR:0,ACTIVE:1,CREDIT_CLOSED:2,WAIT_START_BID:3,AUCTION_STARTED:4,AUCTION_FINISHED:5},ve={GET_CREDIT:0,MAKE_BET:1},R=t=>typeof t=="string",Je=()=>{let t,e;const s=new Promise((n,r)=>{t=n,e=r});return s.resolve=t,s.reject=e,s},as=t=>t==null?"":""+t,Kr=(t,e,s)=>{t.forEach(n=>{e[n]&&(s[n]=e[n])})},Wr=/###/g,ls=t=>t&&t.indexOf("###")>-1?t.replace(Wr,"."):t,cs=t=>!t||R(t),Qe=(t,e,s)=>{const n=R(e)?e.split("."):e;let r=0;for(;r<n.length-1;){if(cs(t))return{};const i=ls(n[r]);!t[i]&&s&&(t[i]=new s),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++r}return cs(t)?{}:{obj:t,k:ls(n[r])}},ds=(t,e,s)=>{const{obj:n,k:r}=Qe(t,e,Object);if(n!==void 0||e.length===1){n[r]=s;return}let i=e[e.length-1],a=e.slice(0,e.length-1),l=Qe(t,a,Object);for(;l.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),l=Qe(t,a,Object),l&&l.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=s},qr=(t,e,s,n)=>{const{obj:r,k:i}=Qe(t,e,Object);r[i]=r[i]||[],r[i].push(s)},gt=(t,e)=>{const{obj:s,k:n}=Qe(t,e);if(s)return s[n]},Jr=(t,e,s)=>{const n=gt(t,s);return n!==void 0?n:gt(e,s)},qs=(t,e,s)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?R(t[n])||t[n]instanceof String||R(e[n])||e[n]instanceof String?s&&(t[n]=e[n]):qs(t[n],e[n],s):t[n]=e[n]);return t},De=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Gr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Xr=t=>R(t)?t.replace(/[&<>"'\/]/g,e=>Gr[e]):t;class Yr{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const s=this.regExpMap.get(e);if(s!==void 0)return s;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Qr=[" ",",","?","!",";"],Zr=new Yr(20),ei=(t,e,s)=>{e=e||"",s=s||"";const n=Qr.filter(a=>e.indexOf(a)<0&&s.indexOf(a)<0);if(n.length===0)return!0;const r=Zr.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!r.test(t);if(!i){const a=t.indexOf(s);a>0&&!r.test(t.substring(0,a))&&(i=!0)}return i},_t=function(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const n=e.split(s);let r=t;for(let i=0;i<n.length;){if(!r||typeof r!="object")return;let a,l="";for(let c=i;c<n.length;++c)if(c!==i&&(l+=s),l+=n[c],a=r[l],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<n.length-1)continue;i+=c-i+1;break}r=a}return r},mt=t=>t&&t.replace("_","-"),ti={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class xt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,s)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=s.prefix||"i18next:",this.logger=e||ti,this.options=s,this.debug=s.debug}log(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"log","",!0)}warn(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"warn","",!0)}error(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"error","")}deprecate(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(e,s,n,r){return r&&!this.debug?null:(R(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[s](e))}create(e){return new xt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new xt(this.logger,e)}}var be=new xt;class wt{constructor(){this.observers={}}on(e,s){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const r=this.observers[n].get(s)||0;this.observers[n].set(s,r+1)}),this}off(e,s){if(this.observers[e]){if(!s){delete this.observers[e];return}this.observers[e].delete(s)}}emit(e){for(var s=arguments.length,n=new Array(s>1?s-1:0),r=1;r<s;r++)n[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[l,c]=a;for(let d=0;d<c;d++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[l,c]=a;for(let d=0;d<c;d++)l.apply(l,[e,...n])})}}class us extends wt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const s=this.options.ns.indexOf(e);s>-1&&this.options.ns.splice(s,1)}getResource(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,s],n&&(Array.isArray(n)?l.push(...n):R(n)&&i?l.push(...n.split(i)):l.push(n)));const c=gt(this.data,l);return!c&&!s&&!n&&e.indexOf(".")>-1&&(e=l[0],s=l[1],n=l.slice(2).join(".")),c||!a||!R(n)?c:_t(this.data&&this.data[e]&&this.data[e][s],n,i)}addResource(e,s,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,s];n&&(l=l.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(l=e.split("."),r=s,s=l[1]),this.addNamespaces(s),ds(this.data,l,r),i.silent||this.emit("added",e,s,n,r)}addResources(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(R(n[i])||Array.isArray(n[i]))&&this.addResource(e,s,i,n[i],{silent:!0});r.silent||this.emit("added",e,s,n)}addResourceBundle(e,s,n,r,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,s];e.indexOf(".")>-1&&(l=e.split("."),r=n,n=s,s=l[1]),this.addNamespaces(s);let c=gt(this.data,l)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?qs(c,n,i):c={...c,...n},ds(this.data,l,c),a.silent||this.emit("added",e,s,n)}removeResourceBundle(e,s){this.hasResourceBundle(e,s)&&delete this.data[e][s],this.removeNamespaces(s),this.emit("removed",e,s)}hasResourceBundle(e,s){return this.getResource(e,s)!==void 0}getResourceBundle(e,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,s)}:this.getResource(e,s)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const s=this.getDataByLanguage(e);return!!(s&&Object.keys(s)||[]).find(r=>s[r]&&Object.keys(s[r]).length>0)}toJSON(){return this.data}}var Js={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,s,n,r){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,s,n,r))}),e}};const fs={};class bt extends wt{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Kr(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=s,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=be.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,s);return n&&n.res!==void 0}extractFromKey(e,s){let n=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let i=s.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!ei(e,n,r);if(a&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:R(i)?[i]:i};const d=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),e=d.join(r)}return{key:e,namespaces:R(i)?[i]:i}}translate(e,s,n){if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const r=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],s),c=l[l.length-1],d=s.lng||this.language,f=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(f){const j=s.nsSeparator||this.options.nsSeparator;return r?{res:`${c}${j}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:`${c}${j}${a}`}return r?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(s)}:a}const p=this.resolve(e,s);let u=p&&p.res;const g=p&&p.usedKey||a,b=p&&p.exactUsedKey||a,m=Object.prototype.toString.apply(u),y=["[object Number]","[object Function]","[object RegExp]"],L=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,F=!R(u)&&typeof u!="boolean"&&typeof u!="number";if(E&&u&&F&&y.indexOf(m)<0&&!(R(L)&&Array.isArray(u))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const j=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,u,{...s,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return r?(p.res=j,p.usedParams=this.getUsedParamsDetails(s),p):j}if(i){const j=Array.isArray(u),U=j?[]:{},O=j?b:g;for(const k in u)if(Object.prototype.hasOwnProperty.call(u,k)){const q=`${O}${i}${k}`;U[k]=this.translate(q,{...s,joinArrays:!1,ns:l}),U[k]===q&&(U[k]=u[k])}u=U}}else if(E&&R(L)&&Array.isArray(u))u=u.join(L),u&&(u=this.extendTranslation(u,e,s,n));else{let j=!1,U=!1;const O=s.count!==void 0&&!R(s.count),k=bt.hasDefaultValue(s),q=O?this.pluralResolver.getSuffix(d,s.count,s):"",K=s.ordinal&&O?this.pluralResolver.getSuffix(d,s.count,{ordinal:!1}):"",I=O&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),J=I&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${q}`]||s[`defaultValue${K}`]||s.defaultValue;!this.isValidLookup(u)&&k&&(j=!0,u=J),this.isValidLookup(u)||(U=!0,u=a);const V=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:u,D=k&&J!==u&&this.options.updateMissing;if(U||j||D){if(this.logger.log(D?"updateKey":"missingKey",d,c,a,D?J:u),i){const A=this.resolve(a,{...s,keySeparator:!1});A&&A.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let h=[];const x=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&x&&x[0])for(let A=0;A<x.length;A++)h.push(x[A]);else this.options.saveMissingTo==="all"?h=this.languageUtils.toResolveHierarchy(s.lng||this.language):h.push(s.lng||this.language);const C=(A,P,w)=>{const _=k&&w!==u?w:V;this.options.missingKeyHandler?this.options.missingKeyHandler(A,c,P,_,D,s):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(A,c,P,_,D,s),this.emit("missingKey",A,c,P,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?h.forEach(A=>{const P=this.pluralResolver.getSuffixes(A,s);I&&s[`defaultValue${this.options.pluralSeparator}zero`]&&P.indexOf(`${this.options.pluralSeparator}zero`)<0&&P.push(`${this.options.pluralSeparator}zero`),P.forEach(w=>{C([A],a+w,s[`defaultValue${w}`]||J)})}):C(h,a,J))}u=this.extendTranslation(u,e,s,p,n),U&&u===a&&this.options.appendNamespaceToMissingKey&&(u=`${c}:${a}`),(U||j)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?u=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,j?u:void 0):u=this.options.parseMissingKeyHandler(u))}return r?(p.res=u,p.usedParams=this.getUsedParamsDetails(s),p):u}extendTranslation(e,s,n,r,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=R(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(d){const u=e.match(this.interpolator.nestingRegexp);f=u&&u.length}let p=n.replace&&!R(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,n.lng||this.language||r.usedLng,n),d){const u=e.match(this.interpolator.nestingRegexp),g=u&&u.length;f<g&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var u=arguments.length,g=new Array(u),b=0;b<u;b++)g[b]=arguments[b];return i&&i[0]===g[0]&&!n.context?(a.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${s[0]}`),null):a.translate(...g,s)},n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=R(l)?[l]:l;return e!=null&&c&&c.length&&n.applyPostProcessor!==!1&&(e=Js.handle(c,e,s,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,r,i,a,l;return R(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(c,s),f=d.key;r=f;let p=d.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const u=s.count!==void 0&&!R(s.count),g=u&&!s.ordinal&&s.count===0&&this.pluralResolver.shouldUseIntlApi(),b=s.context!==void 0&&(R(s.context)||typeof s.context=="number")&&s.context!=="",m=s.lngs?s.lngs:this.languageUtils.toResolveHierarchy(s.lng||this.language,s.fallbackLng);p.forEach(y=>{this.isValidLookup(n)||(l=y,!fs[`${m[0]}-${y}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(fs[`${m[0]}-${y}`]=!0,this.logger.warn(`key "${r}" for languages "${m.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(L=>{if(this.isValidLookup(n))return;a=L;const E=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(E,f,L,y,s);else{let j;u&&(j=this.pluralResolver.getSuffix(L,s.count,s));const U=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(E.push(f+j),s.ordinal&&j.indexOf(O)===0&&E.push(f+j.replace(O,this.options.pluralSeparator)),g&&E.push(f+U)),b){const k=`${f}${this.options.contextSeparator}${s.context}`;E.push(k),u&&(E.push(k+j),s.ordinal&&j.indexOf(O)===0&&E.push(k+j.replace(O,this.options.pluralSeparator)),g&&E.push(k+U))}}let F;for(;F=E.pop();)this.isValidLookup(n)||(i=F,n=this.getResource(L,y,F,s))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:a,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,s,n,r):this.resourceStore.getResource(e,s,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!R(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const i of s)delete r[i]}return r}static hasDefaultValue(e){const s="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&s===n.substring(0,s.length)&&e[n]!==void 0)return!0;return!1}}const Tt=t=>t.charAt(0).toUpperCase()+t.slice(1);class hs{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=be.create("languageUtils")}getScriptPartFromCode(e){if(e=mt(e),!e||e.indexOf("-")<0)return null;const s=e.split("-");return s.length===2||(s.pop(),s[s.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(s.join("-"))}getLanguagePartFromCode(e){if(e=mt(e),!e||e.indexOf("-")<0)return e;const s=e.split("-");return this.formatLanguageCode(s[0])}formatLanguageCode(e){if(R(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(e)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const s=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(r=>r.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),s.indexOf(n[1].toLowerCase())>-1&&(n[1]=Tt(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),s.indexOf(n[1].toLowerCase())>-1&&(n[1]=Tt(n[1].toLowerCase())),s.indexOf(n[2].toLowerCase())>-1&&(n[2]=Tt(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let s;return e.forEach(n=>{if(s)return;const r=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(r))&&(s=r)}),!s&&this.options.supportedLngs&&e.forEach(n=>{if(s)return;const r=this.getLanguagePartFromCode(n);if(this.isSupportedCode(r))return s=r;s=this.options.supportedLngs.find(i=>{if(i===r)return i;if(!(i.indexOf("-")<0&&r.indexOf("-")<0)&&(i.indexOf("-")>0&&r.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===r||i.indexOf(r)===0&&r.length>1))return i})}),s||(s=this.getFallbackCodes(this.options.fallbackLng)[0]),s}getFallbackCodes(e,s){if(!e)return[];if(typeof e=="function"&&(e=e(s)),R(e)&&(e=[e]),Array.isArray(e))return e;if(!s)return e.default||[];let n=e[s];return n||(n=e[this.getScriptPartFromCode(s)]),n||(n=e[this.formatLanguageCode(s)]),n||(n=e[this.getLanguagePartFromCode(s)]),n||(n=e.default),n||[]}toResolveHierarchy(e,s){const n=this.getFallbackCodes(s||this.options.fallbackLng||[],e),r=[],i=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return R(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):R(e)&&i(this.formatLanguageCode(e)),n.forEach(a=>{r.indexOf(a)<0&&i(this.formatLanguageCode(a))}),r}}let si=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],ni={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const ri=["v1","v2","v3"],ii=["v4"],ps={zero:0,one:1,two:2,few:3,many:4,other:5},oi=()=>{const t={};return si.forEach(e=>{e.lngs.forEach(s=>{t[s]={numbers:e.nr,plurals:ni[e.fc]}})}),t};class ai{constructor(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=s,this.logger=be.create("pluralResolver"),(!this.options.compatibilityJSON||ii.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=oi(),this.pluralRulesCache={}}addRule(e,s){this.rules[e]=s}clearCache(){this.pluralRulesCache={}}getRule(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=mt(e==="dev"?"en":e),r=s.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(n,{type:r})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,s)}return this.pluralRulesCache[i]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,s);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(r=>`${s}${r}`)}getSuffixes(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,s);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((r,i)=>ps[r]-ps[i]).map(r=>`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r}`):n.numbers.map(r=>this.getSuffix(e,r,s)):[]}getSuffix(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(s)}`:this.getSuffixRetroCompatible(r,s):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,s){const n=e.noAbs?e.plurals(s):e.plurals(Math.abs(s));let r=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!ri.includes(this.options.compatibilityJSON)}}const gs=function(t,e,s){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Jr(t,e,s);return!i&&r&&R(s)&&(i=_t(t,s,n),i===void 0&&(i=_t(e,s,n))),i},At=t=>t.replace(/\$/g,"$$$$");class li{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=be.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(s=>s),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:s,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:a,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:f,unescapePrefix:p,nestingPrefix:u,nestingPrefixEscaped:g,nestingSuffix:b,nestingSuffixEscaped:m,nestingOptionsSeparator:y,maxReplaces:L,alwaysFormat:E}=e.interpolation;this.escape=s!==void 0?s:Xr,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?De(i):a||"{{",this.suffix=l?De(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=f?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=u?De(u):g||De("$t("),this.nestingSuffix=b?De(b):m||De(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=L||1e3,this.alwaysFormat=E!==void 0?E:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(s,n)=>s&&s.source===n?(s.lastIndex=0,s):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,s,n,r){let i,a,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=g=>{if(g.indexOf(this.formatSeparator)<0){const L=gs(s,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(L,void 0,n,{...r,...s,interpolationkey:g}):L}const b=g.split(this.formatSeparator),m=b.shift().trim(),y=b.join(this.formatSeparator).trim();return this.format(gs(s,c,m,this.options.keySeparator,this.options.ignoreJSONStructure),y,n,{...r,...s,interpolationkey:m})};this.resetRegExp();const f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>At(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?At(this.escape(g)):At(g)}].forEach(g=>{for(l=0;i=g.regex.exec(e);){const b=i[1].trim();if(a=d(b),a===void 0)if(typeof f=="function"){const y=f(e,i,r);a=R(y)?y:""}else if(r&&Object.prototype.hasOwnProperty.call(r,b))a="";else if(p){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${e}`),a="";else!R(a)&&!this.useRawValueToEscape&&(a=as(a));const m=g.safeValue(a);if(e=e.replace(i[0],m),p?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,i,a;const l=(c,d)=>{const f=this.nestingOptionsSeparator;if(c.indexOf(f)<0)return c;const p=c.split(new RegExp(`${f}[ ]*{`));let u=`{${p[1]}`;c=p[0],u=this.interpolate(u,a);const g=u.match(/'/g),b=u.match(/"/g);(g&&g.length%2===0&&!b||b.length%2!==0)&&(u=u.replace(/'/g,'"'));try{a=JSON.parse(u),d&&(a={...d,...a})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,m),`${c}${f}${u}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];a={...n},a=a.replace&&!R(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let d=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const f=r[1].split(this.formatSeparator).map(p=>p.trim());r[1]=f.shift(),c=f,d=!0}if(i=s(l.call(this,r[1].trim(),a),a),i&&r[0]===e&&!R(i))return i;R(i)||(i=as(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),d&&(i=c.reduce((f,p)=>this.format(f,p,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const ci=t=>{let e=t.toLowerCase().trim();const s={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);e==="currency"&&r.indexOf(":")<0?s.currency||(s.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?s.range||(s.range=r.trim()):r.split(";").forEach(a=>{if(a){const[l,...c]=a.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),f=l.trim();s[f]||(s[f]=d),d==="false"&&(s[f]=!1),d==="true"&&(s[f]=!0),isNaN(d)||(s[f]=parseInt(d,10))}})}return{formatName:e,formatOptions:s}},ke=t=>{const e={};return(s,n,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const a=n+JSON.stringify(i);let l=e[a];return l||(l=t(mt(n),r),e[a]=l),l(s)}};class di{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=be.create("formatter"),this.options=e,this.formats={number:ke((s,n)=>{const r=new Intl.NumberFormat(s,{...n});return i=>r.format(i)}),currency:ke((s,n)=>{const r=new Intl.NumberFormat(s,{...n,style:"currency"});return i=>r.format(i)}),datetime:ke((s,n)=>{const r=new Intl.DateTimeFormat(s,{...n});return i=>r.format(i)}),relativetime:ke((s,n)=>{const r=new Intl.RelativeTimeFormat(s,{...n});return i=>r.format(i,n.range||"day")}),list:ke((s,n)=>{const r=new Intl.ListFormat(s,{...n});return i=>r.format(i)})},this.init(e)}init(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=s.interpolation.formatSeparator||","}add(e,s){this.formats[e.toLowerCase().trim()]=s}addCached(e,s){this.formats[e.toLowerCase().trim()]=ke(s)}format(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:d,formatOptions:f}=ci(c);if(this.formats[d]){let p=l;try{const u=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},g=u.locale||u.lng||r.locale||r.lng||n;p=this.formats[d](l,g,{...f,...r,...u})}catch(u){this.logger.warn(u)}return p}else this.logger.warn(`there was no format function for ${d}`);return l},e)}}const ui=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class fi extends wt{constructor(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=s,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=be.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,s,n,r){const i={},a={},l={},c={};return e.forEach(d=>{let f=!0;s.forEach(p=>{const u=`${d}|${p}`;!n.reload&&this.store.hasResourceBundle(d,p)?this.state[u]=2:this.state[u]<0||(this.state[u]===1?a[u]===void 0&&(a[u]=!0):(this.state[u]=1,f=!1,a[u]===void 0&&(a[u]=!0),i[u]===void 0&&(i[u]=!0),c[p]===void 0&&(c[p]=!0)))}),f||(l[d]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,s,n){const r=e.split("|"),i=r[0],a=r[1];s&&this.emit("failedLoading",i,a,s),!s&&n&&this.store.addResourceBundle(i,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=s?-1:2,s&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{qr(c.loaded,[i],a),ui(c,e),s&&c.errors.push(s),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const f=c.loaded[d];f.length&&f.forEach(p=>{l[d][p]===void 0&&(l[d][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,s,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:s,fcName:n,tried:r,wait:i,callback:a});return}this.readingCalls++;const l=(d,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(d&&f&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,s,n,r+1,i*2,a)},i);return}a(d,f)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const d=c(e,s);d&&typeof d.then=="function"?d.then(f=>l(null,f)).catch(l):l(null,d)}catch(d){l(d)}return}return c(e,s,l)}prepareLoading(e,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();R(e)&&(e=this.languageUtils.toResolveHierarchy(e)),R(s)&&(s=[s]);const i=this.queueLoad(e,s,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,s,n){this.prepareLoading(e,s,{},n)}reload(e,s,n){this.prepareLoading(e,s,{reload:!0},n)}loadOne(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(a,l)=>{a&&this.logger.warn(`${s}loading namespace ${i} for language ${r} failed`,a),!a&&l&&this.logger.log(`${s}loaded namespace ${i} for language ${r}`,l),this.loaded(e,a,l)})}saveMissing(e,s,n,r,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn(`did not save key "${n}" as the namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const c={...a,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let f;d.length===5?f=d(e,s,n,r,c):f=d(e,s,n,r),f&&typeof f.then=="function"?f.then(p=>l(null,p)).catch(l):l(null,f)}catch(f){l(f)}else d(e,s,n,r,l,c)}!e||!e[0]||this.store.addResource(e[0],s,n,r)}}}const ms=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),R(t[1])&&(e.defaultValue=t[1]),R(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const s=t[3]||t[2];Object.keys(s).forEach(n=>{e[n]=s[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),xs=t=>(R(t.ns)&&(t.ns=[t.ns]),R(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),R(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),ot=()=>{},hi=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(s=>{typeof t[s]=="function"&&(t[s]=t[s].bind(t))})};class et extends wt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(super(),this.options=xs(e),this.services={},this.logger=be,this.modules={external:[]},hi(this),s&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,s),this;setTimeout(()=>{this.init(e,s)},0)}}init(){var e=this;let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof s=="function"&&(n=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(R(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const r=ms();this.options={...r,...this.options,...xs(s)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const i=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?be.init(i(this.modules.logger),this.options):be.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=di);const p=new hs(this.options);this.store=new us(this.options.resources,this.options);const u=this.services;u.logger=be,u.resourceStore=this.store,u.languageUtils=p,u.pluralResolver=new ai(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(u.formatter=i(f),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new li(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new fi(i(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(g){for(var b=arguments.length,m=new Array(b>1?b-1:0),y=1;y<b;y++)m[y-1]=arguments[y];e.emit(g,...m)}),this.modules.languageDetector&&(u.languageDetector=i(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=i(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new bt(this.services,this.options),this.translator.on("*",function(g){for(var b=arguments.length,m=new Array(b>1?b-1:0),y=1;y<b;y++)m[y-1]=arguments[y];e.emit(g,...m)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=ot),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return e.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return e.store[f](...arguments),e}});const c=Je(),d=()=>{const f=(p,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(u),n(p,u)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot;const r=R(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],a=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};r?a(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload&&this.options.preload.forEach(l=>a(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(e,s,n){const r=Je();return typeof e=="function"&&(n=e,e=void 0),typeof s=="function"&&(n=s,s=void 0),e||(e=this.languages),s||(s=this.options.ns),n||(n=ot),this.services.backendConnector.reload(e,s,i=>{r.resolve(),n(i)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Js.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let s=0;s<this.languages.length;s++){const n=this.languages[s];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,s){var n=this;this.isLanguageChangingTo=e;const r=Je();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),s&&s(c,function(){return n.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const d=R(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,f=>{a(f,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,s,n){var r=this;const i=function(a,l){let c;if(typeof l!="object"){for(var d=arguments.length,f=new Array(d>2?d-2:0),p=2;p<d;p++)f[p-2]=arguments[p];c=r.options.overloadTranslationOptionHandler([a,l].concat(f))}else c={...l};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const u=r.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(a)?g=a.map(b=>`${c.keyPrefix}${u}${b}`):g=c.keyPrefix?`${c.keyPrefix}${u}${a}`:a,r.t(g,c)};return R(e)?i.lng=e:i.lngs=e,i.ns=s,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=s.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(s.precheck){const l=s.precheck(this,a);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!r||a(i,e)))}loadNamespaces(e,s){const n=Je();return this.options.ns?(R(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{n.resolve(),s&&s(r)}),n):(s&&s(),Promise.resolve())}loadLanguages(e,s){const n=Je();R(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=r.concat(i),this.loadResources(a=>{n.resolve(),s&&s(a)}),n):(s&&s(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new hs(ms());return s.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;return new et(e,s)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new et(r);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new us(this.store.data,r),i.services.resourceStore=i.store),i.translator=new bt(i.services,r),i.translator.on("*",function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];i.emit(l,...d)}),i.init(r,s),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const re=et.createInstance();re.createInstance=et.createInstance;re.createInstance;re.dir;re.init;re.loadResources;re.reloadResources;re.use;re.changeLanguage;re.getFixedT;const M=re.t;re.exists;re.setDefaultNamespace;re.hasLoadedNamespace;re.loadNamespaces;re.loadLanguages;const bs=4;function pi({offer:t,selectedNft:e,setSelectedNft:s,setNft:n,setTransactionType:r,inputDrawerHandler:i}){const a=t.props.usdt===!0;return o.jsxs(zs,{withBorder:!0,children:[o.jsxs($,{children:[o.jsxs($.Col,{span:10,children:[o.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:t.nft.collectionName}),o.jsx(v,{fw:500,ml:"2px",truncate:"end",children:t.nft.name})]}),o.jsx($.Col,{span:2,children:o.jsx(jn,{m:"xs",color:"grape",radius:"md",size:"md",checked:e.includes(t),disabled:!e.includes(t)&&e.length>bs-1,onClick:()=>{if(e.includes(t))s(e.filter(l=>l!==t));else if(e.length<bs){const l=e.filter(c=>c.nft!==t.nft);s([...l,t])}},readOnly:!0})})]}),o.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[o.jsx(Bs,{radius:"md",src:t.nft.previewUrl,h:150,w:"auto",fit:"contain",fallbackSrc:"https://placehold.co/200x200?text=NFT"}),o.jsxs($,{ml:-10,mr:-10,children:[o.jsxs($.Col,{span:6,children:[o.jsxs(v,{size:"xs",children:[" ",M("Loan"),": "]})," ",o.jsxs(v,{size:"sm",fw:500,children:[t.props.size," ",a?"USDT":"TON"]}),o.jsxs(v,{size:"xs",children:[" ",M("Per day"),": "]})," ",o.jsxs(v,{size:"sm",fw:500,children:[t.props.interest," %"]})]}),o.jsxs($.Col,{span:6,children:[o.jsxs(v,{size:"xs",children:[" ",M("Term"),": "]})," ",o.jsxs(v,{size:"sm",fw:500,children:[" ",t.props.duration," ",M("days")]}),o.jsxs(v,{size:"xs",children:[" ",M("Minimum"),": "]})," ",o.jsxs(v,{size:"xs",fw:500,children:[" ",t.props.minimal," ",a?"USDT":"TON"]})]}),o.jsx($.Col,{span:12,children:o.jsxs(fe,{children:[o.jsxs(v,{size:"xs",children:[M("For the entire period"),": "]})," ",o.jsxs(v,{size:"xs",fw:500,children:[t.props.overPayment," ",a?"USDT":"TON"]}),o.jsxs(Ct,{width:300,position:"top",withArrow:!0,shadow:"md",children:[o.jsx(Ct.Target,{children:o.jsx(Ze,{variant:"default",size:"xs",children:o.jsx(Cn,{})})}),o.jsx(Ct.Dropdown,{children:o.jsx(v,{size:"xs",children:M(a?"The cost of the loan is calculated per day.":"The cost of the loan is calculated per second.")})})]})]})})]})]}),e.length===0&&o.jsxs(ne,{variant:"filled",fullWidth:!0,mt:"xs",color:a?"teal":"blue",onClick:()=>{n(t),r(ve.GET_CREDIT),i.open()},children:[M("Get")," ",t.props.size," ",a?"USDT":"TON"]})]})}function gi({credit:t,tx:e,resetStates:s,isHolder:n,usdtWallet:r}){var a,l,c;const i=t.usdt===!0;return o.jsxs(ee,{withBorder:!0,children:[o.jsxs(ee.Section,{children:[o.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:(a=t.pawn)==null?void 0:a.collectionName}),o.jsx(v,{fw:500,ml:"2px",children:(l=t.pawn)==null?void 0:l.name}),o.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[o.jsx(ze,{variant:"filled",radius:"sm",src:(c=t.pawn)==null?void 0:c.previewUrl,size:"xl"}),o.jsxs($,{children:[o.jsxs($.Col,{span:6,children:[o.jsxs(v,{size:"xs",children:[" ",M("Loan"),": ",t.size," ",i?"USDT":"TON"]}),o.jsxs(v,{size:"xs",children:[" ",M("Per day"),": ",t.interest/100," %"]})]}),o.jsx($.Col,{span:6,children:o.jsxs(v,{size:"xs",children:[" ",M("Date"),": ",t.end.toLocaleDateString("ru-RU")," "]})}),o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[M("Debt"),": "," ",o.jsx(se,{value:t.debt,decimalScale:3,suffix:i?" USDT":" TON"})]})})]})]})]}),o.jsx(ee.Section,{children:o.jsxs(fe,{gap:"xs",mt:"xs",grow:!0,justify:"space-between",children:[n&&!i&&o.jsx(ne,{variant:"outline",color:i?"teal":"blue",onClick:()=>e.renewalCredit(t.address,t.debt-t.size).then(d=>{console.log("tx.renewalCredit result: ",d),s()}),children:M("Extend")}),o.jsx(ne,{color:i?"teal":"blue",onClick:()=>{t.usdt?r&&e.redeemUsdtCredit(t.id,t.debt,r.address).then(d=>{console.log("tx.redeemCredit result: ",d),s()}):e.redeemCredit(t.address,t.debt).then(d=>{console.log("tx.redeemCredit result: ",d),s()})},children:M("Redeem")})]})})]},t.address)}function mi({nfts:t,credits:e,collectionNames:s,tx:n,isHolder:r,allowed:i,reloadNfts:a,resetStates:l,setNft:c,setTransactionType:d,inputDrawerHandler:f,usdtWallet:p,bankFinance:u,usdtBankFinance:g}){const{t:b}=ye(),[m,y]=S.useState(""),[L,E]=S.useState([]),[F,j]=S.useState(""),[U,O]=S.useState(null),[k,q]=S.useState([]),[K,I]=S.useState([]),[J,N]=S.useState(""),[V,D]=S.useState(!1);S.useEffect(()=>{let w=!1,_=0,G=0;K.forEach(te=>{te.props.usdt?G+=te.props.size:_+=te.props.size});let H=" ";_>0&&(H+=_+" TON"),_>0&&G>0&&(H+=" & "),G>0&&(H+=G+" USDT"),N(H),g!==null&&g.balance/ue<G&&(w=!0),u!==null&&u.balance/Ae<_&&(w=!0),w!==V&&D(w)},[K]);const h=Tn({onDropdownClose:()=>{h.resetSelectedOption(),h.focusTarget(),j("")},onDropdownOpen:()=>{h.focusSearchInput()}}),x=s.filter(w=>w.toLowerCase().includes(F.toLowerCase().trim())).map(w=>o.jsx(Pe.Option,{value:w,children:w},w));S.useEffect(()=>{t!==null&&I([])},[t]),S.useEffect(()=>{if(t!==null)if(U===null)q(t);else{const w=t.filter(_=>_.nft.collectionName?_.nft.collectionName===U:!1);q(w)}},[U,t]),S.useEffect(()=>{if(T.Address.isFriendly(m)){const w=k.filter(_=>{const G=T.Address.parse(_.nft.address).toString();return m===G});E(w)}else{const w=k.filter(_=>_.nft.name?_.nft.name.toLowerCase().includes(m.toLowerCase()):!1);E(w)}},[m,k]);const C=w=>{y(w.target.value)};S.useEffect(()=>{y(""),O(null),t!==null&&E(t)},[t]);const A=L.map(w=>o.jsx(pi,{offer:w,selectedNft:K,setSelectedNft:I,setNft:c,setTransactionType:d,inputDrawerHandler:f},w.nft.address+w.props.verifier)),P=e==null?void 0:e.map(w=>o.jsx(gi,{credit:w,tx:n,resetStates:l,isHolder:r,usdtWallet:p},w.address));return o.jsxs(He,{size:"xl",pl:"0",pr:"0",children:[K.length>0&&o.jsx(An,{w:"100%",children:o.jsxs(ne,{fullWidth:!0,variant:"filled",disabled:V,size:"md",radius:"xs",color:"grape",onClick:()=>{Hr(K).then(w=>n.createCreditMass(w.nftAddresses,w.vItemAddresses,w.forwardPayloads))},children:[b("Get")," ",J]})}),e&&o.jsxs(o.Fragment,{children:[o.jsx(pt,{my:"xs",label:b("In pledge"),labelPosition:"center"}),o.jsx($e,{cols:{base:1,md:2,lg:3},spacing:"md",children:P})]}),o.jsx(pt,{my:"xs",label:b("My NFTs"),labelPosition:"center"}),t?o.jsx(o.Fragment,{children:t.length>0?o.jsxs(o.Fragment,{children:[o.jsxs(fe,{mb:"sm",children:[o.jsx(On,{radius:"xl",size:"md",style:{width:"100%",flex:1},placeholder:b("Search"),rightSectionWidth:42,value:m,onChange:C,rightSection:o.jsx(Nn,{"aria-label":b("Clear"),onClick:()=>{y(""),t!==null&&E(t)},style:{display:m?void 0:"none"}})}),o.jsxs(Pe,{store:h,width:250,position:"bottom-start",withArrow:!0,onOptionSubmit:w=>{O(w),h.closeDropdown()},children:[o.jsx(Pe.Target,{withAriaAttributes:!1,children:o.jsx(ne,{onClick:()=>h.toggleDropdown(),children:b("Collection")})}),o.jsxs(Pe.Dropdown,{children:[o.jsx(Pe.Search,{value:F,onChange:w=>j(w.currentTarget.value),placeholder:b("Search collection")}),o.jsx(Pe.Options,{children:x.length>0?x:o.jsx(Pe.Empty,{children:b("Not found")})})]})]}),o.jsx(Ze,{size:"xl","aria-label":"Reload NFTs",loading:!t,loaderProps:{type:"dots"},onClick:()=>a(),children:o.jsx(Rt,{})})]}),o.jsx($e,{cols:{base:1,md:2,lg:3},spacing:"md",children:A})]}):o.jsxs(o.Fragment,{children:[o.jsx(ut,{children:o.jsx(v,{children:b("No NFTs for collateral")})}),o.jsx(Hs,{data:i})]})}):o.jsx(st,{className:St.loader})]})}const xi="_card_1t8bd_1",bi="_cardSection_1t8bd_12",yi="_section_1t8bd_17",Si="_input_1t8bd_22",wi="_label_1t8bd_27",vi="_icon_1t8bd_36",ji="_balance_1t8bd_40",Ci="_loader_1t8bd_47",Ti="_refresh_1t8bd_52",ae={card:xi,cardSection:bi,section:yi,input:Si,label:wi,icon:vi,balance:ji,loader:Ci,refresh:Ti};function Ai({size:t,style:e,...s}){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 32 32",style:{width:t,height:t,...e},...s,children:o.jsx("path",{d:"M17.922 17.383v-.002c-.11.008-.677.042-1.942.042c-1.01 0-1.721-.03-1.971-.042v.003c-3.888-.171-6.79-.848-6.79-1.658c0-.809 2.902-1.486 6.79-1.66v2.644c.254.018.982.061 1.988.061c1.207 0 1.812-.05 1.925-.06v-2.643c3.88.173 6.775.85 6.775 1.658c0 .81-2.895 1.485-6.775 1.657m0-3.59v-2.366h5.414V7.819H8.595v3.608h5.414v2.365c-4.4.202-7.709 1.074-7.709 2.118c0 1.044 3.309 1.915 7.709 2.118v7.582h3.913v-7.584c4.393-.202 7.694-1.073 7.694-2.116c0-1.043-3.301-1.914-7.694-2.117"})})}const at=7;function Oi({user:t,bankFinance:e,usdtBankFinance:s,reloadAccount:n,accountLoading:r,tx:i,resetStates:a}){var te,he;const{t:l}=ye(),[c,d]=S.useState("1"),[f,p]=S.useState("1"),[u,g]=S.useState(),[b,m]=S.useState(0),[y,L]=S.useState("1"),[E,F]=S.useState("1"),[j,U]=S.useState(),[O,k]=S.useState(0),[q,K]=S.useState(0),[I,J]=S.useState(0),[N,V]=S.useState(0),[D,h]=S.useState(0),[x,C]=S.useState(0),[A,P]=S.useState(0),[w,_]=S.useState(0),[G,H]=S.useState(0);return S.useEffect(()=>{if(e===null)return;let B=Math.floor((e.balance+e.credits)/1e7)/100;K(B);let X=b/B*100;J(X);let ce=b,Q=e.balance/Ae;b>Q&&(ce=Q),V(ce);let Y=e.credits/Ae/B*100;h(Y)},[e,b]),S.useEffect(()=>{if(t.account!==null){let B=Math.floor(t.account.balance*t.account.rate/t.account.decimals)/t.account.decimals;m(B)}},[t.account]),S.useEffect(()=>{if(s===null)return;let B=Math.floor(100*(s.balance+s.credits)/ue)/100;C(B);let X=O/B*100;P(X);let ce=O,Q=s.balance/ue;O>Q&&(ce=Q),_(ce);let Y=s.credits/ue/B*100;H(Y)},[s,O]),S.useEffect(()=>{if(t.usdtAccount!==null){let B=Math.floor(t.usdtAccount.balance*t.usdtAccount.rate/ue)/ue;k(B)}},[t.usdtAccount]),o.jsx(o.Fragment,{children:o.jsxs($e,{cols:{base:1,sm:4},spacing:"md",children:[t.account!==null?o.jsx(ee,{withBorder:!0,radius:"md",className:ae.card,children:o.jsxs(ee.Section,{className:ae.cardSection,children:[o.jsx(Et,{className:ae.icon,size:60,radius:60,color:"blue",children:o.jsx(Pn,{style:{width:z(48),height:z(48)},stroke:1.5})}),o.jsx(v,{ta:"center",fz:"lg",fw:700,mt:"md",className:ae.balance,children:o.jsx(se,{value:b,decimalScale:3,suffix:" TON"})}),o.jsx(v,{ta:"center",c:"dimmed",fz:"sm",children:l("Balance")}),o.jsxs(ie,{defaultValue:"deposit",children:[o.jsxs(ie.List,{justify:"center",children:[o.jsx(ie.Tab,{value:"deposit",children:l("Replenishment")}),o.jsx(ie.Tab,{value:"withdraw",disabled:t.account.balance<10,children:l("Withdrawal")}),o.jsx(ie.Tab,{value:"info",children:l("Info")})]}),o.jsxs(ie.Panel,{value:"deposit",children:[o.jsx(Be,{mt:"md",label:l("Amount")+" TON",placeholder:"1",classNames:ae,defaultValue:1,allowNegative:!1,min:1e-9,max:(te=t.holder)==null?void 0:te.limit,value:c,onChange:d,error:u,decimalScale:at,decimalSeparator:",",hideControls:!0,disabled:((he=t.holder)==null?void 0:he.limit)===0,rightSection:o.jsx(ne,{size:"compact-md",variant:"outline",onClick:()=>{var B;d(Number((B=t.holder)==null?void 0:B.limit)),console.log("MAX Deposit: ",c+"")},children:"max"})}),o.jsx(ne,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{var X;let B=(X=t.holder)!=null&&X.fullLimit?t.holder.fullLimit:0;B&&t.account!==null&&(B=t.account.rate*B,console.log("Deposit Limit: ",B)),i.depositAccount(c,B).then(ce=>{console.log("tx.depositAccount result: ",ce),a()})},children:l("Top up")}),t.holder&&o.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for replenishment"),": "," ",o.jsx(se,{value:Math.floor(t.holder.limit*1e3)/1e3,fixedDecimalScale:!1,suffix:" TON"})]})]}),o.jsxs(ie.Panel,{value:"withdraw",children:[o.jsx(Be,{mt:"md",label:l("Amount")+" TON",placeholder:"1",classNames:ae,defaultValue:1,allowNegative:!1,min:1e-9,max:N,value:f,onChange:p,error:u,decimalScale:at,decimalSeparator:",",hideControls:!0,rightSection:o.jsx(ne,{size:"compact-md",variant:"outline",onClick:()=>{p(N),console.log("MAX Withdraw: ",f+"")},children:"max"})}),t.account.balance>0&&o.jsx(ne,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{if(t.account!==null&&t.account.address!==null){g(void 0);let B=Math.floor(t.account.decimals*Number(f)/t.account.rate*t.account.decimals)+"";i.withdrawAccount(B,t.account.address.toString()).then(X=>{console.log("tx.withdrawAccount result: ",X),a()})}},children:l("Withdraw")}),o.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for withdraw"),": "," ",o.jsx(se,{value:Math.floor(N*1e3)/1e3,fixedDecimalScale:!1,suffix:" TON"})]})]}),e&&o.jsxs(ie.Panel,{value:"info",children:[o.jsxs(v,{c:"dimmed",fz:"sm",mt:"md",children:[l("Total pool balance"),": ",q," TON"]}),o.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Pool share"),": "," ",o.jsx(se,{value:I,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]}),o.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("APY"),": "," ",o.jsx(se,{value:(e.rate/Ae-1)*100,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]}),o.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Utilization rate"),": "," ",o.jsx(se,{value:D,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]})]})]}),o.jsx(Ze,{className:ae.refresh,"aria-label":l("Reload"),variant:"subtle",loading:r,onClick:()=>n(),children:o.jsx(Rt,{})})]})}):o.jsx(st,{className:ae.loader}),t.usdtAccount!==null&&o.jsx(ee,{withBorder:!0,radius:"md",className:ae.card,children:o.jsxs(ee.Section,{className:ae.cardSection,children:[o.jsx(Et,{className:ae.icon,size:60,radius:60,color:"teal",children:o.jsx(Ai,{style:{width:z(48),height:z(48)}})}),o.jsx(v,{ta:"center",fz:"lg",fw:700,mt:"md",className:ae.balance,children:o.jsx(se,{value:O,decimalScale:3,suffix:" USDT"})}),o.jsx(v,{ta:"center",c:"dimmed",fz:"sm",children:l("Balance")}),o.jsxs(ie,{defaultValue:"deposit",children:[o.jsxs(ie.List,{justify:"center",children:[o.jsx(ie.Tab,{value:"deposit",children:l("Replenishment")}),o.jsx(ie.Tab,{value:"withdraw",disabled:t.usdtAccount.balance<10,children:l("Withdrawal")}),o.jsx(ie.Tab,{value:"info",children:l("Info")})]}),o.jsxs(ie.Panel,{value:"deposit",children:[o.jsx(Be,{mt:"md",label:l("Amount")+" USDT",placeholder:"1",classNames:ae,defaultValue:1,allowNegative:!1,min:1e-5,value:y,onChange:L,error:j,decimalScale:at,decimalSeparator:",",hideControls:!0,rightSection:o.jsx(ne,{size:"compact-md",variant:"outline",onClick:()=>{var B,X;L(Number((B=t.usdtWallet)==null?void 0:B.balance)/Number((X=t.usdtWallet)==null?void 0:X.decimals)),console.log("MAX Deposit: ",y+"")},children:"max"})}),o.jsx(ne,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{if(t.usdtWallet){const B=Number(y)*t.usdtWallet.decimals;i.depositUsdtAccount(B,t.usdtWallet.address).then(X=>{console.log("tx.depositUsdtAccount result: ",X),a()})}},children:l("Top up")}),t.usdtWallet&&o.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for replenishment"),": "," ",o.jsx(se,{value:Math.floor(t.usdtWallet.balance/t.usdtWallet.decimals*1e3)/1e3,fixedDecimalScale:!1,suffix:" USDT"})]})]}),o.jsxs(ie.Panel,{value:"withdraw",children:[o.jsx(Be,{mt:"md",label:l("Amount")+" USDT",placeholder:"1",classNames:ae,defaultValue:1,allowNegative:!1,min:1e-6,max:w,value:E,onChange:F,error:j,decimalScale:at,decimalSeparator:",",hideControls:!0,rightSection:o.jsx(ne,{size:"compact-md",variant:"outline",onClick:()=>{F(w),console.log("MAX Withdraw: ",E+"")},children:"max"})}),t.usdtAccount.balance>0&&o.jsx(ne,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{if(t.usdtAccount!==null&&t.usdtAccount.address!==null){U(void 0);let B=Math.floor(t.usdtAccount.decimals*Number(E)/t.usdtAccount.rate*t.usdtAccount.decimals)+"";i.withdrawAccount(B,t.usdtAccount.address.toString()).then(X=>{console.log("tx.withdrawAccount (usdt) result: ",X),a()})}},children:l("Withdraw")}),o.jsxs(v,{ta:"center",c:"dimmed",fz:"sm",children:[l("Available for withdraw"),": "," ",o.jsx(se,{value:Math.floor(w*1e3)/1e3,fixedDecimalScale:!1,suffix:" USDT"})]})]}),s&&o.jsxs(ie.Panel,{value:"info",children:[o.jsxs(v,{c:"dimmed",fz:"sm",mt:"md",children:[l("Total pool balance"),": ",x," USDT"]}),o.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Pool share"),": "," ",o.jsx(se,{value:A,fixedDecimalScale:!1,decimalScale:5,suffix:" %"})]}),o.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("APY"),": "," ",o.jsx(se,{value:(s.rate/ue-1)*100,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]}),o.jsxs(v,{c:"dimmed",fz:"sm",mt:"sm",children:[l("Utilization rate"),": "," ",o.jsx(se,{value:G,fixedDecimalScale:!1,decimalScale:3,suffix:" %"})]})]})]}),o.jsx(Ze,{className:ae.refresh,"aria-label":l("Reload"),variant:"subtle",loading:r,onClick:()=>n(),children:o.jsx(Rt,{})})]})})]})})}function Ni(){const[t,e]=S.useState("light");return S.useEffect(()=>{le.initDataUnsafe.user!==void 0&&e(le.colorScheme)},[]),{colorScheme:t}}function Pi(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var s,n,r,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();r=c.shift();)s=r[0],s==="*"?(a.push(s),l+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):s===":"?(n=r.indexOf("?",1),i=r.indexOf(".",1),a.push(r.substring(1,~n?n:~i?i:r.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+r.substring(i))):l+="/"+r;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var Gs={exports:{}},Xs={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe=S;function Ei(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ri=typeof Object.is=="function"?Object.is:Ei,Li=Fe.useState,Ui=Fe.useEffect,Ii=Fe.useLayoutEffect,Di=Fe.useDebugValue;function ki(t,e){var s=e(),n=Li({inst:{value:s,getSnapshot:e}}),r=n[0].inst,i=n[1];return Ii(function(){r.value=s,r.getSnapshot=e,Ot(r)&&i({inst:r})},[t,s,e]),Ui(function(){return Ot(r)&&i({inst:r}),t(function(){Ot(r)&&i({inst:r})})},[t]),Di(s),s}function Ot(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Ri(t,s)}catch{return!0}}function _i(t,e){return e()}var Mi=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_i:ki;Xs.useSyncExternalStore=Fe.useSyncExternalStore!==void 0?Fe.useSyncExternalStore:Mi;Gs.exports=Xs;var Bi=Gs.exports;const zi=En["useInsertionEffect"],$i=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Fi=$i?S.useLayoutEffect:S.useEffect,Vi=zi||Fi,Ys=t=>{const e=S.useRef([t,(...s)=>e[0](...s)]).current;return Vi(()=>{e[0]=t}),e[1]},Hi="popstate",Xt="pushState",Yt="replaceState",Ki="hashchange",ys=[Hi,Xt,Yt,Ki],Wi=t=>{for(const e of ys)addEventListener(e,t);return()=>{for(const e of ys)removeEventListener(e,t)}},Qs=(t,e)=>Bi.useSyncExternalStore(Wi,t,e),qi=()=>location.search,Ji=({ssrSearch:t=""}={})=>Qs(qi,()=>t),Ss=()=>location.pathname,Gi=({ssrPath:t}={})=>Qs(Ss,t?()=>t:Ss),Xi=(t,{replace:e=!1,state:s=null}={})=>history[e?Yt:Xt](s,"",t),Yi=(t={})=>[Gi(t),Xi],ws=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[ws]>"u"){for(const t of[Xt,Yt]){const e=history[t];history[t]=function(){const s=e.apply(this,arguments),n=new Event(t);return n.arguments=arguments,dispatchEvent(n),s}}Object.defineProperty(window,ws,{value:!0})}const Qi=(t="",e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",Zi=(t,e="")=>t[0]==="~"?t.slice(1):e+t,eo=t=>{try{return decodeURI(t)}catch{return t}},Zs={hook:Yi,searchHook:Ji,parser:Pi,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},en=S.createContext(Zs),nt=()=>S.useContext(en),tn={},sn=S.createContext(tn),to=()=>S.useContext(sn),vt=t=>{const[e,s]=t.hook(t);return[eo(Qi(t.base,e)),Ys((n,r)=>s(Zi(n,t.base),r))]},so=()=>vt(nt()),nn=(t,e,s,n)=>{const{pattern:r,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",n),a=r.exec(s)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((p,u)=>[p,c[u]])):a.groups;let f={...c};return d&&Object.assign(f,d),f})(),...n?[l]:[]]:[!1,null]},no=({children:t,...e})=>{var f,p;const s=nt(),n=e.hook?Zs:s;let r=n;const[i,a]=((f=e.ssrPath)==null?void 0:f.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((p=e.hook)==null?void 0:p.hrefs);let l=S.useRef({}),c=l.current,d=c;for(let u in n){const g=u==="base"?n[u]+(e[u]||""):e[u]||n[u];c===d&&g!==d[u]&&(l.current=d={...d}),d[u]=g,g!==n[u]&&(r=d)}return S.createElement(en.Provider,{value:r,children:t})},vs=({children:t,component:e},s)=>e?S.createElement(e,{params:s}):typeof t=="function"?t(s):t,ro=t=>{let e=S.useRef(tn),s=e.current;for(const n in t)t[n]!==s[n]&&(s=t);return e.current=s},Re=({path:t,nest:e,match:s,...n})=>{const r=nt(),[i]=vt(r),[a,l,c]=s??nn(r.parser,t,i,e),d=ro({...to(),...l});if(!a)return null;const f=c?S.createElement(no,{base:c},vs(n,d)):vs(n,d);return S.createElement(sn.Provider,{value:d,children:f})},_e=S.forwardRef((t,e)=>{const s=nt(),[n,r]=vt(s),{to:i,href:a=i,onClick:l,asChild:c,children:d,className:f,replace:p,state:u,...g}=t,b=Ys(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),r(a,t)))}),m=s.hrefs(a[0]==="~"?a.slice(1):s.base+a,s);return c&&S.isValidElement(d)?S.cloneElement(d,{onClick:b,href:m}):S.createElement("a",{...g,onClick:b,href:m,className:f!=null&&f.call?f(n===a):f,children:d,ref:e})}),rn=t=>Array.isArray(t)?t.flatMap(e=>rn(e&&e.type===S.Fragment?e.props.children:e)):[t],io=({children:t,location:e})=>{const s=nt(),[n]=vt(s);for(const r of rn(t)){let i=0;if(S.isValidElement(r)&&(i=nn(s.parser,r.props.path,e||n,r.props.nest))[0])return S.cloneElement(r,{match:i})}return null},oo="_icon_1u5u8_1",ao="_dark_1u5u8_6",lo="_light_1u5u8_16",co="_inner_1u5u8_26",uo="_main_1u5u8_33",fo="_txt_1u5u8_37",Me={icon:oo,dark:ao,light:lo,inner:co,main:uo,txt:fo},on=1e3;var Ge=[],js=0,Mt=1.2,Xe=on/Mt;const an=t=>{Mt=t,Xe=on/Mt},ht=t=>{let e,s=Date.now();if(t!==void 0?s-js<Xe?(Ge.push(t),Ge.length===1&&setTimeout(ht,Xe)):e=t:e=Ge.shift(),e!==void 0){let n=e;js=s,fetch(e.url,e.data).then(r=>{n.onResponse(r),Ge.length>0&&setTimeout(ht,Xe)}).catch(r=>{n.onError(r),Ge.length>0&&setTimeout(ht,Xe)})}},jt=(t,e)=>new Promise((s,n)=>{ht({url:t,data:e,onResponse:s,onError:n})}),Bt={method:"get"};let zt;const ge={ACCOUNTS:"accounts/",COLLECTIONS:"nfts/collections/",BLOCKCHAIN_ACCOUNTS:"blockchain/accounts/"},me={NONE:"",NFTS:"/nfts",ITEMS:"/items",JETTONS:"/jettons",METHODS:"/methods",EVENTS:"/events",TRANSACTIONS:"/transactions"};function xe(t,e,s,n){let r=zt+e+t+s;return n!==void 0&&(r+=n),jt(r,Bt).then(i=>i.json())}const Oe={init:async t=>{Bt.headers=new Headers({Authorization:"Bearer "+t.tonApiProps.clientSideKey,"Content-Type":"application/json",accept:"application/json"}),zt=t.tonApiProps.serverUrl,t.tonApiProps.limitPerSecond&&an(t.tonApiProps.limitPerSecond)},account:async t=>xe(t.toRawString(),ge.ACCOUNTS,me.NONE),accountNfts:async(t,e,s,n)=>e===void 0?xe(t.toRawString(),ge.ACCOUNTS,me.NFTS):xe(t.toRawString(),ge.ACCOUNTS,me.NFTS,"?indirect_ownership="+(e?"true":"false")+(s!==void 0?"&limit="+s:"")+(n!==void 0?"&offset="+n:"")),accountJettons:async t=>xe(t.toRawString(),ge.ACCOUNTS,me.JETTONS),method:async(t,e,s)=>xe(t.toString(),ge.BLOCKCHAIN_ACCOUNTS,me.METHODS,s!==void 0?"/"+e+"?args="+s:"/"+e),nftBulk:async t=>{const e={method:"post",body:JSON.stringify({account_ids:t}),headers:Bt.headers};return jt(zt+"nfts/_bulk",e).then(s=>s.json())},accountEvents:async(t,e,s,n)=>{let r;return typeof t=="string"?r=t:r=t.toRawString(),xe(r,ge.ACCOUNTS,me.EVENTS,"?limit="+(e!==void 0?e:"10")+(s!==void 0?"&start_date="+s:"")+(n!==void 0?"&end_date="+n:""))},accountTransactions:async(t,e,s,n)=>{let r;return typeof t=="string"?r=t:r=t.toRawString(),xe(r,ge.BLOCKCHAIN_ACCOUNTS,me.TRANSACTIONS,"?limit="+(e!==void 0?e:"10")+(s!==void 0?"&before_lt="+s:"")+(n!==void 0?"&after_lt="+n:""))},collection:async t=>xe(t.toRawString(),ge.COLLECTIONS,me.NONE),collectionNfts:async(t,e,s)=>e===void 0?xe(t.toRawString(),ge.COLLECTIONS,me.ITEMS):xe(t.toRawString(),ge.COLLECTIONS,me.ITEMS,"?limit="+e+(s!==void 0?"&offset="+s:""))};function $t(t){const e={},s=t.metadata.attributes;return s instanceof Array&&s.map(r=>e[r.trait_type]=r.value),{address:t.address,owner:t.owner.address,previewUrl:t.previews[2].url,name:t.metadata.name,collectionName:" ",collectionAddress:" ",description:t.metadata.description,attributes:e,tokenId:t.index,addressFriendly:T.Address.parse(t.address).toString()}}function ln(t,e,s,n){const r=[],i=[],a={};t.map(l=>{const c=l.collection;if(c!==void 0&&e.indexOf(c.address)>-1){const d=$t(l);d.collectionName=c.name,d.collectionAddress=c.address,s.indexOf(c.address)<0&&(a[c.name]=c.name),r.push(d);return}if(n.indexOf(l.address)>-1){const d=$t(l);r.push(d);return}});for(const l in a)i.push(l);return{nftItems:r,collectionNames:i}}function ho(t,e,s,n){return po(t,e,s,n).then(r=>{let i=r.nftItems,a=r.collectionNames;return{nftItems:i,collectionNames:a}})}async function po(t,e,s,n){let r=1e3,i=0,a=[];for(;r>0;){let l=await Oe.accountNfts(t,!1,r,i);const c=l.nft_items;c instanceof Array?(c.length<r&&(r=0),a.push(...c),i+=r):Promise.reject("[getListNft] Error: "+JSON.stringify(l))}return ln(a,e,s,n)}let Ft;const Vt={method:"get"};function Cs(t,e){let s="";if(e){let r=!0;for(const i in e)s+=r?"?":"&",s+=i+"="+e[i],r=!1}const n=Ft+"api/v3/"+t+s;return jt(n,Vt).then(r=>r.json()).catch(r=>{console.error({error:r},"[ToncenterApi] doRequest error, url: %s",n)})}const cn={init:async t=>{Vt.headers=new Headers({"X-Api-Key":t.tonCenterProps.clientSideKey,"Content-Type":"application/json",accept:"application/json"}),Ft=t.tonCenterProps.serverUrl,t.tonCenterProps.limitPerSecond&&an(t.tonCenterProps.limitPerSecond)},collectionNfts:async(t,e,s,n)=>{const r={collection_address:t};return n&&(r.owner_address=n),e&&(r.limit=e),s&&(r.offset=s),Cs("nft/items",r)},getNft:async t=>Cs("nft/items",{address:t}),accountStates:async t=>{const e="accountStates";let s="?include_boc=false";for(let r=0;r<t.length;r++){const i=t[r];s+="&address="+i}const n=Ft+"api/v3/"+e+s;return console.log("[ToncenterApi] doRequest: ",n),jt(n,Vt).then(r=>r.json()).catch(r=>{console.error({error:r},"[ToncenterApi] doRequest error, url: %s",n)})}},Ts={STATUS_NOT_INIT:0,STATUS_INIT:1,STATUS_ACTIVE:2,STATUS_INACTIVE:3,STATUS_AUCTION_STARTED:4};function go(t,e){const s=t.name.startsWith("USDT"),n=s?ue:Ae,r=s?Ce:je;let i=t.description.split("+");const a=+i[3]/n,l=+i[4],c=+i[5],d=+i[6],f=Math.floor(Date.now()/1e3);let p,u=f-d;s?u=(Math.floor(u/qe)+1)*qe:u<qe&&(u=qe);let g=a*u*l/qe/zr;g<r&&(g=r);const b=a+g,m=new Date((d+c)*1e3);let y=+i[2];if(y===Ts.STATUS_ACTIVE)m.getTime()<Date.now()?y=W.WAIT_START_BID:y=W.ACTIVE;else if(y===Ts.STATUS_AUCTION_STARTED){y=W.AUCTION_STARTED;const E=+i[7]/n,F=i[8],j=new Date(+i[9]*1e3);p={bid:E,bidder:F,finish:j,isMy:e==F},j.getTime()<Date.now()&&(y=W.AUCTION_FINISHED)}else y=W.ERROR;return{id:Number(t.tokenId),address:t.address,borrower:t.owner,pawnAddress:i[1],status:y,size:a,interest:l,duration:c,start:d,debt:b,end:m,auction:p,usdt:s}}async function dn(t,e,s){const n=[],r={},i=[],a=[];for(let d=0;d<t.length;d++){const f=t[d];a.push(f.address)}const l=await cn.accountStates(a),c={};for(let d=0;d<l.accounts.length;d++){const f=l.accounts[d];if(f.status==="active"){const p=f.address;c[p]=!0}}for(let d=0;d<t.length;d++){const f=t[d],p=f.address.toUpperCase();if(c[p]){const u=go(f,e);s?u.status<W.AUCTION_STARTED&&(n.push(u),r[u.pawnAddress]=u,i.push(u.pawnAddress)):(n.push(u),r[u.pawnAddress]=u,i.push(u.pawnAddress))}else console.warn("[processListCredit] sbt not active: ",f)}if(i.length>0){const f=(await Oe.nftBulk(i)).nft_items;f instanceof Array&&f.map(p=>{const u=$t(p);u.collectionName=p.collection.name,u.collectionAddress=p.collection.address;let g=r[u.addressFriendly];g&&(g.pawn=u)})}return console.log("[getListCredit] creditList: ",n),n}async function mo(t,e){const s=[];for(let r=0;r<t.length;r++){const i=t[r];let a=1e3,l=0;for(;a>0;){let c=await Oe.collectionNfts(T.Address.parse(i),a,l);const d=c.nft_items;d instanceof Array?(d.length<a&&(a=0),s.push(...d),l+=a):Promise.reject("[getListNft] Error: "+JSON.stringify(c))}}const n=ln(s,t,[],[]);return dn(n.nftItems,e)}let Se=null,lt=null,Nt=null;function xo(t){const e=t.allowedUsdtCollectionsProps!==void 0?t.allowedUsdtCollectionsProps:[],[s]=S.useState({address:null,account:null,usdtAccount:null,holder:null}),[n,r]=S.useState(!0),[i,a]=S.useState(null),[l,c]=S.useState(null),[d,f]=S.useState(null),[p,u]=S.useState([]),g=Gt(),b=T.Address.parse(t.bankAddress),m=t.usdtBankAddress?T.Address.parse(t.usdtBankAddress):null,y=t.usdtMaster?T.Address.parse(t.usdtMaster):null,L=t.holderCollections,E=t.creditCollectionAddress,F=[];for(let N=0;N<t.allowedCollectionsProps.length;N++){const V=t.allowedCollectionsProps[N];F.push(V.address)}const j=[];for(let N=0;N<e.length;N++){const V=e[N];j.push(V.address)}const U=[];for(let N=0;N<t.allowedCustomNftProps.length;N++){const V=t.allowedCustomNftProps[N];U.push(V.address)}const O=()=>(r(!0),new Promise((N,V)=>{Oe.method(b,"get_finance").then(D=>{if(D.success===!0){let h={balance:Number(D.stack[0].num),rate:Number(D.stack[1].num),credits:Number(D.stack[2].num)};console.log("[reloadBank] financeData: ",D),lt=h,N(h)}else V("[reloadBank] Error get_finance:: "+JSON.stringify(D))})})),k=()=>new Promise((N,V)=>{m===null?N(!0):Oe.method(m,"get_finance").then(D=>{if(D.success===!0){let h={balance:Number(D.stack[0].num),rate:Number(D.stack[1].num),credits:Number(D.stack[2].num)};console.log("[reloadUsdtBank] financeData: ",D),Nt=h,N(h)}else V("[reloadBank] Error get_finance:: "+JSON.stringify(D))})}),q=()=>Se===null?Promise.reject("[reloadAccount] myAddress is null"):Oe.accountJettons(Se).then(N=>{if(lt===null)return Promise.reject("[reloadAccount] bankFinance is null");const V=lt,D=Nt;console.log("[reloadAccount] data: ",N);let h=N.balances,x=null,C=null,A=null;if(h){for(let P=0;P<h.length;P++){const w=h[P],_=T.Address.parse(w.jetton.address);b.equals(_)?x=w:m&&m.equals(_)?C=w:y&&y.equals(_)&&(A=w)}if(A!==null&&(s.usdtWallet={address:T.Address.parse(A.wallet_address.address),balance:Number(A.balance),decimals:Math.pow(10,A.jetton.decimals)}),C!==null){const P=Math.pow(10,C.jetton.decimals),w={address:T.Address.parse(C.wallet_address.address),balance:Number(C.balance),decimals:P,rate:P};D&&(w.rate=D.rate),s.usdtAccount=w}else D!==null&&(s.usdtAccount={address:null,balance:0,decimals:Ae,rate:D.rate});if(x!==null){const P=Math.pow(10,x.jetton.decimals),w={address:T.Address.parse(x.wallet_address.address),balance:Number(x.balance),decimals:P,rate:V.rate};s.account=w}else s.account={address:null,balance:0,decimals:Ae,rate:V.rate};if(s.holder){let P=s.holder.fullLimit;P-=s.account.rate/s.account.decimals*s.account.balance/s.account.decimals,s.holder.limit=P,s.holder.limit<0&&(s.holder.limit=0)}return r(!1),!0}}),K=()=>{if(a(null),c(null),Se===null)return Promise.reject("[reloadNfts] MyAddress is null");let N=[...F,...j,...L,...E];return ho(Se,N,E,U).then(V=>{console.log("[reloadNfts] data: ",V),u(V.collectionNames);let D=[],h=[],x=0;const C=t.holderCollectionsProps,A=t.allowedCollectionsProps,P=e,w=t.allowedCustomNftProps;for(let _=0;_<V.nftItems.length;_++){const G=V.nftItems[_];let H=G.collectionAddress,te=L.indexOf(H);if(te>-1){let Q=C[te].limitAttributeName,Y=C[te].limitAttributes;if(Q){let pe=G.attributes[Q];if(pe){let Ie=Y[pe],Ne=Ie===void 0?Y.default:Ie;x+=Ne}}else x+=Y.default}const he=U.indexOf(G.address);he>-1&&D.push({props:w[he],nft:G});const B=F.indexOf(H);B>-1&&he===-1&&D.push({props:A[B],nft:G});const X=j.indexOf(H);X>-1&&he===-1&&D.push({props:P[X],nft:G}),E.indexOf(H)>-1&&h.push(G)}if(a(D),x>0){let _={limit:x,fullLimit:x};s.holder=_}if(h.length>0)return dn(h,"",!0).then(_=>{c(_)})})},I=()=>Se===null?Promise.reject("[reloadAuctions] myAddress is null"):s.holder===null?Promise.resolve(!1):mo(E,Se.toString()).then(N=>{f(N)});return S.useEffect(()=>{if(g===null){Se=null,s.address=null,s.account=null,s.holder=null,a(null),c(null);return}Se=T.Address.parse(g.account.address),s.address=Se,O().then(k).then(K).then(q).then(I)},[g,t]),{user:s,reloadAccount:q,accountLoading:n,bankFinance:lt,usdtBankFinance:Nt,nfts:i,credits:l,auctions:d,collectionNames:p,reloadNftsAndAuctions:()=>K().then(()=>I())}}function bo({activeState:t,errorState:e}){const{t:s}=ye();return o.jsxs(rt,{active:t,orientation:"vertical",children:[o.jsx(rt.Step,{label:s("Transaction"),description:s("Confirm the transaction in your wallet"),loading:t===1&&e!==1,completedIcon:e===1?o.jsx(es,{style:{width:z(20),height:z(20)}}):"",color:e===1?"red":""}),o.jsx(rt.Step,{label:s("Checking"),description:s("Checking the transaction progress. Please wait."),loading:t===2&&e!==2,completedIcon:e===2?o.jsx(es,{style:{width:z(20),height:z(20)}}):"",color:e===2?"red":""}),o.jsx(rt.Step,{label:s("Update"),description:s("Updating data from the blockchain."),loading:t===3})]})}function yo({activeState:t,errorState:e}){const[s,{open:n,close:r}]=ft(!1),{t:i}=ye();return S.useEffect(()=>{t>0?(console.log("[TransactionModal] open: ",t),n()):(console.log("[TransactionModal] close: ",t),r())},[t]),o.jsx(Rn,{opened:s,onClose:r,title:i("Conducting a transaction"),centered:!0,children:t>0&&o.jsx(bo,{activeState:t,errorState:e})})}const As=4,we=T.toNano("0.20"),ct=T.toNano("0.1"),un=T.toNano("0.03"),Os=(2n*un+we).toString(),Ns=(t,e,s)=>T.beginCell().storeUint(1607220500,32).storeUint(0,64).storeAddress(e).storeAddress(t).storeUint(0,1).storeCoins(we).storeBuilder(s.asBuilder()).endCell();function So(t){const[e]=Jt(),s=Gt(),[n,r]=S.useState("");return S.useEffect(()=>{r(s===null?"":s.account.address)},[s]),{sender:{depositAccount:async(i,a)=>{const l=T.beginCell().storeUint(65537,32).storeUint(1,64).storeCoins(T.toNano(i)).storeCoins(BigInt(a)).endCell(),c=T.toNano(i)+ct,d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:t.bankAddress,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(d)},withdrawAccount:async(i,a)=>{const l=T.beginCell().storeUint(1499400124,32).storeUint(1,64).storeCoins(BigInt(i)).storeAddress(T.Address.parse(n)).storeUint(0,1).endCell(),c={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:a,amount:ct.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(c)},createCredit:async(i,a,l)=>{const c=Ns(T.Address.parse(n),T.Address.parse(a),l),d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:Os,payload:c.toBoc().toString("base64")}]};return e.sendTransaction(d)},createCreditMass:async(i,a,l)=>{const c=[],d=i.length>As?As:i.length,f=T.Address.parse(n);for(let u=0;u<d;u++){const g=Ns(f,T.Address.parse(a[u]),l[u]);c.push({address:i[u],amount:Os,payload:g.toBoc().toString("base64")})}const p={validUntil:Math.floor(Date.now()/1e3)+360,messages:c};return e.sendTransaction(p)},renewalCredit:async(i,a)=>{const l=T.beginCell().storeUint(65541,32).storeUint(1,64).endCell();let c=T.toNano(a)+un;const d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(d)},redeemCredit:async(i,a)=>{const l=T.beginCell().storeUint(65540,32).storeUint(1,64).endCell();let c=T.toNano(a)+we;const d={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(d)},makeBid:async(i,a)=>{const l=T.toNano(a),c=T.beginCell().storeUint(65542,32).storeUint(1,64).storeCoins(l).endCell();let d=l+we;const f={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:d.toString(),payload:c.toBoc().toString("base64")}]};return e.sendTransaction(f)},takeLot:async i=>{const a=T.beginCell().storeUint(65543,32).storeUint(1,64).endCell(),l={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:we.toString(),payload:a.toBoc().toString("base64")}]};return e.sendTransaction(l)},depositUsdtAccount:async(i,a)=>{const l=T.Address.parse(n),c=T.beginCell().storeUint(196609,32).endCell(),d=T.beginCell().storeUint(260734629,32).storeUint(0,64).storeCoins(i).storeAddress(T.Address.parse(t.usdtBankAddress)).storeAddress(l).storeMaybeRef(null).storeCoins(ct/2n).storeBit(!0).storeRef(c).endCell(),f=ct,p={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:a.toString(),amount:f.toString(),payload:d.toBoc().toString("base64")}]};return e.sendTransaction(p)},redeemUsdtCredit:async(i,a,l)=>{const c=T.Address.parse(n),d=T.beginCell().storeUint(65540,32).storeUint(i,32).endCell(),f=a*ue,p=T.beginCell().storeUint(260734629,32).storeUint(0,64).storeCoins(f).storeAddress(T.Address.parse(t.usdtVerifier)).storeAddress(c).storeMaybeRef(null).storeCoins(we-T.toNano("0.02")).storeBit(!0).storeRef(d).endCell(),u={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:l.toString(),amount:we.toString(),payload:p.toBoc().toString("base64")}]};return e.sendTransaction(u)},takeUsdtPawn:async(i,a,l)=>{const c=T.Address.parse(n),d=T.beginCell().storeUint(65543,32).storeUint(i,32).endCell(),f=a*ue,p=T.beginCell().storeUint(260734629,32).storeUint(0,64).storeCoins(f).storeAddress(T.Address.parse(t.usdtVerifier)).storeAddress(c).storeMaybeRef(null).storeCoins(we-T.toNano("0.02")).storeBit(!0).storeRef(d).endCell(),u={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:l.toString(),amount:we.toString(),payload:p.toBoc().toString("base64")}]};return e.sendTransaction(u)},walletAddress:n}}}const Z={NONE:0,APPROVE:1,CHECK:2,RELOAD:3},Ht=[1e4,15e3,2e4,3e4];function fn(t,e,s,n,r,i){Oe.accountTransactions(r,5).then(a=>{console.log("--+ Tonapi.accountTransactions: ",a),console.log("--+ Tonapi.accountTransactions extHash: ",i);const l=a.transactions;let c=!0;if(l instanceof Array&&l.length>0)for(let d=0;d<l.length;d++){const f=l[d];if(f.in_msg.hash===i&&f.success===!0){c=!1,t("Ok");break}}if(c){const d=s+1;d>3?e("Max attempt"):setTimeout(()=>{fn(t,e,d,n,r,i)},Ht[d-1])}}).catch(a=>e(a))}function wo(t,e,s){const{sender:n}=So(t),[r,i]=S.useState(Z.NONE),[a,l]=S.useState(Z.NONE),[c,d]=S.useState(0),f=()=>{i(Z.NONE),l(Z.NONE)},p=(b,m)=>{i(Z.CHECK);const y=T.Cell.fromBase64(m).hash().toString("hex");return new Promise((L,E)=>{setTimeout(()=>{fn(L,E,1,c,b,y)},Ht[0])}).catch(L=>{console.warn("useSendTransaction STATE.CHECK sellNft: ",r,L),l(Z.CHECK)})},u=b=>(i(Z.RELOAD),new Promise((m,y)=>{setTimeout(()=>{b().then(m).catch(y)},Ht[3])}).catch(m=>{console.warn("useSendTransaction STATE.RELOAD doReload: ",r,m),l(Z.RELOAD)})),g=b=>{console.warn("useSendTransaction STATE.APPROVE catchApprove: ",r,b),l(Z.APPROVE)};return{tx:{depositAccount:async(b,m)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.depositAccount(b,m).then(y=>p(n.walletAddress,y.boc)).then(()=>u(e)).catch(g)),withdrawAccount:async(b,m)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.withdrawAccount(b,m).then(y=>p(n.walletAddress,y.boc)).then(()=>u(e)).catch(g)),createCredit:async(b,m,y)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.createCredit(b,m,y).then(L=>p(n.walletAddress,L.boc)).then(()=>u(s)).catch(g)),createCreditMass:async(b,m,y)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.createCreditMass(b,m,y).then(L=>p(n.walletAddress,L.boc)).then(()=>u(s)).catch(g)),redeemCredit:async(b,m)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.redeemCredit(b,m).then(y=>p(n.walletAddress,y.boc)).then(()=>u(s)).catch(g)),renewalCredit:async(b,m)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.renewalCredit(b,m).then(y=>p(n.walletAddress,y.boc)).then(()=>u(s)).catch(g)),makeBid:async(b,m)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.makeBid(b,m).then(y=>p(n.walletAddress,y.boc)).then(()=>u(s)).catch(g)),takeLot:async b=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.takeLot(b).then(m=>p(n.walletAddress,m.boc)).then(()=>u(s)).catch(g)),depositUsdtAccount:async(b,m)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.depositUsdtAccount(b,m).then(y=>p(n.walletAddress,y.boc)).then(()=>u(e)).catch(g)),redeemUsdtCredit:async(b,m,y)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.redeemUsdtCredit(b,m,y).then(L=>p(n.walletAddress,L.boc)).then(()=>u(s)).catch(g)),takeUsdtPawn:async(b,m,y)=>(i(Z.APPROVE),d(Math.floor(Date.now()/1e3)),n.takeUsdtPawn(b,m,y).then(L=>p(n.walletAddress,L.boc)).then(()=>u(s)).catch(g))},activeState:r,errorState:a,resetStates:f}}const vo=["Error","Not expired","Loan repaid","Waiting for the bid","Auction in progress","Auction is over"];function jo({auction:t,tx:e,resetStates:s,setCredit:n,setTransactionType:r,inputDrawerHandler:i,usdtWallet:a}){var c,d,f,p,u,g,b,m;const l=t.usdt===!0;return o.jsxs(ee,{withBorder:!0,children:[o.jsxs(ee.Section,{children:[o.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:(c=t.pawn)==null?void 0:c.collectionName}),o.jsx(v,{fw:500,ml:"2px",children:(d=t.pawn)==null?void 0:d.name}),o.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[o.jsx(ze,{variant:"filled",radius:"sm",src:(f=t.pawn)==null?void 0:f.previewUrl,size:"xl"}),o.jsxs($,{children:[t.status<W.AUCTION_STARTED&&o.jsxs(o.Fragment,{children:[o.jsx($.Col,{span:6,children:o.jsxs(v,{size:"xs",children:[" ",M("Loan"),": ",t.size," ",l?"USDT":"TON"]})}),o.jsx($.Col,{span:6,children:o.jsxs(v,{size:"xs",children:[" ",M("Date"),": ",t.end.toLocaleDateString("ru-RU")," "]})})]}),t.status===W.AUCTION_STARTED&&o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[" ",M("End"),": ",((p=t.auction)==null?void 0:p.finish.toLocaleDateString("ru-RU"))+" "+((u=t.auction)==null?void 0:u.finish.toLocaleTimeString("ru-RU"))," "]})}),o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[M("Status"),": ",l&&t.status===W.WAIT_START_BID?M("Waiting for ransom"):M(vo[t.status]),"."]})}),o.jsxs($.Col,{span:12,children:[!l&&t.status<W.AUCTION_STARTED&&o.jsxs(v,{size:"xs",children:[M("Start bid"),": "," ",o.jsx(se,{value:kt*t.size+t.size,decimalScale:3,suffix:l?" USDT":" TON"})]}),l&&t.status<W.AUCTION_STARTED&&o.jsxs(v,{size:"xs",children:[M("Redemption cost"),": "," ",o.jsx(se,{value:t.debt,decimalScale:3,suffix:l?" USDT":" TON"})]}),o.jsxs(fe,{children:[t.status===W.AUCTION_STARTED&&o.jsxs(v,{size:"xs",children:[M("Current bid"),": "," ",o.jsx(se,{value:(g=t.auction)==null?void 0:g.bid,decimalScale:3,suffix:l?" USDT":" TON"})]}),((b=t.auction)==null?void 0:b.isMy)&&o.jsxs(v,{c:"teal.4",size:"xs",children:[" ",M("My")," "]})]})]})]})]})]}),o.jsxs(ee.Section,{children:[!l&&t.status>W.CREDIT_CLOSED&&t.status<W.AUCTION_FINISHED&&o.jsx(ne,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{n(t),r(ve.MAKE_BET),i.open()},children:M("Make bid")}),!l&&t.status===W.AUCTION_FINISHED&&((m=t.auction)==null?void 0:m.isMy)&&o.jsx(ne,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{e.takeLot(t.address).then(y=>{console.log("tx.makeBid result: ",y),s()})},children:M("Take lot")}),l&&t.status>W.CREDIT_CLOSED&&t.status<W.AUCTION_FINISHED&&o.jsx(ne,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{a&&e.takeUsdtPawn(t.id,t.debt,a.address).then(y=>{console.log("tx.makeBid result: ",y),s()})},children:M("Buy out")})]})]},t.address)}function Co({auctions:t,tx:e,resetStates:s,setCredit:n,setTransactionType:r,inputDrawerHandler:i,usdtWallet:a}){const{t:l}=ye(),[c,d]=S.useState([]);S.useEffect(()=>{if(t===null)return;const p=[...t];p.sort(function(u,g){return u.end.getTime()-g.end.getTime()}),d(p)},[t]);const f=c.map(p=>o.jsx(jo,{auction:p,tx:e,resetStates:s,setCredit:n,setTransactionType:r,inputDrawerHandler:i,usdtWallet:a},p.address));return o.jsxs(He,{size:"xl",pl:"0",pr:"0",children:[o.jsx(pt,{my:"xs",label:l("Auctions"),labelPosition:"center"}),t?o.jsx($e,{cols:{base:1,md:2,lg:3},spacing:"md",children:f}):o.jsx(st,{className:St.loader})]})}const To=["Borrow","Make bid"];function Ao({offer:t,auction:e,transactionType:s,opened:n,handler:r,tx:i,resetStates:a,bankFinance:l,usdtBankFinance:c}){var U,O,k,q,K;const{t:d}=ye(),[f,p]=S.useState(1),[u,g]=S.useState(1),[b,m]=S.useState(0),[y,L]=S.useState(1),[E,F]=S.useState(.1),j=(t==null?void 0:t.props.usdt)===!0;return S.useEffect(()=>{if(s===ve.GET_CREDIT&&t!==null){const I=t.props.interest/100;let J=t.props.duration*Number(f)*I;j&&J<Ce?J=Ce:J<je&&(J=je),L(parseFloat(J.toFixed(3)));let N=Number(f)*I;j&&N<Ce?N=Ce:N<je&&(N=je),F(parseFloat(N.toFixed(2)))}},[f,t]),S.useEffect(()=>{if(s===ve.GET_CREDIT&&t!==null&&p(t.props.size),s===ve.MAKE_BET&&e!==null){let I=0;e.status===W.WAIT_START_BID&&(I=kt*e.size+e.size),e.status===W.AUCTION_STARTED&&(I=kt*e.size+e.auction.bid),I=Math.floor(I*1e3)/1e3,g(I),p(I)}},[s,t,e]),S.useEffect(()=>{if(t!=null&&t.props.usdt){if(c===null)return;let I=c.balance/ue;m(I)}else{if(l===null)return;let I=l.balance/Ae;m(I)}},[l,c,t]),o.jsxs(Ln,{opened:n,onClose:()=>{r.close()},position:"top",size:"md",overlayProps:{backgroundOpacity:.5,blur:4},transitionProps:{transition:"rotate-left",duration:150,timingFunction:"linear"},closeButtonProps:{icon:o.jsx(Un,{size:32,stroke:1.5})},title:d(To[s]),children:[o.jsx(In.InitialFocus,{}),t!==null&&l!==null&&s===ve.GET_CREDIT?o.jsxs(o.Fragment,{children:[o.jsxs(ee,{withBorder:!0,children:[o.jsxs(ee.Section,{children:[o.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:t.nft.collectionName}),o.jsx(v,{fw:500,ml:"2px",truncate:"end",children:t.nft.name}),o.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[o.jsx(ze,{variant:"filled",radius:"sm",src:t.nft.previewUrl,size:"xl"}),o.jsxs($,{children:[o.jsxs($.Col,{span:6,children:[o.jsxs(v,{size:"xs",children:[" ",d("Loan"),": ",t.props.size," ",j?"USDT":"TON"]}),o.jsxs(v,{size:"xs",children:[" ",d("Per day"),": ",t.props.interest," %"]})]}),o.jsxs($.Col,{span:6,children:[o.jsxs(v,{size:"xs",children:[" ",d("Term"),": ",t.props.duration," ",d("days")]}),o.jsxs(v,{size:"xs",children:[" ",d("Minimum"),": ",E," ",j?"USDT":"TON"]})]}),o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[d("For the entire period"),": ",y," ",j?"USDT":"TON"]})})]})]})]}),o.jsx(ee.Section,{})]},t.nft.address),o.jsx(Be,{label:d("Enter the loan amount")+(j?" USDT":" TON"),description:d("Maximum")+": "+t.props.size+(j?" USDT":" TON"),defaultValue:t.props.size,allowNegative:!1,value:f,onChange:p,allowedDecimalSeparators:[".",","],clampBehavior:"strict",min:1,max:t.props.size}),Number(f)<b?o.jsxs(ne,{variant:"filled",color:j?"teal":"blue",fullWidth:!0,mt:"xs",onClick:()=>{r.close(),Ws(t,Number(f)).then(I=>{i.createCredit(t.nft.address,t.props.verifier,I).then(J=>{console.log("tx.createCredit result: ",J),a()})})},children:[d("Get")," ",f," ",j?"USDT":"TON"]}):o.jsx(v,{c:"red.4",children:d("Not enough funds in the lending pool.")})]}):o.jsx(st,{className:St.loader}),e&&s===ve.MAKE_BET&&o.jsxs(o.Fragment,{children:[o.jsx(ee,{withBorder:!0,children:o.jsxs(ee.Section,{children:[o.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:(U=e.pawn)==null?void 0:U.collectionName}),o.jsx(v,{fw:500,ml:"2px",children:(O=e.pawn)==null?void 0:O.name}),o.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[o.jsx(ze,{variant:"filled",radius:"sm",src:(k=e.pawn)==null?void 0:k.previewUrl,size:"xl"}),o.jsxs($,{children:[e.status===W.WAIT_START_BID&&o.jsxs(o.Fragment,{children:[o.jsx($.Col,{span:6,children:o.jsxs(v,{size:"xs",children:[" ",d("Loan"),": ",e.size," TON"]})}),o.jsx($.Col,{span:6,children:o.jsxs(v,{size:"xs",children:[" ",d("Date"),": ",e.end.toLocaleDateString("ru-RU")," "]})})]}),e.status===W.AUCTION_STARTED&&o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[" ",d("End"),": ",((q=e.auction)==null?void 0:q.finish.toLocaleDateString("ru-RU"))+" "+((K=e.auction)==null?void 0:K.finish.toLocaleTimeString("ru-RU"))," "]})}),o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[d("Minimal bid"),": "," ",o.jsx(se,{value:u,decimalScale:3,suffix:" TON"})]})})]})]})]})},e.address),s===ve.MAKE_BET&&o.jsx(Be,{label:d("Enter the bid amount TON"),description:d("Minimum")+": "+u+" TON",defaultValue:u,allowNegative:!1,value:f,onChange:p,min:u,allowedDecimalSeparators:[".",","]}),e.status>W.CREDIT_CLOSED&&o.jsx(ne,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{r.close(),i.makeBid(e.address,Number(f)).then(I=>{console.log("tx.makeBid result: ",I),a()})},children:d("Make bid")})]})]})}const Oo=["Error","Not expired","Loan repaid","Waiting for the bid","Auction in progress","Auction is over"];function No({auction:t}){var s,n,r,i;const e=t.usdt===!0;return o.jsx(ee,{withBorder:!0,bg:t.status>=W.WAIT_START_BID?"red.1":void 0,children:o.jsxs(ee.Section,{children:[o.jsx(v,{fz:"xs",c:"dimmed",ml:"2px",children:(s=t.pawn)==null?void 0:s.collectionName}),o.jsx("a",{target:"_blank",href:"https://getgems.io/nft/"+((n=t.pawn)==null?void 0:n.addressFriendly),children:o.jsx(v,{fw:500,ml:"2px",children:(r=t.pawn)==null?void 0:r.name})}),o.jsxs(fe,{preventGrowOverflow:!1,wrap:"nowrap",children:[o.jsx(ze,{variant:"filled",radius:"sm",src:(i=t.pawn)==null?void 0:i.previewUrl,size:"xl"}),o.jsxs($,{children:[o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[M("Status"),": ",e&&t.status===W.WAIT_START_BID?M("Waiting for ransom"):M(Oo[t.status]),"."]})}),t.status<W.AUCTION_STARTED&&o.jsxs(o.Fragment,{children:[o.jsx($.Col,{span:6,children:o.jsxs(v,{size:"xs",children:[" ",M("Loan"),": ",t.size," ",e?"USDT":"TON"]})}),o.jsx($.Col,{span:6,children:o.jsxs(v,{size:"xs",children:[" ",M("Date"),": ",t.end.toLocaleDateString("ru-RU")," "]})}),o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[" ",M("Total debt"),": "," ",o.jsx(se,{value:t.debt,decimalScale:3,suffix:e?" USDT":" TON"})," "]})}),o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[" ",M("Renewal debt"),": "," ",o.jsx(se,{value:t.debt-t.size,decimalScale:3,suffix:e?" USDT":" TON"})," "]})})]}),o.jsx($.Col,{span:12,children:o.jsxs(v,{size:"xs",children:[M("Borrower"),": "," ",o.jsx("a",{target:"_blank",href:"https://tonviewer.com/"+t.borrower,children:Vr(T.Address.parse(t.borrower))})]})})]})]})]})},t.address)}function Po({auctions:t}){const{t:e}=ye(),[s,n]=S.useState([]);S.useEffect(()=>{if(t===null)return;const i=[...t];i.sort(function(a,l){return a.end.getTime()-l.end.getTime()}),n(i)},[t]);const r=s.map(i=>o.jsx(No,{auction:i},i.address));return o.jsxs(He,{size:"xl",pl:"0",pr:"0",children:[o.jsx(pt,{my:"xs",label:e("Credits"),labelPosition:"center"}),t?o.jsx($e,{cols:{base:1,md:2,lg:3},spacing:"md",children:r}):o.jsx(st,{className:St.loader})]})}function Eo({config:t}){var X,ce;const{user:e,reloadAccount:s,accountLoading:n,bankFinance:r,usdtBankFinance:i,nfts:a,credits:l,auctions:c,collectionNames:d,reloadNftsAndAuctions:f}=xo(t),{tx:p,activeState:u,errorState:g,resetStates:b}=wo(t,s,f),{colorScheme:m}=Ni(),[y,L]=Jt(),{setColorScheme:E}=Dn(),F=kn("light",{getInitialValueInEffect:!0}),j=()=>{E(F==="light"?"dark":"light")},[,U]=so(),{t:O,i18n:k}=ye();L({uiPreferences:{theme:m==="dark"?Lt.DARK:Lt.LIGHT}});const q=Gt(),[K,{toggle:I}]=ft(),[J,{toggle:N}]=ft(!0),[V,D]=ft(!1),[h,x]=S.useState(null),[C,A]=S.useState(null),[P,w]=S.useState(ve.GET_CREDIT),[_,G]=S.useState(!0),[H,te]=S.useState("en"),[he,B]=S.useState([]);return S.useEffect(()=>{k.changeLanguage(H);let Q="en";H==="ru"&&(Q="ru"),y.uiOptions={language:Q}},[H]),S.useEffect(()=>{const Q=t.allowedUsdtCollectionsProps!==void 0?[...t.allowedCollectionsProps,...t.allowedUsdtCollectionsProps]:t.allowedCollectionsProps;Q.forEach(Y=>{const pe=Y.usdt===!0,Ie=Y.interest/100;let Ne=Y.duration*Y.size*Ie;pe&&Ne<Ce?Ne=Ce:Ne<je&&(Ne=je),Y.overPayment=parseFloat(Ne.toFixed(3));let Ke=Y.size*Ie;pe&&Ke<Ce?Ke=Ce:Ke<je&&(Ke=je),Y.minimal=parseFloat(Ke.toFixed(3))}),B(Q)},[t]),S.useEffect(()=>{let Q=le.initDataUnsafe.start_param;if(Q){let pe="/"+Q.replace("_","/");U(pe)}let Y=le.initDataUnsafe.user;if(Y){let pe=Y.language_code;pe&&pe.substring(0,2)==="ru"&&te("ru")}},[le.initDataUnsafe]),S.useEffect(()=>{var Y;localStorage.getItem("ton-connect-ui_wallet-info")===null?(G(!1),le.MainButton.setText(O("Connect wallet")),le.MainButton.onClick(()=>y.openModal()),le.MainButton.show()):q!==null&&(G(!1),le.MainButton.hide()),console.log("[admin]: ",(Y=e.address)==null?void 0:Y.toString(),t.adminAddress)},[q]),o.jsxs(o.Fragment,{children:[o.jsxs(We,{header:{height:60},footer:{height:20},navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!K,desktop:!J}},padding:"xs",children:[o.jsx(We.Header,{children:o.jsxs(fe,{h:"100%",px:"md",className:Me.inner,children:[o.jsx(ts,{opened:K,onClick:I,hiddenFrom:"sm",size:"sm"}),o.jsx(ts,{opened:J,onClick:N,visibleFrom:"sm",size:"sm"}),o.jsx(v,{size:"xl",fw:700,variant:"gradient",gradient:t.appNameHeader,className:Me.txt,children:O("custom:appName")}),o.jsxs(Ze,{onClick:()=>j(),radius:"xl",variant:"outline",size:"xl","aria-label":"Toggle color scheme",children:[o.jsx(_n,{className:ss(Me.icon,Me.light),stroke:2}),o.jsx(Mn,{className:ss(Me.icon,Me.dark),stroke:2})]})]})}),o.jsxs(We.Navbar,{p:"md",children:[o.jsx(de,{label:O("Borrow"),leftSection:o.jsx(Bn,{size:"1rem",stroke:1.5}),component:_e,href:"/",onClick:I}),e.holder!==null&&o.jsxs(o.Fragment,{children:[o.jsx(de,{label:O("Deposit"),component:_e,leftSection:o.jsx(zn,{size:"1rem",stroke:1.5}),href:"/deposit",onClick:I}),o.jsx(de,{label:O("Auctions"),leftSection:o.jsx($n,{size:"1rem",stroke:1.5}),component:_e,href:"/auction",onClick:I}),e.address&&e.address.toRawString()===t.adminAddress&&o.jsx(de,{label:O("Admin"),leftSection:o.jsx(Fn,{size:"1rem",stroke:1.5}),component:_e,href:"/admin",onClick:I})]}),o.jsxs(de,{label:O("Info"),leftSection:o.jsx(Vn,{size:"1rem",stroke:1.5}),childrenOffset:28,children:[o.jsx(de,{label:O("About"),leftSection:o.jsx(Hn,{size:"1rem",stroke:1.5}),component:_e,href:"/about",onClick:I}),o.jsx(de,{label:O("Collections"),leftSection:o.jsx(Kn,{size:"1rem",stroke:1.5}),component:_e,href:"/collections",onClick:I})]}),o.jsxs(de,{label:"Language",childrenOffset:28,leftSection:o.jsx(Wn,{size:"1rem",stroke:1.5}),children:[o.jsx(de,{label:"English",onClick:()=>{I(),te("en")}}),o.jsx(de,{label:"Русский",onClick:()=>{I(),te("ru")}})]}),q?o.jsx(de,{label:O("Disconnect wallet"),leftSection:o.jsx(qn,{size:"1rem",stroke:1.5}),description:Ks((X=e.address)==null?void 0:X.toString()),onClick:()=>{I(),y.disconnect(),U("/")}}):o.jsx(de,{label:O("Connect Wallet"),leftSection:o.jsx(Jn,{size:"1rem",stroke:1.5}),onClick:()=>{I(),y.openModal()}})]}),o.jsxs(We.Main,{children:[t.isTestnet&&o.jsx(Gn,{fullWidth:!0,variant:"outline",color:"red",mb:"md",children:"TESTNET"}),o.jsxs(io,{children:[o.jsx(Re,{path:"/",children:_?o.jsx(Xn,{visible:_,zIndex:1e3,overlayProps:{radius:"sm",blur:10},loaderProps:{color:"blue",type:"bars"}}):o.jsx(o.Fragment,{children:q?o.jsx(mi,{nfts:a,credits:l,collectionNames:d,tx:p,isHolder:e.holder!==null||!t.onlyHolderRights.extend,allowed:he,reloadNfts:f,resetStates:b,setNft:x,setTransactionType:w,inputDrawerHandler:D,usdtWallet:e.usdtWallet,bankFinance:r,usdtBankFinance:i}):o.jsx(it,{data:t.heroPage})})}),o.jsx(Re,{path:"/deposit",children:q?o.jsx(Oi,{user:e,reloadAccount:s,accountLoading:n,tx:p,resetStates:b,bankFinance:r,usdtBankFinance:i}):o.jsx(it,{data:t.heroPage})}),o.jsx(Re,{path:"/auction",children:q?o.jsx(Co,{auctions:c,tx:p,resetStates:b,setCredit:A,setTransactionType:w,inputDrawerHandler:D,usdtWallet:e.usdtWallet}):o.jsx(it,{data:t.heroPage})}),o.jsx(Re,{path:"/admin",children:((ce=e.address)==null?void 0:ce.toRawString())===t.adminAddress?o.jsx(Po,{auctions:c}):o.jsx(it,{data:t.heroPage})}),o.jsx(Re,{path:"/about",children:o.jsx(Yn,{children:o.jsx("div",{dangerouslySetInnerHTML:{__html:O("custom:aboutHtml")}})})}),o.jsx(Re,{path:"/collections",children:o.jsx(Hs,{data:he})}),o.jsx(Re,{children:Q=>o.jsxs("center",{children:[o.jsx("b",{children:"404:"})," Sorry, this page ",o.jsxs("code",{children:['"/',Q["*"],'"']})," isn't ready yet!"]})})]}),o.jsx(yo,{activeState:u,errorState:g})]}),o.jsx(We.Footer,{p:2,children:o.jsx(v,{size:"xs",c:"dimmed",children:" © 2024-2026 Krediton "})})]}),o.jsx(Ao,{opened:V,handler:D,offer:h,auction:C,transactionType:P,tx:p,resetStates:b,bankFinance:r,usdtBankFinance:i})]})}const Ro="config-scroogers-mainnet.json";function Kt(t){"@babel/helpers - typeof";return Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(t)}function hn(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":Kt(XMLHttpRequest))==="object"}function Lo(t){return!!t&&typeof t.then=="function"}function Uo(t){return Lo(t)?t:Promise.resolve(t)}const oe=globalThis||void 0||self;var Wt={exports:{}},dt={exports:{}},Ps;function Io(){return Ps||(Ps=1,function(t,e){var s=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ye<"u"&&Ye,n=function(){function i(){this.fetch=!1,this.DOMException=s.DOMException}return i.prototype=s,new i}();(function(i){(function(a){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof l<"u"&&l,c={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function d(h){return h&&DataView.prototype.isPrototypeOf(h)}if(c.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(h){return h&&f.indexOf(Object.prototype.toString.call(h))>-1};function u(h){if(typeof h!="string"&&(h=String(h)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(h)||h==="")throw new TypeError('Invalid character in header field name: "'+h+'"');return h.toLowerCase()}function g(h){return typeof h!="string"&&(h=String(h)),h}function b(h){var x={next:function(){var C=h.shift();return{done:C===void 0,value:C}}};return c.iterable&&(x[Symbol.iterator]=function(){return x}),x}function m(h){this.map={},h instanceof m?h.forEach(function(x,C){this.append(C,x)},this):Array.isArray(h)?h.forEach(function(x){this.append(x[0],x[1])},this):h&&Object.getOwnPropertyNames(h).forEach(function(x){this.append(x,h[x])},this)}m.prototype.append=function(h,x){h=u(h),x=g(x);var C=this.map[h];this.map[h]=C?C+", "+x:x},m.prototype.delete=function(h){delete this.map[u(h)]},m.prototype.get=function(h){return h=u(h),this.has(h)?this.map[h]:null},m.prototype.has=function(h){return this.map.hasOwnProperty(u(h))},m.prototype.set=function(h,x){this.map[u(h)]=g(x)},m.prototype.forEach=function(h,x){for(var C in this.map)this.map.hasOwnProperty(C)&&h.call(x,this.map[C],C,this)},m.prototype.keys=function(){var h=[];return this.forEach(function(x,C){h.push(C)}),b(h)},m.prototype.values=function(){var h=[];return this.forEach(function(x){h.push(x)}),b(h)},m.prototype.entries=function(){var h=[];return this.forEach(function(x,C){h.push([C,x])}),b(h)},c.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function y(h){if(h.bodyUsed)return Promise.reject(new TypeError("Already read"));h.bodyUsed=!0}function L(h){return new Promise(function(x,C){h.onload=function(){x(h.result)},h.onerror=function(){C(h.error)}})}function E(h){var x=new FileReader,C=L(x);return x.readAsArrayBuffer(h),C}function F(h){var x=new FileReader,C=L(x);return x.readAsText(h),C}function j(h){for(var x=new Uint8Array(h),C=new Array(x.length),A=0;A<x.length;A++)C[A]=String.fromCharCode(x[A]);return C.join("")}function U(h){if(h.slice)return h.slice(0);var x=new Uint8Array(h.byteLength);return x.set(new Uint8Array(h)),x.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(h){this.bodyUsed=this.bodyUsed,this._bodyInit=h,h?typeof h=="string"?this._bodyText=h:c.blob&&Blob.prototype.isPrototypeOf(h)?this._bodyBlob=h:c.formData&&FormData.prototype.isPrototypeOf(h)?this._bodyFormData=h:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)?this._bodyText=h.toString():c.arrayBuffer&&c.blob&&d(h)?(this._bodyArrayBuffer=U(h.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(h)||p(h))?this._bodyArrayBuffer=U(h):this._bodyText=h=Object.prototype.toString.call(h):this._bodyText="",this.headers.get("content-type")||(typeof h=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(h)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var h=y(this);if(h)return h;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var h=y(this);return h||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(E)}),this.text=function(){var h=y(this);if(h)return h;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function q(h){var x=h.toUpperCase();return k.indexOf(x)>-1?x:h}function K(h,x){if(!(this instanceof K))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var C=x.body;if(h instanceof K){if(h.bodyUsed)throw new TypeError("Already read");this.url=h.url,this.credentials=h.credentials,x.headers||(this.headers=new m(h.headers)),this.method=h.method,this.mode=h.mode,this.signal=h.signal,!C&&h._bodyInit!=null&&(C=h._bodyInit,h.bodyUsed=!0)}else this.url=String(h);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new m(x.headers)),this.method=q(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&C)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(C),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var A=/([?&])_=[^&]*/;if(A.test(this.url))this.url=this.url.replace(A,"$1_="+new Date().getTime());else{var P=/\?/;this.url+=(P.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}K.prototype.clone=function(){return new K(this,{body:this._bodyInit})};function I(h){var x=new FormData;return h.trim().split("&").forEach(function(C){if(C){var A=C.split("="),P=A.shift().replace(/\+/g," "),w=A.join("=").replace(/\+/g," ");x.append(decodeURIComponent(P),decodeURIComponent(w))}}),x}function J(h){var x=new m,C=h.replace(/\r?\n[\t ]+/g," ");return C.split("\r").map(function(A){return A.indexOf(`
`)===0?A.substr(1,A.length):A}).forEach(function(A){var P=A.split(":"),w=P.shift().trim();if(w){var _=P.join(":").trim();x.append(w,_)}}),x}O.call(K.prototype);function N(h,x){if(!(this instanceof N))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new m(x.headers),this.url=x.url||"",this._initBody(h)}O.call(N.prototype),N.prototype.clone=function(){return new N(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},N.error=function(){var h=new N(null,{status:0,statusText:""});return h.type="error",h};var V=[301,302,303,307,308];N.redirect=function(h,x){if(V.indexOf(x)===-1)throw new RangeError("Invalid status code");return new N(null,{status:x,headers:{location:h}})},a.DOMException=l.DOMException;try{new a.DOMException}catch{a.DOMException=function(x,C){this.message=x,this.name=C;var A=Error(x);this.stack=A.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function D(h,x){return new Promise(function(C,A){var P=new K(h,x);if(P.signal&&P.signal.aborted)return A(new a.DOMException("Aborted","AbortError"));var w=new XMLHttpRequest;function _(){w.abort()}w.onload=function(){var H={status:w.status,statusText:w.statusText,headers:J(w.getAllResponseHeaders()||"")};H.url="responseURL"in w?w.responseURL:H.headers.get("X-Request-URL");var te="response"in w?w.response:w.responseText;setTimeout(function(){C(new N(te,H))},0)},w.onerror=function(){setTimeout(function(){A(new TypeError("Network request failed"))},0)},w.ontimeout=function(){setTimeout(function(){A(new TypeError("Network request failed"))},0)},w.onabort=function(){setTimeout(function(){A(new a.DOMException("Aborted","AbortError"))},0)};function G(H){try{return H===""&&l.location.href?l.location.href:H}catch{return H}}w.open(P.method,G(P.url),!0),P.credentials==="include"?w.withCredentials=!0:P.credentials==="omit"&&(w.withCredentials=!1),"responseType"in w&&(c.blob?w.responseType="blob":c.arrayBuffer&&P.headers.get("Content-Type")&&P.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(w.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof m)?Object.getOwnPropertyNames(x.headers).forEach(function(H){w.setRequestHeader(H,g(x.headers[H]))}):P.headers.forEach(function(H,te){w.setRequestHeader(te,H)}),P.signal&&(P.signal.addEventListener("abort",_),w.onreadystatechange=function(){w.readyState===4&&P.signal.removeEventListener("abort",_)}),w.send(typeof P._bodyInit>"u"?null:P._bodyInit)})}return D.polyfill=!0,l.fetch||(l.fetch=D,l.Headers=m,l.Request=K,l.Response=N),a.Headers=m,a.Request=K,a.Response=N,a.fetch=D,a})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=s.fetch?s:n;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,t.exports=e}(dt,dt.exports)),dt.exports}(function(t,e){var s;if(typeof fetch=="function"&&(typeof Ye<"u"&&Ye.fetch?s=Ye.fetch:typeof window<"u"&&window.fetch?s=window.fetch:s=fetch),typeof or<"u"&&typeof window>"u"){var n=s||Io();n.default&&(n=n.default),e.default=n,t.exports=e.default}})(Wt,Wt.exports);var pn=Wt.exports;const gn=Qn(pn),Es=ar({__proto__:null,default:gn},[pn]);function Rs(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,n)}return s}function Ls(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Rs(Object(s),!0).forEach(function(n){Do(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Rs(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Do(t,e,s){return(e=ko(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function ko(t){var e=_o(t,"string");return Ue(e)=="symbol"?e:e+""}function _o(t,e){if(Ue(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e||"default");if(Ue(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ue(t){"@babel/helpers - typeof";return Ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(t)}var Te;typeof fetch=="function"&&(typeof oe<"u"&&oe.fetch?Te=oe.fetch:typeof window<"u"&&window.fetch?Te=window.fetch:Te=fetch);var tt;hn()&&(typeof oe<"u"&&oe.XMLHttpRequest?tt=oe.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(tt=window.XMLHttpRequest));var yt;typeof ActiveXObject=="function"&&(typeof oe<"u"&&oe.ActiveXObject?yt=oe.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(yt=window.ActiveXObject));!Te&&Es&&!tt&&!yt&&(Te=gn||Es);typeof Te!="function"&&(Te=void 0);var qt=function(e,s){if(s&&Ue(s)==="object"){var n="";for(var r in s)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(s[r]);if(!n)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+n.slice(1)}return e},Us=function(e,s,n,r){var i=function(c){if(!c.ok)return n(c.statusText||"Error",{status:c.status});c.text().then(function(d){n(null,{status:c.status,data:d})}).catch(n)};if(r){var a=r(e,s);if(a instanceof Promise){a.then(i).catch(n);return}}typeof fetch=="function"?fetch(e,s).then(i).catch(n):Te(e,s).then(i).catch(n)},Is=!1,Mo=function(e,s,n,r){e.queryStringParams&&(s=qt(s,e.queryStringParams));var i=Ls({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof oe<"u"&&typeof oe.process<"u"&&oe.process.versions&&oe.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(oe.process.version,"; ").concat(oe.process.platform," ").concat(oe.process.arch,")")),n&&(i["Content-Type"]="application/json");var a=typeof e.requestOptions=="function"?e.requestOptions(n):e.requestOptions,l=Ls({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:i},Is?{}:a),c=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{Us(s,l,r,c)}catch(d){if(!a||Object.keys(a).length===0||!d.message||d.message.indexOf("not implemented")<0)return r(d);try{Object.keys(a).forEach(function(f){delete l[f]}),Us(s,l,r,c),Is=!0}catch(f){r(f)}}},Bo=function(e,s,n,r){n&&Ue(n)==="object"&&(n=qt("",n).slice(1)),e.queryStringParams&&(s=qt(s,e.queryStringParams));try{var i;tt?i=new tt:i=new yt("MSXML2.XMLHTTP.3.0"),i.open(n?"POST":"GET",s,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var a=e.customHeaders;if(a=typeof a=="function"?a():a,a)for(var l in a)i.setRequestHeader(l,a[l]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(c){console&&console.log(c)}},zo=function(e,s,n,r){if(typeof n=="function"&&(r=n,n=void 0),r=r||function(){},Te&&s.indexOf("file:")!==0)return Mo(e,s,n,r);if(hn()||typeof ActiveXObject=="function")return Bo(e,s,n,r);r(new Error("No fetch and no xhr implementation found!"))};function Ve(t){"@babel/helpers - typeof";return Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(t)}function Ds(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),s.push.apply(s,n)}return s}function Pt(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ds(Object(s),!0).forEach(function(n){mn(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ds(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function $o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ks(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xn(n.key),n)}}function Fo(t,e,s){return e&&ks(t.prototype,e),s&&ks(t,s),Object.defineProperty(t,"prototype",{writable:!1}),t}function mn(t,e,s){return(e=xn(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function xn(t){var e=Vo(t,"string");return Ve(e)=="symbol"?e:e+""}function Vo(t,e){if(Ve(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e||"default");if(Ve(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ho=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(s){return JSON.parse(s)},stringify:JSON.stringify,parsePayload:function(s,n,r){return mn({},n,r||"")},parseLoadPayload:function(s,n){},request:zo,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},bn=function(){function t(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};$o(this,t),this.services=e,this.options=s,this.allOptions=n,this.type="backend",this.init(e,s,n)}return Fo(t,[{key:"init",value:function(s){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=s,this.options=Pt(Pt(Pt({},Ho()),this.options||{}),r),this.allOptions=i,this.services&&this.options.reloadInterval){var a=setInterval(function(){return n.reload()},this.options.reloadInterval);Ve(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(s,n,r){this._readAny(s,s,n,n,r)}},{key:"read",value:function(s,n,r){this._readAny([s],s,[n],n,r)}},{key:"_readAny",value:function(s,n,r,i,a){var l=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(s,r)),c=Uo(c),c.then(function(d){if(!d)return a(null,{});var f=l.services.interpolator.interpolate(d,{lng:s.join("+"),ns:r.join("+")});l.loadUrl(f,a,n,i)})}},{key:"loadUrl",value:function(s,n,r,i){var a=this,l=typeof r=="string"?[r]:r,c=typeof i=="string"?[i]:i,d=this.options.parseLoadPayload(l,c);this.options.request(this.options,s,d,function(f,p){if(p&&(p.status>=500&&p.status<600||!p.status))return n("failed loading "+s+"; status code: "+p.status,!0);if(p&&p.status>=400&&p.status<500)return n("failed loading "+s+"; status code: "+p.status,!1);if(!p&&f&&f.message){var u=f.message.toLowerCase(),g=["failed","fetch","network","load"].find(function(y){return u.indexOf(y)>-1});if(g)return n("failed loading "+s+": "+f.message,!0)}if(f)return n(f,!1);var b,m;try{typeof p.data=="string"?b=a.options.parse(p.data,r,i):b=p.data}catch{m="failed parsing "+s+" to json"}if(m)return n(m,!1);n(null,b)})}},{key:"create",value:function(s,n,r,i,a){var l=this;if(this.options.addPath){typeof s=="string"&&(s=[s]);var c=this.options.parsePayload(n,r,i),d=0,f=[],p=[];s.forEach(function(u){var g=l.options.addPath;typeof l.options.addPath=="function"&&(g=l.options.addPath(u,n));var b=l.services.interpolator.interpolate(g,{lng:u,ns:n});l.options.request(l.options,b,c,function(m,y){d+=1,f.push(m),p.push(y),d===s.length&&typeof a=="function"&&a(f,p)})})}}},{key:"reload",value:function(){var s=this,n=this.services,r=n.backendConnector,i=n.languageUtils,a=n.logger,l=r.language;if(!(l&&l.toLowerCase()==="cimode")){var c=[],d=function(p){var u=i.toResolveHierarchy(p);u.forEach(function(g){c.indexOf(g)<0&&c.push(g)})};d(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(f){return d(f)}),c.forEach(function(f){s.allOptions.ns.forEach(function(p){r.read(f,p,"read",null,null,function(u,g){u&&a.warn("loading namespace ".concat(p," for language ").concat(f," failed"),u),!u&&g&&a.log("loaded namespace ".concat(p," for language ").concat(f),g),r.loaded("".concat(f,"|").concat(p),u,g)})})})}}}])}();bn.type="backend";re.use(bn).use(Or).init({load:"languageOnly",lng:"en",interpolation:{escapeValue:!1}});const _s={xxs:z("200px"),xs:z("300px"),sm:z("400px"),md:z("500px"),lg:z("600px"),xl:z("1400px"),xxl:z("1600px")},Ko=Zn({fontSizes:{xs:z("12px"),sm:z("14px"),md:z("16px"),lg:z("18px"),xl:z("20px"),"2xl":z("24px"),"3xl":z("30px"),"4xl":z("36px"),"5xl":z("48px")},spacing:{"3xs":z("4px"),"2xs":z("8px"),xs:z("10px"),sm:z("12px"),md:z("16px"),lg:z("20px"),xl:z("24px"),"2xl":z("28px"),"3xl":z("32px")},primaryColor:"gray",components:{Container:He.extend({vars:(t,{size:e,fluid:s})=>({root:{"--container-size":s?"100%":e!==void 0&&e in _s?_s[e]:z(e)}})}),Paper:zs.extend({defaultProps:{p:"md",shadow:"xl",radius:"md",withBorder:!0}}),Card:ee.extend({defaultProps:{p:"xl",shadow:"xl",radius:"var(--mantine-radius-default)",withBorder:!0}}),Select:er.extend({defaultProps:{checkIconPosition:"right"}})},other:{style:"mantine"}});fetch(Ro).then(t=>t.json()).then(t=>{le.ready(),le.expand(),Oe.init(t),cn.init(t),re.addResourceBundle("en","custom",t.translates.en),re.addResourceBundle("ru","custom",t.translates.ru),t.telegramAnalyticsProps&&le.initDataUnsafe.user!==void 0&&nr.init({token:t.telegramAnalyticsProps.token,appName:t.telegramAnalyticsProps.appName}),Ut.createRoot(document.getElementById("root")).render(o.jsx(tr.StrictMode,{children:o.jsx(sr,{defaultColorScheme:"auto",theme:Ko,children:o.jsx(rr,{manifestUrl:t.tonConnectProps.manifestUrl,uiPreferences:{theme:Lt.DARK},actionsConfiguration:{twaReturnUrl:t.tonConnectProps.twaReturnUrl},children:o.jsx(Eo,{config:t})})})}))}).catch(t=>console.error("Error loading config:",t));
