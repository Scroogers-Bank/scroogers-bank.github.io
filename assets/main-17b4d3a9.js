var Js=Object.defineProperty;var Gs=(s,e,t)=>e in s?Js(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Lt=(s,e,t)=>(Gs(s,typeof e!="symbol"?e+"":e,t),t);import{b as Xs,r as y,j as a,L as Rt,C as tt,T as ys,d as T,e as xs,I as Ys,G as ee,B as X,f as Qs,h as K,i as Ve,A as Oe,S as ke,u as Zs,k as he,l as F,m as en,P as it,n as We,o as tn,N as ge,q as sn,D as ft,s as nn,t as rn,v as ws,w as st,x as on,y as Ce,z as ue,E as Je,F as an,H as Fe,J as It,K as Ke,M as ln,O as cn,Q as un,U as dn,V as fn,W as hn,X as Ae,Y as _t,Z as pn,_ as kt,$ as gn,a0 as Z,a1 as mn,a2 as bn,a3 as yn,a4 as xn,a5 as wn,a6 as Sn,a7 as vn,a8 as Cn,a9 as jn,aa as On,ab as Tn,ac as Nn,c as Re,a as An,R as En,ad as Pn}from"./ui-00e6e22b.js";import{_ as Y,u as Tt,a as Nt,T as ht,b as Ln}from"./ton_tg-ae801fb3.js";import{r as Rn,d as k,c as In}from"./ton_core-825c9b20.js";function _n(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var pt={},Dt=Xs;pt.createRoot=Dt.createRoot,pt.hydrateRoot=Dt.hydrateRoot;const kn="_inner_hgqr3_1",Dn="_content_hgqr3_12",Un="_title_hgqr3_22",Mn="_control_hgqr3_36",Bn="_image_hgqr3_42",Fn="_highlight_hgqr3_51",pe={inner:kn,content:Dn,title:Un,control:Mn,image:Bn,highlight:Fn};function $n(){const[s,e]=y.useState(!1);return y.useEffect(()=>{Y.initDataUnsafe.user!==void 0&&e(!0)},[]),{webApp:Y,isWebApp:s}}function zn(){if(console&&console.warn){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];me(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const Ut={};function gt(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];me(e[0])&&Ut[e[0]]||(me(e[0])&&(Ut[e[0]]=new Date),zn(...e))}const Ss=(s,e)=>()=>{if(s.isInitialized)e();else{const t=()=>{setTimeout(()=>{s.off("initialized",t)},0),e()};s.on("initialized",t)}},Mt=(s,e,t)=>{s.loadNamespaces(e,Ss(s,t))},Bt=(s,e,t,n)=>{me(t)&&(t=[t]),t.forEach(r=>{s.options.ns.indexOf(r)<0&&s.options.ns.push(r)}),s.loadLanguages(e,Ss(s,n))},Hn=function(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=e.languages[0],r=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=e.services.backendConnector.state[`${l}|${c}`];return u===-1||u===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,s)?!1:!!(e.hasResourceBundle(n,s)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(n,s)&&(!r||o(i,s)))},Vn=function(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(gt("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(s,{lng:t.lng,precheck:(r,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,s))return!1}}):Hn(s,e,t)},me=s=>typeof s=="string",Kn=s=>typeof s=="object"&&s!==null,qn=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Wn={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Jn=s=>Wn[s],Gn=s=>s.replace(qn,Jn);let mt={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Gn};const Xn=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mt={...mt,...s}},Yn=()=>mt;let vs;const Qn=s=>{vs=s},Zn=()=>vs,er={type:"3rdParty",init(s){Xn(s.options.react),Qn(s)}},tr=y.createContext();class sr{constructor(){Lt(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}}const nr=(s,e)=>{const t=y.useRef();return y.useEffect(()=>{t.current=e?t.current:s},[s,e]),t.current},Cs=(s,e,t,n)=>s.getFixedT(e,t,n),rr=(s,e,t,n)=>y.useCallback(Cs(s,e,t,n),[s,e,t,n]),ce=function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:n,defaultNS:r}=y.useContext(tr)||{},i=t||n||Zn();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new sr),!i){gt("You will need to pass in an i18next instance by using initReactI18next");const C=(j,A)=>me(A)?A:Kn(A)&&me(A.defaultValue)?A.defaultValue:Array.isArray(j)?j[j.length-1]:j,S=[C,{},!1];return S.t=C,S.i18n={},S.ready=!1,S}i.options.react&&i.options.react.wait!==void 0&&gt("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Yn(),...i.options.react,...e},{useSuspense:l,keyPrefix:c}=o;let u=s||r||i.options&&i.options.defaultNS;u=me(u)?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const f=(i.isInitialized||i.initializedStoreOnce)&&u.every(C=>Vn(C,i,o)),p=rr(i,e.lng||null,o.nsMode==="fallback"?u:u[0],c),h=()=>p,g=()=>Cs(i,e.lng||null,o.nsMode==="fallback"?u:u[0],c),[x,b]=y.useState(h);let w=u.join();e.lng&&(w=`${e.lng}${w}`);const N=nr(w),P=y.useRef(!0);y.useEffect(()=>{const{bindI18n:C,bindI18nStore:S}=o;P.current=!0,!f&&!l&&(e.lng?Bt(i,e.lng,u,()=>{P.current&&b(g)}):Mt(i,u,()=>{P.current&&b(g)})),f&&N&&N!==w&&P.current&&b(g);const j=()=>{P.current&&b(g)};return C&&i&&i.on(C,j),S&&i&&i.store.on(S,j),()=>{P.current=!1,C&&i&&C.split(" ").forEach(A=>i.off(A,j)),S&&i&&S.split(" ").forEach(A=>i.store.off(A,j))}},[i,w]),y.useEffect(()=>{P.current&&f&&b(h)},[i,c,f]);const M=[x,i,f];if(M.t=x,M.i18n=i,M.ready=f,f||!f&&!l)return M;throw new Promise(C=>{e.lng?Bt(i,e.lng,u,()=>C()):Mt(i,u,()=>C())})};function ot({data:s}){const[e]=Tt(),{isWebApp:t}=$n(),{t:n}=ce(),r=[];for(let i=0;i<s.itemsCount;i++)r.push(a.jsxs(Rt.Item,{children:[a.jsx("b",{children:n(`custom:heroPage.items.${i}.main`)})," – ",n(`custom:heroPage.items.${i}.desc`)]},i));return a.jsx(tt,{size:"md",children:a.jsxs("div",{className:pe.inner,children:[a.jsxs("div",{className:pe.content,children:[a.jsxs(ys,{className:pe.title,children:[n("custom:heroPage.title.first")," ",a.jsx("span",{className:pe.highlight,children:n("custom:heroPage.title.second")})," ",n("custom:heroPage.title.third")]}),a.jsx(T,{c:"dimmed",mt:"md",children:n("heroPage.description",{ns:"custom"})}),a.jsx(Rt,{mt:30,spacing:"sm",size:"sm",icon:a.jsx(xs,{size:20,radius:"xl",children:a.jsx(Ys,{size:12,stroke:1.5})}),children:r}),!t&&a.jsx(ee,{className:pe.controls,children:a.jsx(X,{mt:30,radius:"xl",size:"md",className:pe.control,onClick:()=>e.openModal(),children:n("Connect Wallet")})})]}),a.jsx(Qs,{src:s.image,className:pe.image})]})})}const ir="_card_1ag5c_1",or="_imageSection_1ag5c_6",ar="_label_1ag5c_14",lr="_section_1ag5c_23",cr="_buttonSection_1ag5c_28",ur="_inputWrapper_1ag5c_34",dr="_loader_1ag5c_39",je={card:ir,imageSection:or,label:ar,section:lr,buttonSection:cr,inputWrapper:ur,loader:dr},V={ERROR:0,ACTIVE:1,CREDIT_CLOSED:2,WAIT_START_BID:3,AUCTION_STARTED:4,AUCTION_FINISHED:5},fe={GET_CREDIT:0,MAKE_BET:1};function js({data:s}){const{t:e}=ce(),t=[];for(let n=0;n<s.length;n++){const r=s[n];t.push(a.jsxs(K,{withBorder:!0,children:[a.jsxs(K.Section,{p:"xs",children:[a.jsx(Ve,{children:a.jsx(Oe,{variant:"filled",radius:"xl",src:r.logo,size:"xl"})}),a.jsx(Ve,{children:a.jsx(T,{fw:500,ml:"2px",truncate:"end",children:r.name})})]}),a.jsxs(T,{size:"xs",children:[" ",e("Loan"),": ",r.size," TON"]}),a.jsxs(T,{size:"xs",children:[" ",e("Per day"),": ",r.interest," %"]}),a.jsxs(T,{size:"xs",children:[" ",e("Term"),": ",r.duration," ",e("days")]})]},n))}return a.jsxs(tt,{size:"md",p:"xs",m:"xs",children:[a.jsx(Ve,{children:a.jsx(ys,{order:3,children:e("Available collections")})}),a.jsx(ke,{cols:{base:2,md:3,lg:4},spacing:"xs",mt:"md",children:t})]})}var fr=Rn();const at=86400,hr=1e4,Ge=1e9,Ft=.1,bt=.05,pr=["0:0e41dc1dc3c9067ed24248580e12b3359818d83dee0304fabcf80845eafafdb2","0:80d78a35f955a14b679faa887ff4cd5bfc0f43b4a4eea2a7e6927f3701b273c2","0:46fa0e9a864014196a5e7d66f1f83ffdb10f2859bbf2ea9baeabbf14d9ce0d50","0:fd8a466aeb13e02a3ce67411b41b44bcd11bd42636f0807acf6570ca73fc2c13","0:ab180f6c942a24b200fe3724438ed1f248a3744ecf24ea176e78991491965d0f","0:13b9419dbeb8cbbd3584e69a5514e542a94d9d9422d49ca4ecbb49f52589bd95","0:388b9f22b92f4351846d519f7bb19a399a791b898501a565d039eddd11409c3f","0:fa987f5bc1b9fa4b733fb424563afa80216f0cdf8911c1b234d678862d13de0c","0:02710a51d9f99d784356744d98190587571493c80f19ab8fe4eeb93f21ac4245","0:c9b0df4e24184a199a16656b64129ce409f22ed7a67d5334d66d88de2e9b8775","0:30cee6dea09c27aa6981b933e99d44aead1cd63c1f0447371fcf1e7967662313","0:70dad3b951a27873f617b7723ccb9283d24dfbb2d699c5e755d8ee479abca22b","0:d3ae8fa88096d2ee8f8e043e9bb76372b0fb7b4a71a6e737ee457181d6713fad","0:9e7eb8e1083dbfec7448af6966c2df596aa786fed76c781bc00c2ebaf37de405","0:ee9b2ddb9d96335786d258c492664997ab1e745ee1f977d4655ffc848b614d96","0:d0e838d169b4d8480c5fdb1ad9b27b17b6a7089b56e3f5d179c7f87c94d8d63e","0:7a02d04f3ae4ed42697ca1203b5fc66a27942670e618aa8cfddac4185c6510af","0:b200c91be9b37236528f1f4b496ee6e4d55563012ab2abdb19c2427c01bc4c93","0:5a38bf261f9632c245e3929b3ae57d4e2cf347ee99ece1871f2e6695a456a834","0:2d154f46ac67e2c78506f433a2bcde7c431be004951a019fe97590590a66e12a","0:1a4c847ba09ca8c038ae9982d5374a1eeb590613723a10f127ed68073c6b9601","0:3c0c25b2096cb2c2038a60e45ead1a1255ebd6ad443f16329080d8a1c58d76db","0:78c77b13d4355d383cdacb71fee1524874ea284b9fa44e0c8a7183195a880f3a"],gr=function(s,e,t){if(s.length<=e)return s;t=t||"...";var n=t.length,r=e-n,i=Math.ceil(r/2),o=Math.floor(r/2);return s.substring(0,i)+t+s.substring(s.length-o)},mr=function(s){return s?gr(s,18,"..."):""},Os=async function(s,e){var n;if(((n=s.allowed)==null?void 0:n.custom)===!0)return k.beginCell().storeCoins(k.toNano(e)).endCell();const t=pr.indexOf(s.collectionAddress);if(t>-1){let r;t<2?r=s.name.slice(1).replace(/ /g,""):r=s.name.replace(/#/g,"-").replace(/[ ’]/g,"").toLowerCase(),console.log("[getForwardPayload] teleitem name: ",r);const o=(await fr.sha256(r)).toString("hex"),l=BigInt(`0x${o}`),c=k.beginCell().storeUint(l,256).endCell();return k.beginCell().storeCoins(k.toNano(e)).storeRef(c).endCell()}else return k.beginCell().storeUint(BigInt(s.tokenId),64).storeCoins(k.toNano(e)).endCell()},br=async function(s){var r,i;const e=[],t=[],n=[];for(let o=0;o<s.length;o++){const l=s[o];e.push(l.address),t.push((r=l.allowed)==null?void 0:r.verifier),n.push(await Os(l,(i=l.allowed)==null?void 0:i.size))}return{nftAddresses:e,vItemAddresses:t,forwardPayloads:n}},$t=4;function yr({nfts:s,credits:e,collectionNames:t,tx:n,isHolder:r,allowed:i,reloadNfts:o,resetStates:l,setNft:c,setTransactionType:u,inputDrawerHandler:f}){const{t:p}=ce(),[h,g]=y.useState(""),[x,b]=y.useState([]),[w,N]=y.useState(""),[P,M]=y.useState(null),[C,S]=y.useState([]),[j,A]=y.useState([]),[D,_]=y.useState(0);y.useEffect(()=>{let d=0;j.forEach(m=>{var v;return d+=(v=m.allowed)==null?void 0:v.size}),_(d)},[j]);const B=Zs({onDropdownClose:()=>{B.resetSelectedOption(),B.focusTarget(),N("")},onDropdownOpen:()=>{B.focusSearchInput()}}),R=t.filter(d=>d.toLowerCase().includes(w.toLowerCase().trim())).map(d=>a.jsx(he.Option,{value:d,children:d},d));y.useEffect(()=>{s!==null&&A([])},[s]),y.useEffect(()=>{if(s!==null)if(P===null)S(s);else{const d=s.filter(m=>m.collectionName?m.collectionName===P:!1);S(d)}},[P,s]),y.useEffect(()=>{if(k.Address.isFriendly(h)){const d=C.filter(m=>{const v=k.Address.parse(m.address).toString();return h===v});b(d)}else{const d=C.filter(m=>m.name?m.name.toLowerCase().includes(h.toLowerCase()):!1);b(d)}},[h,C]);const U=d=>{g(d.target.value)};y.useEffect(()=>{g(""),M(null),s!==null&&b(s)},[s]);const z=x.map(d=>{var m,v,O,I,L,J;return a.jsxs(K,{withBorder:!0,children:[a.jsxs(K.Section,{children:[a.jsxs(F,{children:[a.jsxs(F.Col,{span:10,children:[a.jsx(T,{fz:"xs",c:"dimmed",ml:"2px",children:d.collectionName}),a.jsx(T,{fw:500,ml:"2px",truncate:"end",children:d.name})]}),a.jsx(F.Col,{span:2,children:a.jsx(en,{m:"xs",color:"teal",radius:"md",size:"md",checked:j.includes(d),disabled:!j.includes(d)&&j.length>$t-1,onClick:()=>{j.includes(d)?A(j.filter(Q=>Q!==d)):j.length<$t&&A([...j,d])},readOnly:!0})})]}),a.jsxs(ee,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Oe,{variant:"filled",radius:"sm",src:d.previewUrl,size:"xl"}),a.jsxs(F,{children:[a.jsxs(F.Col,{span:6,children:[a.jsxs(T,{size:"xs",children:[" ",p("Loan"),": ",(m=d.allowed)==null?void 0:m.size," TON"]}),a.jsxs(T,{size:"xs",children:[" ",p("Per day"),": ",(v=d.allowed)==null?void 0:v.interest," %"]})]}),a.jsxs(F.Col,{span:6,children:[a.jsxs(T,{size:"xs",children:[" ",p("Term"),": ",(O=d.allowed)==null?void 0:O.duration," ",p("days")]}),a.jsxs(T,{size:"xs",children:[" ",p("Minimum"),": ",(I=d.allowed)==null?void 0:I.minimal," TON"]})]}),a.jsx(F.Col,{span:12,children:a.jsxs(ee,{children:[a.jsxs(T,{size:"xs",children:[p("For the entire period"),": ",(L=d.allowed)==null?void 0:L.overPayment," TON"]}),a.jsxs(it,{width:300,position:"top",withArrow:!0,shadow:"md",children:[a.jsx(it.Target,{children:a.jsx(We,{variant:"default",size:"xs",children:a.jsx(tn,{})})}),a.jsx(it.Dropdown,{children:a.jsx(T,{size:"xs",children:p("The cost of the loan is calculated per second.")})})]})]})})]})]})]}),j.length===0&&a.jsx(K.Section,{children:a.jsxs(X,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{c(d),u(fe.GET_CREDIT),f.open()},children:[p("Get")," ",(J=d.allowed)==null?void 0:J.size," TON"]})})]},d.address)}),$=e==null?void 0:e.map(d=>{var m,v,O;return a.jsxs(K,{withBorder:!0,children:[a.jsxs(K.Section,{children:[a.jsx(T,{fz:"xs",c:"dimmed",ml:"2px",children:(m=d.pawn)==null?void 0:m.collectionName}),a.jsx(T,{fw:500,ml:"2px",children:(v=d.pawn)==null?void 0:v.name}),a.jsxs(ee,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Oe,{variant:"filled",radius:"sm",src:(O=d.pawn)==null?void 0:O.previewUrl,size:"xl"}),a.jsxs(F,{children:[a.jsxs(F.Col,{span:6,children:[a.jsxs(T,{size:"xs",children:[" ",p("Loan"),": ",d.size," TON"]}),a.jsxs(T,{size:"xs",children:[" ",p("Per day"),": ",d.interest/100," %"]})]}),a.jsx(F.Col,{span:6,children:a.jsxs(T,{size:"xs",children:[" ",p("Date"),": ",d.end.toLocaleDateString("ru-RU")," "]})}),a.jsx(F.Col,{span:12,children:a.jsxs(T,{size:"xs",children:[p("Debt"),": "," ",a.jsx(ge,{value:d.debt,decimalScale:3,suffix:" TON"})]})})]})]})]}),a.jsx(K.Section,{children:a.jsxs(ee,{gap:"xs",mt:"xs",grow:!0,justify:"space-between",children:[r&&a.jsx(X,{variant:"outline",onClick:()=>n.renewalCredit(d.address,d.debt-d.size).then(I=>{console.log("tx.renewalCredit result: ",I),l()}),children:p("Extend")}),a.jsx(X,{onClick:()=>n.redeemCredit(d.address,d.debt).then(I=>{console.log("tx.redeemCredit result: ",I),l()}),children:p("Redeem")})]})})]},d.address)});return a.jsxs(tt,{size:"xl",pl:"0",pr:"0",children:[j.length>0&&a.jsx(sn,{w:"100%",children:a.jsxs(X,{fullWidth:!0,variant:"filled",size:"md",radius:"xs",color:"teal",onClick:()=>{br(j).then(d=>n.createCreditMass(d.nftAddresses,d.vItemAddresses,d.forwardPayloads))},children:[p("Get")," ",D," TON"]})}),e&&a.jsxs(a.Fragment,{children:[a.jsx(ft,{my:"xs",label:p("In pledge"),labelPosition:"center"}),a.jsx(ke,{cols:{base:1,md:2,lg:3},spacing:"md",children:$})]}),a.jsx(ft,{my:"xs",label:p("My NFTs"),labelPosition:"center"}),s?a.jsx(a.Fragment,{children:s.length>0?a.jsxs(a.Fragment,{children:[a.jsxs(ee,{className:je.buttonSection,children:[a.jsx(nn,{radius:"xl",size:"md",classNames:{input:je.input,root:je.inputWrapper},placeholder:p("Search"),rightSectionWidth:42,value:h,onChange:U,rightSection:a.jsx(rn,{"aria-label":p("Clear"),onClick:()=>{g(""),s!==null&&b(s)},style:{display:h?void 0:"none"}})}),a.jsxs(he,{store:B,width:250,position:"bottom-start",withArrow:!0,onOptionSubmit:d=>{M(d),B.closeDropdown()},children:[a.jsx(he.Target,{withAriaAttributes:!1,children:a.jsx(X,{onClick:()=>B.toggleDropdown(),children:p("Collection")})}),a.jsxs(he.Dropdown,{children:[a.jsx(he.Search,{value:w,onChange:d=>N(d.currentTarget.value),placeholder:p("Search collection")}),a.jsx(he.Options,{children:R.length>0?R:a.jsx(he.Empty,{children:p("Not found")})})]})]}),a.jsx(We,{variant:"gradient",size:"xl","aria-label":"Reload NFTs",gradient:{from:"blue",to:"cyan",deg:90},loading:!s,loaderProps:{type:"dots"},onClick:()=>o(),children:a.jsx(ws,{})})]}),a.jsx(ke,{cols:{base:1,md:2,lg:3},spacing:"md",children:z})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ve,{children:a.jsx(T,{children:p("No NFTs for collateral")})}),a.jsx(js,{data:i})]})}):a.jsx(st,{className:je.loader})]})}const xr="_card_1t8bd_1",wr="_cardSection_1t8bd_12",Sr="_section_1t8bd_17",vr="_input_1t8bd_22",Cr="_label_1t8bd_27",jr="_icon_1t8bd_36",Or="_balance_1t8bd_40",Tr="_loader_1t8bd_47",Nr="_refresh_1t8bd_52",de={card:xr,cardSection:wr,section:Sr,input:vr,label:Cr,icon:jr,balance:Or,loader:Tr,refresh:Nr},zt=7;function Ar({user:s,bankFinance:e,reloadAccount:t,accountLoading:n,tx:r,resetStates:i}){var M,C;const{t:o}=ce(),[l,c]=y.useState("1"),[u,f]=y.useState("1"),[p,h]=y.useState(),[g,x]=y.useState(0),[b,w]=y.useState(0),[N,P]=y.useState(0);return y.useEffect(()=>{if(e===null)return;let S=Math.floor((e.balance+e.credits)/1e7)/100;w(S);let j=g/S*100;P(j)},[e,g]),y.useEffect(()=>{if(s.account!==null){let S=Math.floor(s.account.balance*s.account.rate/s.account.decimals)/s.account.decimals;x(S)}},[s.account]),a.jsx(a.Fragment,{children:a.jsx(ke,{cols:{base:1,sm:4},spacing:"md",children:s.account!==null?a.jsx(K,{withBorder:!0,radius:"md",className:de.card,children:a.jsxs(K.Section,{className:de.cardSection,children:[a.jsx(xs,{className:de.icon,size:60,radius:60,children:a.jsx(on,{style:{width:Ce(32),height:Ce(32)},stroke:1.5})}),a.jsx(T,{ta:"center",fz:"lg",fw:700,mt:"md",className:de.balance,children:a.jsx(ge,{value:g,decimalScale:3,suffix:" TON"})}),a.jsx(T,{ta:"center",c:"dimmed",fz:"sm",children:o("Balance")}),a.jsxs(ue,{defaultValue:"deposit",children:[a.jsxs(ue.List,{justify:"center",children:[a.jsx(ue.Tab,{value:"deposit",children:o("Replenishment")}),a.jsx(ue.Tab,{value:"withdraw",disabled:s.account.balance<10,children:o("Withdrawal")}),a.jsx(ue.Tab,{value:"info",children:o("Info")})]}),a.jsxs(ue.Panel,{value:"deposit",children:[a.jsx(Je,{mt:"md",label:o("Amount")+" TON",placeholder:"1",classNames:de,defaultValue:1,allowNegative:!1,min:1e-9,max:(M=s.holder)==null?void 0:M.limit,value:l,onChange:c,error:p,decimalScale:zt,decimalSeparator:",",hideControls:!0,disabled:((C=s.holder)==null?void 0:C.limit)===0,rightSection:a.jsx(X,{size:"compact-md",variant:"outline",onClick:()=>{var S;c(Number((S=s.holder)==null?void 0:S.limit)),console.log("MAX Deposit: ",l+"")},children:"max"})}),a.jsx(X,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{var j;let S=(j=s.holder)!=null&&j.fullLimit?s.holder.fullLimit:0;S&&s.account!==null&&(S=s.account.rate*S,console.log("Deposit Limit: ",S)),r.depositAccount(l,S).then(A=>{console.log("tx.depositAccount result: ",A),i()})},children:o("Top up")}),s.holder&&a.jsxs(T,{ta:"center",c:"dimmed",fz:"sm",children:[o("Available for replenishment"),": "," ",a.jsx(ge,{value:Math.floor(s.holder.limit*1e3)/1e3,fixedDecimalScale:!1,suffix:" TON"})]})]}),a.jsxs(ue.Panel,{value:"withdraw",children:[a.jsx(Je,{mt:"md",label:o("Amount")+" TON",placeholder:"1",classNames:de,defaultValue:1,allowNegative:!1,min:1e-9,max:g,value:u,onChange:f,error:p,decimalScale:zt,decimalSeparator:",",hideControls:!0,rightSection:a.jsx(X,{size:"compact-md",variant:"outline",onClick:()=>{f(g),console.log("MAX Withdraw: ",u+"")},children:"max"})}),s.account.balance>0&&a.jsx(X,{fullWidth:!0,mt:"sm",radius:"xl",style:{flex:1},onClick:()=>{if(s.account!==null&&s.account.address!==null){h(void 0);let S=Math.floor(s.account.decimals*Number(u)/s.account.rate*s.account.decimals)+"";r.withdrawAccount(S,s.account.address.toString()).then(j=>{console.log("tx.withdrawAccount result: ",j),i()})}},children:o("Withdraw")})]}),e&&a.jsxs(ue.Panel,{value:"info",children:[a.jsxs(T,{c:"dimmed",fz:"sm",mt:"md",children:[o("Total pool balance"),": ",b," TON"]}),a.jsxs(T,{c:"dimmed",fz:"sm",mt:"sm",children:[o("Pool share"),": "," ",a.jsx(ge,{value:N,fixedDecimalScale:!1,decimalScale:5,suffix:" %"})]})]})]}),a.jsx(We,{className:de.refresh,"aria-label":o("Reload"),variant:"subtle",loading:n,onClick:()=>t(),children:a.jsx(ws,{})})]})}):a.jsx(st,{className:de.loader})})})}function Er(){const[s,e]=y.useState("light");return y.useEffect(()=>{Y.initDataUnsafe.user!==void 0&&e(Y.colorScheme)},[]),{colorScheme:s}}function Pr(s,e){if(s instanceof RegExp)return{keys:!1,pattern:s};var t,n,r,i,o=[],l="",c=s.split("/");for(c[0]||c.shift();r=c.shift();)t=r[0],t==="*"?(o.push(t),l+=r[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(n=r.indexOf("?",1),i=r.indexOf(".",1),o.push(r.substring(1,~n?n:~i?i:r.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+r.substring(i))):l+="/"+r;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var Ts={exports:{}},Ns={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Te=y;function Lr(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var Rr=typeof Object.is=="function"?Object.is:Lr,Ir=Te.useState,_r=Te.useEffect,kr=Te.useLayoutEffect,Dr=Te.useDebugValue;function Ur(s,e){var t=e(),n=Ir({inst:{value:t,getSnapshot:e}}),r=n[0].inst,i=n[1];return kr(function(){r.value=t,r.getSnapshot=e,lt(r)&&i({inst:r})},[s,t,e]),_r(function(){return lt(r)&&i({inst:r}),s(function(){lt(r)&&i({inst:r})})},[s]),Dr(t),t}function lt(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!Rr(s,t)}catch{return!0}}function Mr(s,e){return e()}var Br=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mr:Ur;Ns.useSyncExternalStore=Te.useSyncExternalStore!==void 0?Te.useSyncExternalStore:Br;Ts.exports=Ns;var Fr=Ts.exports;const $r=an["useInsertionEffect"],zr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hr=zr?y.useLayoutEffect:y.useEffect,Vr=$r||Hr,As=s=>{const e=y.useRef([s,(...t)=>e[0](...t)]).current;return Vr(()=>{e[0]=s}),e[1]},Kr="popstate",At="pushState",Et="replaceState",qr="hashchange",Ht=[Kr,At,Et,qr],Wr=s=>{for(const e of Ht)addEventListener(e,s);return()=>{for(const e of Ht)removeEventListener(e,s)}},Es=(s,e)=>Fr.useSyncExternalStore(Wr,s,e),Jr=()=>location.search,Gr=({ssrSearch:s=""}={})=>Es(Jr,()=>s),Vt=()=>location.pathname,Xr=({ssrPath:s}={})=>Es(Vt,s?()=>s:Vt),Yr=(s,{replace:e=!1,state:t=null}={})=>history[e?Et:At](t,"",s),Qr=(s={})=>[Xr(s),Yr],Kt=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Kt]>"u"){for(const s of[At,Et]){const e=history[s];history[s]=function(){const t=e.apply(this,arguments),n=new Event(s);return n.arguments=arguments,dispatchEvent(n),t}}Object.defineProperty(window,Kt,{value:!0})}const Zr=(s="",e)=>e.toLowerCase().indexOf(s.toLowerCase())?"~"+e:e.slice(s.length)||"/",ei=(s,e="")=>s[0]==="~"?s.slice(1):e+s,ti=s=>{try{return decodeURI(s)}catch{return s}},Ps={hook:Qr,searchHook:Gr,parser:Pr,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:s=>s},Ls=y.createContext(Ps),Me=()=>y.useContext(Ls),Rs={},Is=y.createContext(Rs),si=()=>y.useContext(Is),nt=s=>{const[e,t]=s.hook(s);return[ti(Zr(s.base,e)),As((n,r)=>t(ei(n,s.base),r))]},ni=()=>nt(Me()),_s=(s,e,t,n)=>{const{pattern:r,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:s(e||"*",n),o=r.exec(t)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((p,h)=>[p,c[h]])):o.groups;let f={...c};return u&&Object.assign(f,u),f})(),...n?[l]:[]]:[!1,null]},ri=({children:s,...e})=>{var f,p;const t=Me(),n=e.hook?Ps:t;let r=n;const[i,o]=((f=e.ssrPath)==null?void 0:f.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((p=e.hook)==null?void 0:p.hrefs);let l=y.useRef({}),c=l.current,u=c;for(let h in n){const g=h==="base"?n[h]+(e[h]||""):e[h]||n[h];c===u&&g!==u[h]&&(l.current=u={...u}),u[h]=g,g!==n[h]&&(r=u)}return y.createElement(Ls.Provider,{value:r,children:s})},qt=({children:s,component:e},t)=>e?y.createElement(e,{params:t}):typeof s=="function"?s(t):s,ii=s=>{let e=y.useRef(Rs),t=e.current;for(const n in s)s[n]!==t[n]&&(t=s);return e.current=t},xe=({path:s,nest:e,match:t,...n})=>{const r=Me(),[i]=nt(r),[o,l,c]=t??_s(r.parser,s,i,e),u=ii({...si(),...l});if(!o)return null;const f=c?y.createElement(ri,{base:c},qt(n,u)):qt(n,u);return y.createElement(Is.Provider,{value:u,children:f})},Ee=y.forwardRef((s,e)=>{const t=Me(),[n,r]=nt(t),{to:i,href:o=i,onClick:l,asChild:c,children:u,className:f,replace:p,state:h,...g}=s,x=As(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),r(o,s)))}),b=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return c&&y.isValidElement(u)?y.cloneElement(u,{onClick:x,href:b}):y.createElement("a",{...g,onClick:x,href:b,className:f!=null&&f.call?f(n===o):f,children:u,ref:e})}),ks=s=>Array.isArray(s)?s.flatMap(e=>ks(e&&e.type===y.Fragment?e.props.children:e)):[s],oi=({children:s,location:e})=>{const t=Me(),[n]=nt(t);for(const r of ks(s)){let i=0;if(y.isValidElement(r)&&(i=_s(t.parser,r.props.path,e||n,r.props.nest))[0])return y.cloneElement(r,{match:i})}return null},ai="_icon_1u5u8_1",li="_dark_1u5u8_6",ci="_light_1u5u8_16",ui="_inner_1u5u8_26",di="_main_1u5u8_33",fi="_txt_1u5u8_37",we={icon:ai,dark:li,light:ci,inner:ui,main:di,txt:fi},hi=1e3;var Pe=[],Wt=0,pi=1.2,$e=hi/pi;const qe=s=>{let e,t=Date.now();if(s!==void 0?t-Wt<$e?(Pe.push(s),Pe.length===1&&setTimeout(qe,$e)):e=s:e=Pe.shift(),e!==void 0){let n=e;Wt=t,fetch(e.url,e.data).then(r=>{n.onResponse(r),Pe.length>0&&setTimeout(qe,$e)}).catch(r=>{n.onError(r),Pe.length>0&&setTimeout(qe,$e)})}},Ds=(s,e)=>new Promise((t,n)=>{qe({url:s,data:e,onResponse:t,onError:n})}),yt={method:"get"};let xt;const ne={ACCOUNTS:"accounts/",COLLECTIONS:"nfts/collections/",BLOCKCHAIN_ACCOUNTS:"blockchain/accounts/"},re={NONE:"",NFTS:"/nfts",ITEMS:"/items",JETTONS:"/jettons",METHODS:"/methods",EVENTS:"/events",TRANSACTIONS:"/transactions"};function ie(s,e,t,n){let r=xt+e+s+t;return n!==void 0&&(r+=n),Ds(r,yt).then(i=>i.json())}const be={init:async s=>{yt.headers=new Headers({Authorization:"Bearer "+s.tonApiProps.clientSideKey,"Content-Type":"application/json",accept:"application/json"}),xt=s.tonApiProps.serverUrl},account:async s=>ie(s.toRawString(),ne.ACCOUNTS,re.NONE),accountNfts:async(s,e,t,n)=>e===void 0?ie(s.toRawString(),ne.ACCOUNTS,re.NFTS):ie(s.toRawString(),ne.ACCOUNTS,re.NFTS,"?indirect_ownership="+(e?"true":"false")+(t!==void 0?"&limit="+t:"")+(n!==void 0?"&offset="+n:"")),accountJettons:async s=>ie(s.toRawString(),ne.ACCOUNTS,re.JETTONS),method:async(s,e,t)=>ie(s.toString(),ne.BLOCKCHAIN_ACCOUNTS,re.METHODS,t!==void 0?"/"+e+"?args="+t:"/"+e),nftBulk:async s=>{const e={method:"post",body:JSON.stringify({account_ids:s}),headers:yt.headers};return Ds(xt+"nfts/_bulk",e).then(t=>t.json())},accountEvents:async(s,e,t,n)=>{let r;return typeof s=="string"?r=s:r=s.toRawString(),ie(r,ne.ACCOUNTS,re.EVENTS,"?limit="+(e!==void 0?e:"10")+(t!==void 0?"&start_date="+t:"")+(n!==void 0?"&end_date="+n:""))},accountTransactions:async(s,e,t,n)=>{let r;return typeof s=="string"?r=s:r=s.toRawString(),ie(r,ne.BLOCKCHAIN_ACCOUNTS,re.TRANSACTIONS,"?limit="+(e!==void 0?e:"10")+(t!==void 0?"&before_lt="+t:"")+(n!==void 0?"&after_lt="+n:""))},collection:async s=>ie(s.toRawString(),ne.COLLECTIONS,re.NONE),collectionNfts:async(s,e,t)=>e===void 0?ie(s.toRawString(),ne.COLLECTIONS,re.ITEMS):ie(s.toRawString(),ne.COLLECTIONS,re.ITEMS,"?limit="+e+(t!==void 0?"&offset="+t:""))};function wt(s){const e={},t=s.metadata.attributes;return t instanceof Array&&t.map(r=>e[r.trait_type]=r.value),{address:s.address,owner:s.owner.address,previewUrl:s.previews[2].url,name:s.metadata.name,collectionName:" ",collectionAddress:" ",description:s.metadata.description,attributes:e,tokenId:s.index,addressFriendly:k.Address.parse(s.address).toString()}}function Us(s,e,t,n){const r=[],i=[],o={};s.map(l=>{const c=l.collection;if(c!==void 0&&e.indexOf(c.address)>-1){const u=wt(l);u.collectionName=c.name,u.collectionAddress=c.address,t.indexOf(c.address)<0&&(o[c.name]=c.name),r.push(u);return}if(n.indexOf(l.address)>-1){const u=wt(l);r.push(u);return}});for(const l in o)i.push(l);return{nftItems:r,collectionNames:i}}function gi(s,e,t,n){return mi(s,e,t,n).then(r=>{let i=r.nftItems,o=r.collectionNames;return{nftItems:i,collectionNames:o}})}async function mi(s,e,t,n){let r=1e3,i=0,o=[];for(;r>0;){let l=await be.accountNfts(s,!1,r,i);const c=l.nft_items;c instanceof Array?(c.length<r&&(r=0),o.push(...c),i+=r):Promise.reject("[getListNft] Error: "+JSON.stringify(l))}return Us(o,e,t,n)}const Jt={STATUS_NOT_INIT:0,STATUS_INIT:1,STATUS_ACTIVE:2,STATUS_INACTIVE:3,STATUS_AUCTION_STARTED:4};function bi(s,e){let t=s.description.split("+");const n=+t[3]/Ge,r=+t[4],i=+t[5],o=+t[6],l=Math.floor(Date.now()/1e3);let c,u=l-o;u<at&&(u=at);let f=n*u*r/at/hr;f<Ft&&(f=Ft);const p=n+f,h=new Date((o+i)*1e3);let g=+t[2];if(g===Jt.STATUS_ACTIVE)h.getTime()<Date.now()?g=V.WAIT_START_BID:g=V.ACTIVE;else if(g===Jt.STATUS_AUCTION_STARTED){g=V.AUCTION_STARTED;const b=+t[7]/Ge,w=t[8],N=new Date(+t[9]*1e3);c={bid:b,bidder:w,finish:N,isMy:e.toString()==w},N.getTime()<Date.now()&&(g=V.AUCTION_FINISHED)}else g=V.ERROR;return{address:s.address,borrower:s.owner,pawnAddress:t[1],status:g,size:n,interest:r,duration:i,start:o,debt:p,end:h,auction:c}}async function yi(s,e){const t=[];for(let l=0;l<s.length;l++){const c=s[l];let u=1e3,f=0;for(;u>0;){let p=await be.collectionNfts(k.Address.parse(c),u,f);const h=p.nft_items;h instanceof Array?(h.length<u&&(u=0),t.push(...h),f+=u):Promise.reject("[getListNft] Error: "+JSON.stringify(p))}}const n=[],r={},i=[];if(Us(t,s,[],[]).nftItems.map(l=>{const c=bi(l,e);n.push(c),r[c.pawnAddress]=c,i.push(c.pawnAddress)}),i.length>0){const c=(await be.nftBulk(i)).nft_items;c instanceof Array&&c.map(u=>{const f=wt(u);f.collectionName=u.collection.name,f.collectionAddress=u.collection.address;let p=r[f.addressFriendly];p&&(p.pawn=f)})}return console.log("[getListCredit] creditList: ",n),n}let oe=null;function xi(s){const[e]=y.useState({address:null,account:null,holder:null}),[t,n]=y.useState(!0),[r,i]=y.useState(null),[o,l]=y.useState(null),[c,u]=y.useState(null),[f,p]=y.useState(null),[h,g]=y.useState([]),x=Nt(),b=k.Address.parse(s.bankAddress),w=s.holderCollections,N=s.creditCollectionAddress,P=[];for(let D=0;D<s.allowedCollectionsProps.length;D++){const _=s.allowedCollectionsProps[D];P.push(_.address)}const M=[];for(let D=0;D<s.allowedCustomNftProps.length;D++){const _=s.allowedCustomNftProps[D];M.push(_.address)}const C=()=>(n(!0),be.method(b,"get_finance").then(D=>{if(D.success===!0){let _={balance:Number(D.stack[0].num),rate:Number(D.stack[1].num),credits:Number(D.stack[2].num)};return p(_),oe===null?Promise.reject("myAddress is null"):be.accountJettons(oe).then(B=>{console.log("[reloadAccount] data: ",B);let R=B.balances,U=null;if(R){for(let z=0;z<R.length;z++){const $=R[z],d=k.Address.parse($.jetton.address);b.equals(d)&&(U=$)}if(U!==null){const z=Math.pow(10,U.jetton.decimals),$={address:k.Address.parse(U.wallet_address.address),balance:Number(U.balance),decimals:z,rate:z};if($.rate=_.rate,e.account=$,e.holder){let d=e.holder.fullLimit;d-=$.rate/$.decimals*$.balance/$.decimals,e.holder.limit=d,e.holder.limit<0&&(e.holder.limit=0)}return n(!1),!0}else return e.account={address:null,balance:0,decimals:Ge,rate:_.rate},n(!1),!0}})}else return Promise.reject("[reloadAccount] Error get_finance:: "+JSON.stringify(D))})),S=()=>{if(i(null),l(null),oe===null)return Promise.reject("MyAddress is null");let D=[...P,...w,...N];return gi(oe,D,N,M).then(_=>{console.log("[reloadNfts] data: ",_),g(_.collectionNames);let B=[],R=0;const U=s.holderCollectionsProps,z=s.allowedCollectionsProps,$=s.allowedCustomNftProps;if(_.nftItems.map(d=>{let m=!1,v=d.collectionAddress,O=w.indexOf(v);if(O>-1){let J=U[O].limitAttributeName,Q=U[O].limitAttributes;if(J){let H=d.attributes[J];if(H){let te=Q[H],se=te===void 0?Q.default:te;R+=se}}else R+=Q.default}const I=P.indexOf(v);I>-1&&(d.allowed=z[I],B.push(d),m=!0);const L=M.indexOf(d.address);L>-1&&(d.allowed=$[L],m||B.push(d))}),i(B),R>0){let d={limit:R,fullLimit:R};e.holder=d}})},j=()=>oe===null?Promise.reject("[reloadAuctions] myAddress is null"):yi(N,oe).then(D=>{u(D);const _=oe.toRawString(),B=[];D.map(R=>{R.borrower===_&&R.status<V.AUCTION_STARTED&&B.push(R)}),B.length>0&&l(B)});return y.useEffect(()=>{if(x===null){oe=null,e.address=null,e.account=null,e.holder=null,i(null),l(null);return}oe=k.Address.parse(x.account.address),e.address=oe,S().then(()=>j()).then(()=>C())},[x,s]),{user:e,reloadAccount:C,accountLoading:t,bankFinance:f,nfts:r,credits:o,auctions:c,collectionNames:h,reloadNftsAndAuctions:()=>S().then(()=>j())}}function wi({activeState:s,errorState:e}){const{t}=ce();return a.jsxs(Fe,{active:s,orientation:"vertical",children:[a.jsx(Fe.Step,{label:t("Transaction"),description:t("Confirm the transaction in your wallet"),loading:s===1&&e!==1,completedIcon:e===1?a.jsx(It,{style:{width:Ce(20),height:Ce(20)}}):"",color:e===1?"red":""}),a.jsx(Fe.Step,{label:t("Checking"),description:t("Checking the transaction progress. Please wait."),loading:s===2&&e!==2,completedIcon:e===2?a.jsx(It,{style:{width:Ce(20),height:Ce(20)}}):"",color:e===2?"red":""}),a.jsx(Fe.Step,{label:t("Update"),description:t("Updating data from the blockchain."),loading:s===3})]})}function Si({activeState:s,errorState:e}){const[t,{open:n,close:r}]=Ke(!1),{t:i}=ce();return y.useEffect(()=>{s>0?(console.log("[TransactionModal] open: ",s),n()):(console.log("[TransactionModal] close: ",s),r())},[s]),a.jsx(ln,{opened:t,onClose:r,title:i("Conducting a transaction"),centered:!0,children:s>0&&a.jsx(wi,{activeState:s,errorState:e})})}const Gt=4,Ie=k.toNano("0.20"),Xt=k.toNano("0.1"),Ms=k.toNano("0.03"),Yt=(2n*Ms+Ie).toString(),Qt=(s,e,t)=>k.beginCell().storeUint(1607220500,32).storeUint(0,64).storeAddress(e).storeAddress(s).storeUint(0,1).storeCoins(Ie).storeBuilder(t.asBuilder()).endCell();function vi(s){const[e]=Tt(),t=Nt(),[n,r]=y.useState("");return y.useEffect(()=>{r(t===null?"":t.account.address)},[t]),{sender:{depositAccount:async(i,o)=>{const l=k.beginCell().storeUint(65537,32).storeUint(1,64).storeCoins(k.toNano(i)).storeCoins(BigInt(o)).endCell(),c=k.toNano(i)+Xt,u={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:s.bankAddress,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(u)},withdrawAccount:async(i,o)=>{const l=k.beginCell().storeUint(1499400124,32).storeUint(1,64).storeCoins(BigInt(i)).storeAddress(k.Address.parse(n)).storeUint(0,1).endCell(),c={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:o,amount:Xt.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(c)},createCredit:async(i,o,l)=>{const c=Qt(k.Address.parse(n),k.Address.parse(o),l),u={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:Yt,payload:c.toBoc().toString("base64")}]};return e.sendTransaction(u)},createCreditMass:async(i,o,l)=>{const c=[],u=i.length>Gt?Gt:i.length,f=k.Address.parse(n);for(let h=0;h<u;h++){const g=Qt(f,k.Address.parse(o[h]),l[h]);c.push({address:i[h],amount:Yt,payload:g.toBoc().toString("base64")})}const p={validUntil:Math.floor(Date.now()/1e3)+360,messages:c};return e.sendTransaction(p)},renewalCredit:async(i,o)=>{const l=k.beginCell().storeUint(65541,32).storeUint(1,64).endCell();let c=k.toNano(o)+Ms;const u={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(u)},redeemCredit:async(i,o)=>{const l=k.beginCell().storeUint(65540,32).storeUint(1,64).endCell();let c=k.toNano(o)+Ie;const u={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:c.toString(),payload:l.toBoc().toString("base64")}]};return e.sendTransaction(u)},makeBid:async(i,o)=>{const l=k.toNano(o),c=k.beginCell().storeUint(65542,32).storeUint(1,64).storeCoins(l).endCell();let u=l+Ie;const f={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:u.toString(),payload:c.toBoc().toString("base64")}]};return e.sendTransaction(f)},takeLot:async i=>{const o=k.beginCell().storeUint(65543,32).storeUint(1,64).endCell(),l={validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:i,amount:Ie.toString(),payload:o.toBoc().toString("base64")}]};return e.sendTransaction(l)},walletAddress:n}}}const W={NONE:0,APPROVE:1,CHECK:2,RELOAD:3},St=[1e4,15e3,2e4,3e4];function Bs(s,e,t,n,r,i){be.accountTransactions(r,5).then(o=>{console.log("--+ Tonapi.accountTransactions: ",o),console.log("--+ Tonapi.accountTransactions extHash: ",i);const l=o.transactions;let c=!0;if(l instanceof Array&&l.length>0)for(let u=0;u<l.length;u++){const f=l[u];if(f.in_msg.hash===i&&f.success===!0){c=!1,s("Ok");break}}if(c){const u=t+1;u>3?e("Max attempt"):setTimeout(()=>{Bs(s,e,u,n,r,i)},St[u-1])}}).catch(o=>e(o))}function Ci(s,e,t){const{sender:n}=vi(s),[r,i]=y.useState(W.NONE),[o,l]=y.useState(W.NONE),[c,u]=y.useState(0),f=()=>{i(W.NONE),l(W.NONE)},p=(x,b)=>{i(W.CHECK);const w=k.Cell.fromBase64(b).hash().toString("hex");return new Promise((N,P)=>{setTimeout(()=>{Bs(N,P,1,c,x,w)},St[0])}).catch(N=>{console.warn("useSendTransaction STATE.CHECK sellNft: ",r,N),l(W.CHECK)})},h=x=>(i(W.RELOAD),new Promise((b,w)=>{setTimeout(()=>{x().then(b).catch(w)},St[3])}).catch(b=>{console.warn("useSendTransaction STATE.RELOAD doReload: ",r,b),l(W.RELOAD)})),g=x=>{console.warn("useSendTransaction STATE.APPROVE catchApprove: ",r,x),l(W.APPROVE)};return{tx:{depositAccount:async(x,b)=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.depositAccount(x,b).then(w=>p(n.walletAddress,w.boc)).then(()=>h(e)).catch(g)),withdrawAccount:async(x,b)=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.withdrawAccount(x,b).then(w=>p(n.walletAddress,w.boc)).then(()=>h(e)).catch(g)),createCredit:async(x,b,w)=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.createCredit(x,b,w).then(N=>p(n.walletAddress,N.boc)).then(()=>h(t)).catch(g)),createCreditMass:async(x,b,w)=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.createCreditMass(x,b,w).then(N=>p(n.walletAddress,N.boc)).then(()=>h(t)).catch(g)),redeemCredit:async(x,b)=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.redeemCredit(x,b).then(w=>p(n.walletAddress,w.boc)).then(()=>h(t)).catch(g)),renewalCredit:async(x,b)=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.renewalCredit(x,b).then(w=>p(n.walletAddress,w.boc)).then(()=>h(t)).catch(g)),makeBid:async(x,b)=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.makeBid(x,b).then(w=>p(n.walletAddress,w.boc)).then(()=>h(t)).catch(g)),takeLot:async x=>(i(W.APPROVE),u(Math.floor(Date.now()/1e3)),n.takeLot(x).then(b=>p(n.walletAddress,b.boc)).then(()=>h(t)).catch(g))},activeState:r,errorState:o,resetStates:f}}const ji=["Error","Not expired","Loan repaid","Waiting for the bid","Auction in progress","Auction is over"];function Oi({auctions:s,tx:e,resetStates:t,setCredit:n,setTransactionType:r,inputDrawerHandler:i}){const{t:o}=ce(),[l,c]=y.useState([]);y.useEffect(()=>{if(s===null)return;const f=[...s];f.sort(function(p,h){return p.end.getTime()-h.end.getTime()}),c(f)},[s]);const u=l.map(f=>{var p,h,g,x,b,w,N,P;return a.jsxs(K,{withBorder:!0,children:[a.jsxs(K.Section,{children:[a.jsx(T,{fz:"xs",c:"dimmed",ml:"2px",children:(p=f.pawn)==null?void 0:p.collectionName}),a.jsx(T,{fw:500,ml:"2px",children:(h=f.pawn)==null?void 0:h.name}),a.jsxs(ee,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Oe,{variant:"filled",radius:"sm",src:(g=f.pawn)==null?void 0:g.previewUrl,size:"xl"}),a.jsxs(F,{children:[f.status<V.AUCTION_STARTED&&a.jsxs(a.Fragment,{children:[a.jsx(F.Col,{span:6,children:a.jsxs(T,{size:"xs",children:[" ",o("Loan"),": ",f.size," TON"]})}),a.jsx(F.Col,{span:6,children:a.jsxs(T,{size:"xs",children:[" ",o("Date"),": ",f.end.toLocaleDateString("ru-RU")," "]})})]}),f.status===V.AUCTION_STARTED&&a.jsx(F.Col,{span:12,children:a.jsxs(T,{size:"xs",children:[" ",o("End"),": ",((x=f.auction)==null?void 0:x.finish.toLocaleDateString("ru-RU"))+" "+((b=f.auction)==null?void 0:b.finish.toLocaleTimeString("ru-RU"))," "]})}),a.jsx(F.Col,{span:12,children:a.jsxs(T,{size:"xs",children:[o("Status"),": ",o(ji[f.status]),"."]})}),a.jsxs(F.Col,{span:12,children:[f.status<V.AUCTION_STARTED&&a.jsxs(T,{size:"xs",children:[o("Start bid"),": "," ",a.jsx(ge,{value:bt*f.size+f.size,decimalScale:3,suffix:" TON"})]}),a.jsxs(ee,{children:[f.status===V.AUCTION_STARTED&&a.jsxs(T,{size:"xs",children:[o("Current bid"),": "," ",a.jsx(ge,{value:(w=f.auction)==null?void 0:w.bid,decimalScale:3,suffix:" TON"})]}),((N=f.auction)==null?void 0:N.isMy)&&a.jsxs(T,{c:"teal.4",size:"xs",children:[" ",o("My")," "]})]})]})]})]})]}),a.jsxs(K.Section,{children:[f.status>V.CREDIT_CLOSED&&f.status<V.AUCTION_FINISHED&&a.jsx(X,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{n(f),r(fe.MAKE_BET),i.open()},children:o("Make bid")}),f.status===V.AUCTION_FINISHED&&((P=f.auction)==null?void 0:P.isMy)&&a.jsx(X,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{e.takeLot(f.address).then(M=>{console.log("tx.makeBid result: ",M),t()})},children:o("Take lot")})]})]},f.address)});return a.jsxs(tt,{size:"xl",pl:"0",pr:"0",children:[a.jsx(ft,{my:"xs",label:o("Auctions"),labelPosition:"center"}),s?a.jsx(ke,{cols:{base:1,md:2,lg:3},spacing:"md",children:u}):a.jsx(st,{className:je.loader})]})}const Ti=["Borrow","Make bid"];function Ni({nft:s,auction:e,transactionType:t,opened:n,handler:r,tx:i,resetStates:o,bankFinance:l}){var M,C,S,j,A,D,_,B;const{t:c}=ce(),[u,f]=y.useState(1),[p,h]=y.useState(1),[g,x]=y.useState(0),[b,w]=y.useState(1),[N,P]=y.useState(.1);return y.useEffect(()=>{if(t===fe.GET_CREDIT&&(s==null?void 0:s.allowed)!==void 0){const R=s.allowed.interest/100;let U=s.allowed.duration*Number(u)*R;U<.1&&(U=.1),w(parseFloat(U.toFixed(3)));let z=Number(u)*R;z<.1&&(z=.1),P(parseFloat(z.toFixed(2)))}},[u,s]),y.useEffect(()=>{if(t===fe.GET_CREDIT&&(s==null?void 0:s.allowed)!==void 0&&f(s.allowed.size),t===fe.MAKE_BET&&e!==null){let R=0;e.status===V.WAIT_START_BID&&(R=bt*e.size+e.size),e.status===V.AUCTION_STARTED&&(R=bt*e.size+e.auction.bid),R=Math.floor(R*1e3)/1e3,h(R),f(R)}},[t,s]),y.useEffect(()=>{if(l===null)return;let R=l.balance/Ge;x(R)},[l]),a.jsxs(cn,{opened:n,onClose:()=>{r.close()},position:"top",size:"md",overlayProps:{backgroundOpacity:.5,blur:4},transitionProps:{transition:"rotate-left",duration:150,timingFunction:"linear"},closeButtonProps:{icon:a.jsx(un,{size:32,stroke:1.5})},title:c(Ti[t]),children:[a.jsx(dn.InitialFocus,{}),s!=null&&s.allowed&&l!==null?a.jsxs(a.Fragment,{children:[a.jsxs(K,{withBorder:!0,children:[a.jsxs(K.Section,{children:[a.jsx(T,{fz:"xs",c:"dimmed",ml:"2px",children:s.collectionName}),a.jsx(T,{fw:500,ml:"2px",truncate:"end",children:s.name}),a.jsxs(ee,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Oe,{variant:"filled",radius:"sm",src:s.previewUrl,size:"xl"}),a.jsxs(F,{children:[a.jsxs(F.Col,{span:6,children:[a.jsxs(T,{size:"xs",children:[" ",c("Loan"),": ",(M=s.allowed)==null?void 0:M.size," TON"]}),a.jsxs(T,{size:"xs",children:[" ",c("Per day"),": ",(C=s.allowed)==null?void 0:C.interest," %"]})]}),a.jsxs(F.Col,{span:6,children:[a.jsxs(T,{size:"xs",children:[" ",c("Term"),": ",(S=s.allowed)==null?void 0:S.duration," ",c("days")]}),a.jsxs(T,{size:"xs",children:[" ",c("Minimum"),": ",N," TON"]})]}),a.jsx(F.Col,{span:12,children:a.jsxs(T,{size:"xs",children:[c("For the entire period"),": ",b," TON"]})})]})]})]}),a.jsx(K.Section,{})]},s.address),t===fe.GET_CREDIT&&a.jsx(Je,{label:c("Enter the loan amount TON"),description:c("Maximum")+": "+s.allowed.size+" TON",defaultValue:s.allowed.size,allowNegative:!1,value:u,onChange:f,allowedDecimalSeparators:[".",","],clampBehavior:"strict",min:1,max:s.allowed.size}),Number(u)<g?a.jsxs(X,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{r.close(),Os(s,Number(u)).then(R=>{i.createCredit(s.address,s.allowed.verifier,R).then(U=>{console.log("tx.createCredit result: ",U),o()})})},children:[c("Get")," ",u," TON"]}):a.jsx(T,{c:"red.4",children:c("Not enough funds in the lending pool.")})]}):a.jsx(st,{className:je.loader}),e&&a.jsxs(a.Fragment,{children:[a.jsx(K,{withBorder:!0,children:a.jsxs(K.Section,{children:[a.jsx(T,{fz:"xs",c:"dimmed",ml:"2px",children:(j=e.pawn)==null?void 0:j.collectionName}),a.jsx(T,{fw:500,ml:"2px",children:(A=e.pawn)==null?void 0:A.name}),a.jsxs(ee,{preventGrowOverflow:!1,wrap:"nowrap",children:[a.jsx(Oe,{variant:"filled",radius:"sm",src:(D=e.pawn)==null?void 0:D.previewUrl,size:"xl"}),a.jsxs(F,{children:[e.status===V.WAIT_START_BID&&a.jsxs(a.Fragment,{children:[a.jsx(F.Col,{span:6,children:a.jsxs(T,{size:"xs",children:[" ",c("Loan"),": ",e.size," TON"]})}),a.jsx(F.Col,{span:6,children:a.jsxs(T,{size:"xs",children:[" ",c("Date"),": ",e.end.toLocaleDateString("ru-RU")," "]})})]}),e.status===V.AUCTION_STARTED&&a.jsx(F.Col,{span:12,children:a.jsxs(T,{size:"xs",children:[" ",c("End"),": ",((_=e.auction)==null?void 0:_.finish.toLocaleDateString("ru-RU"))+" "+((B=e.auction)==null?void 0:B.finish.toLocaleTimeString("ru-RU"))," "]})}),a.jsx(F.Col,{span:12,children:a.jsxs(T,{size:"xs",children:[c("Minimal bid"),": "," ",a.jsx(ge,{value:p,decimalScale:3,suffix:" TON"})]})})]})]})]})},e.address),t===fe.MAKE_BET&&a.jsx(Je,{label:c("Enter the bid amount TON"),description:c("Minimum")+": "+p+" TON",defaultValue:p,allowNegative:!1,value:u,onChange:f,min:p,allowedDecimalSeparators:[".",","]}),e.status>V.CREDIT_CLOSED&&a.jsx(X,{variant:"filled",fullWidth:!0,mt:"xs",onClick:()=>{r.close(),i.makeBid(e.address,Number(u)).then(R=>{console.log("tx.makeBid result: ",R),o()})},children:c("Make bid")})]})]})}function Ai({config:s}){var te;const{user:e,reloadAccount:t,accountLoading:n,bankFinance:r,nfts:i,credits:o,auctions:l,collectionNames:c,reloadNftsAndAuctions:u}=xi(s),{tx:f,activeState:p,errorState:h,resetStates:g}=Ci(s,t,u),{colorScheme:x}=Er(),[b,w]=Tt(),{setColorScheme:N}=fn(),P=hn("light",{getInitialValueInEffect:!0}),M=()=>{N(P==="light"?"dark":"light")},[,C]=ni(),{t:S,i18n:j}=ce();w({uiPreferences:{theme:x==="dark"?ht.DARK:ht.LIGHT}});const A=Nt(),[D,{toggle:_}]=Ke(),[B,{toggle:R}]=Ke(!0),[U,z]=Ke(!1),[$,d]=y.useState(null),[m,v]=y.useState(null),[O,I]=y.useState(fe.GET_CREDIT),[L,J]=y.useState(!0),[Q,H]=y.useState("en");return y.useEffect(()=>{j.changeLanguage(Q);let se="en";Q==="ru"&&(se="ru"),b.uiOptions={language:se}},[Q]),y.useEffect(()=>{let se=Y.initDataUnsafe.start_param;if(se){let Be="/"+se.replace("_","/");C(Be)}let Pt=Y.initDataUnsafe.user;if(Pt){let Be=Pt.language_code;Be&&Be.substring(0,2)==="ru"&&H("ru")}},[Y.initDataUnsafe]),y.useEffect(()=>{localStorage.getItem("ton-connect-ui_wallet-info")===null?(J(!1),Y.MainButton.setText(S("Connect wallet")),Y.MainButton.onClick(()=>b.openModal()),Y.MainButton.show()):A!==null&&(J(!1),Y.MainButton.hide())},[A]),a.jsxs(a.Fragment,{children:[a.jsxs(Ae,{header:{height:60},footer:{height:20},navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!D,desktop:!B}},padding:"xs",children:[a.jsx(Ae.Header,{children:a.jsxs(ee,{h:"100%",px:"md",className:we.inner,children:[a.jsx(_t,{opened:D,onClick:_,hiddenFrom:"sm",size:"sm"}),a.jsx(_t,{opened:B,onClick:R,visibleFrom:"sm",size:"sm"}),a.jsx(T,{size:"xl",fw:700,variant:"gradient",gradient:s.appNameHeader,className:we.txt,children:S("custom:appName")}),a.jsxs(We,{onClick:()=>M(),radius:"xl",variant:"outline",size:"xl","aria-label":"Toggle color scheme",children:[a.jsx(pn,{className:kt(we.icon,we.light),stroke:2}),a.jsx(gn,{className:kt(we.icon,we.dark),stroke:2})]})]})}),a.jsxs(Ae.Navbar,{p:"md",children:[a.jsx(Z,{label:S("Borrow"),leftSection:a.jsx(mn,{size:"1rem",stroke:1.5}),component:Ee,href:"/",onClick:_}),e.holder!==null&&a.jsxs(a.Fragment,{children:[a.jsx(Z,{label:S("Deposit"),component:Ee,leftSection:a.jsx(bn,{size:"1rem",stroke:1.5}),href:"/deposit",onClick:_}),a.jsx(Z,{label:S("Auctions"),leftSection:a.jsx(yn,{size:"1rem",stroke:1.5}),component:Ee,href:"/auction",onClick:_})]}),a.jsxs(Z,{label:S("Info"),leftSection:a.jsx(xn,{size:"1rem",stroke:1.5}),childrenOffset:28,children:[a.jsx(Z,{label:S("About"),leftSection:a.jsx(wn,{size:"1rem",stroke:1.5}),component:Ee,href:"/about",onClick:_}),a.jsx(Z,{label:S("Collections"),leftSection:a.jsx(Sn,{size:"1rem",stroke:1.5}),component:Ee,href:"/collections",onClick:_})]}),a.jsxs(Z,{label:"Language",childrenOffset:28,leftSection:a.jsx(vn,{size:"1rem",stroke:1.5}),children:[a.jsx(Z,{label:"English",onClick:()=>{_(),H("en")}}),a.jsx(Z,{label:"Русский",onClick:()=>{_(),H("ru")}})]}),A?a.jsx(Z,{label:S("Disconnect wallet"),leftSection:a.jsx(Cn,{size:"1rem",stroke:1.5}),description:mr((te=e.address)==null?void 0:te.toString()),onClick:()=>{_(),b.disconnect(),C("/")}}):a.jsx(Z,{label:S("Connect Wallet"),leftSection:a.jsx(jn,{size:"1rem",stroke:1.5}),onClick:()=>{_(),b.openModal()}})]}),a.jsxs(Ae.Main,{children:[s.isTestnet&&a.jsx(On,{fullWidth:!0,variant:"outline",color:"red",mb:"md",children:"TESTNET"}),a.jsxs(oi,{children:[a.jsx(xe,{path:"/",children:L?a.jsx(Tn,{visible:L,zIndex:1e3,overlayProps:{radius:"sm",blur:10},loaderProps:{color:"blue",type:"bars"}}):a.jsx(a.Fragment,{children:A?a.jsx(yr,{nfts:i,credits:o,collectionNames:c,tx:f,isHolder:e.holder!==null||!s.onlyHolderRights.extend,allowed:s.allowedCollectionsProps,reloadNfts:u,resetStates:g,setNft:d,setTransactionType:I,inputDrawerHandler:z}):a.jsx(ot,{data:s.heroPage})})}),a.jsx(xe,{path:"/deposit",children:A?a.jsx(Ar,{user:e,reloadAccount:t,accountLoading:n,tx:f,resetStates:g,bankFinance:r}):a.jsx(ot,{data:s.heroPage})}),a.jsx(xe,{path:"/auction",children:A?a.jsx(Oi,{auctions:l,tx:f,resetStates:g,setCredit:v,setTransactionType:I,inputDrawerHandler:z}):a.jsx(ot,{data:s.heroPage})}),a.jsx(xe,{path:"/about",children:a.jsx(Nn,{children:a.jsx("div",{dangerouslySetInnerHTML:{__html:S("custom:aboutHtml")}})})}),a.jsx(xe,{path:"/collections",children:a.jsx(js,{data:s.allowedCollectionsProps})}),a.jsx(xe,{children:se=>a.jsxs("center",{children:[a.jsx("b",{children:"404:"})," Sorry, this page ",a.jsxs("code",{children:['"/',se["*"],'"']})," isn't ready yet!"]})})]}),a.jsx(Si,{activeState:p,errorState:h})]}),a.jsx(Ae.Footer,{p:2,children:a.jsx(T,{size:"xs",c:"dimmed",children:" © 2024-2025 Krediton "})})]}),a.jsx(Ni,{opened:U,handler:z,nft:$,auction:m,transactionType:O,tx:f,resetStates:g,bankFinance:r})]})}const Ei="config-scroogers-mainnet.json",E=s=>typeof s=="string",Le=()=>{let s,e;const t=new Promise((n,r)=>{s=n,e=r});return t.resolve=s,t.reject=e,t},Zt=s=>s==null?"":""+s,Pi=(s,e,t)=>{s.forEach(n=>{e[n]&&(t[n]=e[n])})},Li=/###/g,es=s=>s&&s.indexOf("###")>-1?s.replace(Li,"."):s,ts=s=>!s||E(s),_e=(s,e,t)=>{const n=E(e)?e.split("."):e;let r=0;for(;r<n.length-1;){if(ts(s))return{};const i=es(n[r]);!s[i]&&t&&(s[i]=new t),Object.prototype.hasOwnProperty.call(s,i)?s=s[i]:s={},++r}return ts(s)?{}:{obj:s,k:es(n[r])}},ss=(s,e,t)=>{const{obj:n,k:r}=_e(s,e,Object);if(n!==void 0||e.length===1){n[r]=t;return}let i=e[e.length-1],o=e.slice(0,e.length-1),l=_e(s,o,Object);for(;l.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),l=_e(s,o,Object),l&&l.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=t},Ri=(s,e,t,n)=>{const{obj:r,k:i}=_e(s,e,Object);r[i]=r[i]||[],r[i].push(t)},Xe=(s,e)=>{const{obj:t,k:n}=_e(s,e);if(t)return t[n]},Ii=(s,e,t)=>{const n=Xe(s,t);return n!==void 0?n:Xe(e,t)},Fs=(s,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in s?E(s[n])||s[n]instanceof String||E(e[n])||e[n]instanceof String?t&&(s[n]=e[n]):Fs(s[n],e[n],t):s[n]=e[n]);return s},Se=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const ki=s=>E(s)?s.replace(/[&<>"'\/]/g,e=>_i[e]):s;class Di{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Ui=[" ",",","?","!",";"],Mi=new Di(20),Bi=(s,e,t)=>{e=e||"",t=t||"";const n=Ui.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(n.length===0)return!0;const r=Mi.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!r.test(s);if(!i){const o=s.indexOf(t);o>0&&!r.test(s.substring(0,o))&&(i=!0)}return i},vt=function(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!s)return;if(s[e])return s[e];const n=e.split(t);let r=s;for(let i=0;i<n.length;){if(!r||typeof r!="object")return;let o,l="";for(let c=i;c<n.length;++c)if(c!==i&&(l+=t),l+=n[c],o=r[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<n.length-1)continue;i+=c-i+1;break}r=o}return r},Ye=s=>s&&s.replace("_","-"),Fi={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,e){console&&console[s]&&console[s].apply(console,e)}};class Qe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Fi,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(E(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Qe(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Qe(this.logger,e)}}var ae=new Qe;class rt{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const r=this.observers[n].get(t)||0;this.observers[n].set(t,r+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[l,c]=o;for(let u=0;u<c;u++)l(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[l,c]=o;for(let u=0;u<c;u++)l.apply(l,[e,...n])})}}class ns extends rt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,o=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],n&&(Array.isArray(n)?l.push(...n):E(n)&&i?l.push(...n.split(i)):l.push(n)));const c=Xe(this.data,l);return!c&&!t&&!n&&e.indexOf(".")>-1&&(e=l[0],t=l[1],n=l.slice(2).join(".")),c||!o||!E(n)?c:vt(this.data&&this.data[e]&&this.data[e][t],n,i)}addResource(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,t];n&&(l=l.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(l=e.split("."),r=t,t=l[1]),this.addNamespaces(t),ss(this.data,l,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in n)(E(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),r=n,n=t,t=l[1]),this.addNamespaces(t);let c=Xe(this.data,l)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Fs(c,n,i):c={...c,...n},ss(this.data,l,c),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(r=>t[r]&&Object.keys(t[r]).length>0)}toJSON(){return this.data}}var $s={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,e,t,n,r){return s.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,t,n,r))}),e}};const rs={};class Ze extends rt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Pi(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ae.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const n=this.resolve(e,t);return n&&n.res!==void 0}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Bi(e,n,r);if(o&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:E(i)?[i]:i};const u=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(r)}return{key:e,namespaces:E(i)?[i]:i}}translate(e,t,n){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const r=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],t),c=l[l.length-1],u=t.lng||this.language,f=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(f){const C=t.nsSeparator||this.options.nsSeparator;return r?{res:`${c}${C}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${C}${o}`}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:o}const p=this.resolve(e,t);let h=p&&p.res;const g=p&&p.usedKey||o,x=p&&p.exactUsedKey||o,b=Object.prototype.toString.apply(h),w=["[object Number]","[object Function]","[object RegExp]"],N=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,P=!this.i18nFormat||this.i18nFormat.handleAsObject,M=!E(h)&&typeof h!="boolean"&&typeof h!="number";if(P&&h&&M&&w.indexOf(b)<0&&!(E(N)&&Array.isArray(h))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const C=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,h,{...t,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(p.res=C,p.usedParams=this.getUsedParamsDetails(t),p):C}if(i){const C=Array.isArray(h),S=C?[]:{},j=C?x:g;for(const A in h)if(Object.prototype.hasOwnProperty.call(h,A)){const D=`${j}${i}${A}`;S[A]=this.translate(D,{...t,joinArrays:!1,ns:l}),S[A]===D&&(S[A]=h[A])}h=S}}else if(P&&E(N)&&Array.isArray(h))h=h.join(N),h&&(h=this.extendTranslation(h,e,t,n));else{let C=!1,S=!1;const j=t.count!==void 0&&!E(t.count),A=Ze.hasDefaultValue(t),D=j?this.pluralResolver.getSuffix(u,t.count,t):"",_=t.ordinal&&j?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",B=j&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),R=B&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${D}`]||t[`defaultValue${_}`]||t.defaultValue;!this.isValidLookup(h)&&A&&(C=!0,h=R),this.isValidLookup(h)||(S=!0,h=o);const z=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:h,$=A&&R!==h&&this.options.updateMissing;if(S||C||$){if(this.logger.log($?"updateKey":"missingKey",u,c,o,$?R:h),i){const O=this.resolve(o,{...t,keySeparator:!1});O&&O.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let d=[];const m=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&m&&m[0])for(let O=0;O<m.length;O++)d.push(m[O]);else this.options.saveMissingTo==="all"?d=this.languageUtils.toResolveHierarchy(t.lng||this.language):d.push(t.lng||this.language);const v=(O,I,L)=>{const J=A&&L!==h?L:z;this.options.missingKeyHandler?this.options.missingKeyHandler(O,c,I,J,$,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(O,c,I,J,$,t),this.emit("missingKey",O,c,I,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?d.forEach(O=>{const I=this.pluralResolver.getSuffixes(O,t);B&&t[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(L=>{v([O],o+L,t[`defaultValue${L}`]||R)})}):v(d,o,R))}h=this.extendTranslation(h,e,t,p,n),S&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${c}:${o}`),(S||C)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,C?h:void 0):h=this.options.parseMissingKeyHandler(h))}return r?(p.res=h,p.usedParams=this.getUsedParamsDetails(t),p):h}extendTranslation(e,t,n,r,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=E(e)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(u){const h=e.match(this.interpolator.nestingRegexp);f=h&&h.length}let p=n.replace&&!E(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),e=this.interpolator.interpolate(e,p,n.lng||this.language||r.usedLng,n),u){const h=e.match(this.interpolator.nestingRegexp),g=h&&h.length;f<g&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,g=new Array(h),x=0;x<h;x++)g[x]=arguments[x];return i&&i[0]===g[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${t[0]}`),null):o.translate(...g,t)},n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=E(l)?[l]:l;return e!=null&&c&&c.length&&n.applyPostProcessor!==!1&&(e=$s.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,r,i,o,l;return E(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(c,t),f=u.key;r=f;let p=u.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const h=t.count!==void 0&&!E(t.count),g=h&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),x=t.context!==void 0&&(E(t.context)||typeof t.context=="number")&&t.context!=="",b=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);p.forEach(w=>{this.isValidLookup(n)||(l=w,!rs[`${b[0]}-${w}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(rs[`${b[0]}-${w}`]=!0,this.logger.warn(`key "${r}" for languages "${b.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(N=>{if(this.isValidLookup(n))return;o=N;const P=[f];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(P,f,N,w,t);else{let C;h&&(C=this.pluralResolver.getSuffix(N,t.count,t));const S=`${this.options.pluralSeparator}zero`,j=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(P.push(f+C),t.ordinal&&C.indexOf(j)===0&&P.push(f+C.replace(j,this.options.pluralSeparator)),g&&P.push(f+S)),x){const A=`${f}${this.options.contextSeparator}${t.context}`;P.push(A),h&&(P.push(A+C),t.ordinal&&C.indexOf(j)===0&&P.push(A+C.replace(j,this.options.pluralSeparator)),g&&P.push(A+S))}}let M;for(;M=P.pop();)this.isValidLookup(n)||(i=M,n=this.getResource(N,w,M,t))}))})}),{res:n,usedKey:r,exactUsedKey:i,usedLng:o,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!E(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const i of t)delete r[i]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}const ct=s=>s.charAt(0).toUpperCase()+s.slice(1);class is{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ae.create("languageUtils")}getScriptPartFromCode(e){if(e=Ye(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Ye(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(E(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(e)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(r=>r.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=ct(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=ct(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=ct(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const r=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(r))&&(t=r)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const r=this.getLanguagePartFromCode(n);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(i=>{if(i===r)return i;if(!(i.indexOf("-")<0&&r.indexOf("-")<0)&&(i.indexOf("-")>0&&r.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===r||i.indexOf(r)===0&&r.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),E(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],i=o=>{o&&(this.isSupportedCode(o)?r.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return E(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):E(e)&&i(this.formatLanguageCode(e)),n.forEach(o=>{r.indexOf(o)<0&&i(this.formatLanguageCode(o))}),r}}let $i=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],zi={1:s=>+(s>1),2:s=>+(s!=1),3:s=>0,4:s=>s%10==1&&s%100!=11?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2,5:s=>s==0?0:s==1?1:s==2?2:s%100>=3&&s%100<=10?3:s%100>=11?4:5,6:s=>s==1?0:s>=2&&s<=4?1:2,7:s=>s==1?0:s%10>=2&&s%10<=4&&(s%100<10||s%100>=20)?1:2,8:s=>s==1?0:s==2?1:s!=8&&s!=11?2:3,9:s=>+(s>=2),10:s=>s==1?0:s==2?1:s<7?2:s<11?3:4,11:s=>s==1||s==11?0:s==2||s==12?1:s>2&&s<20?2:3,12:s=>+(s%10!=1||s%100==11),13:s=>+(s!==0),14:s=>s==1?0:s==2?1:s==3?2:3,15:s=>s%10==1&&s%100!=11?0:s%10>=2&&(s%100<10||s%100>=20)?1:2,16:s=>s%10==1&&s%100!=11?0:s!==0?1:2,17:s=>s==1||s%10==1&&s%100!=11?0:1,18:s=>s==0?0:s==1?1:2,19:s=>s==1?0:s==0||s%100>1&&s%100<11?1:s%100>10&&s%100<20?2:3,20:s=>s==1?0:s==0||s%100>0&&s%100<20?1:2,21:s=>s%100==1?1:s%100==2?2:s%100==3||s%100==4?3:0,22:s=>s==1?0:s==2?1:(s<0||s>10)&&s%10==0?2:3};const Hi=["v1","v2","v3"],Vi=["v4"],os={zero:0,one:1,two:2,few:3,many:4,other:5},Ki=()=>{const s={};return $i.forEach(e=>{e.lngs.forEach(t=>{s[t]={numbers:e.nr,plurals:zi[e.fc]}})}),s};class qi{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=ae.create("pluralResolver"),(!this.options.compatibilityJSON||Vi.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Ki(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=Ye(e==="dev"?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:n,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(n,{type:r})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,t)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(r=>`${t}${r}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((r,i)=>os[r]-os[i]).map(r=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${r}`):n.numbers.map(r=>this.getSuffix(e,r,t)):[]}getSuffix(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!Hi.includes(this.options.compatibilityJSON)}}const as=function(s,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Ii(s,e,t);return!i&&r&&E(t)&&(i=vt(s,t,n),i===void 0&&(i=vt(e,t,n))),i},ut=s=>s.replace(/\$/g,"$$$$");class Wi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ae.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:f,unescapePrefix:p,nestingPrefix:h,nestingPrefixEscaped:g,nestingSuffix:x,nestingSuffixEscaped:b,nestingOptionsSeparator:w,maxReplaces:N,alwaysFormat:P}=e.interpolation;this.escape=t!==void 0?t:ki,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=i?Se(i):o||"{{",this.suffix=l?Se(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=f?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=h?Se(h):g||Se("$t("),this.nestingSuffix=x?Se(x):b||Se(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=N||1e3,this.alwaysFormat=P!==void 0?P:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t&&t.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const N=as(t,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(N,void 0,n,{...r,...t,interpolationkey:g}):N}const x=g.split(this.formatSeparator),b=x.shift().trim(),w=x.join(this.formatSeparator).trim();return this.format(as(t,c,b,this.options.keySeparator,this.options.ignoreJSONStructure),w,n,{...r,...t,interpolationkey:b})};this.resetRegExp();const f=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,p=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>ut(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?ut(this.escape(g)):ut(g)}].forEach(g=>{for(l=0;i=g.regex.exec(e);){const x=i[1].trim();if(o=u(x),o===void 0)if(typeof f=="function"){const w=f(e,i,r);o=E(w)?w:""}else if(r&&Object.prototype.hasOwnProperty.call(r,x))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),o="";else!E(o)&&!this.useRawValueToEscape&&(o=Zt(o));const b=g.safeValue(o);if(e=e.replace(i[0],b),p?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,i,o;const l=(c,u)=>{const f=this.nestingOptionsSeparator;if(c.indexOf(f)<0)return c;const p=c.split(new RegExp(`${f}[ ]*{`));let h=`{${p[1]}`;c=p[0],h=this.interpolate(h,o);const g=h.match(/'/g),x=h.match(/"/g);(g&&g.length%2===0&&!x||x.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),u&&(o={...u,...o})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,b),`${c}${f}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;r=this.nestingRegexp.exec(e);){let c=[];o={...n},o=o.replace&&!E(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const f=r[1].split(this.formatSeparator).map(p=>p.trim());r[1]=f.shift(),c=f,u=!0}if(i=t(l.call(this,r[1].trim(),o),o),i&&r[0]===e&&!E(i))return i;E(i)||(i=Zt(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),u&&(i=c.reduce((f,p)=>this.format(f,p,n.lng,{...n,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const Ji=s=>{let e=s.toLowerCase().trim();const t={};if(s.indexOf("(")>-1){const n=s.split("(");e=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);e==="currency"&&r.indexOf(":")<0?t.currency||(t.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?t.range||(t.range=r.trim()):r.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),f=l.trim();t[f]||(t[f]=u),u==="false"&&(t[f]=!1),u==="true"&&(t[f]=!0),isNaN(u)||(t[f]=parseInt(u,10))}})}return{formatName:e,formatOptions:t}},ve=s=>{const e={};return(t,n,r)=>{let i=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(i={...i,[r.interpolationkey]:void 0});const o=n+JSON.stringify(i);let l=e[o];return l||(l=s(Ye(n),r),e[o]=l),l(t)}};class Gi{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ae.create("formatter"),this.options=e,this.formats={number:ve((t,n)=>{const r=new Intl.NumberFormat(t,{...n});return i=>r.format(i)}),currency:ve((t,n)=>{const r=new Intl.NumberFormat(t,{...n,style:"currency"});return i=>r.format(i)}),datetime:ve((t,n)=>{const r=new Intl.DateTimeFormat(t,{...n});return i=>r.format(i)}),relativetime:ve((t,n)=>{const r=new Intl.RelativeTimeFormat(t,{...n});return i=>r.format(i,n.range||"day")}),list:ve((t,n)=>{const r=new Intl.ListFormat(t,{...n});return i=>r.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ve(t)}format(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:u,formatOptions:f}=Ji(c);if(this.formats[u]){let p=l;try{const h=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},g=h.locale||h.lng||r.locale||r.lng||n;p=this.formats[u](l,g,{...f,...r,...h})}catch(h){this.logger.warn(h)}return p}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const Xi=(s,e)=>{s.pending[e]!==void 0&&(delete s.pending[e],s.pendingCount--)};class Yi extends rt{constructor(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=ae.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},o={},l={},c={};return e.forEach(u=>{let f=!0;t.forEach(p=>{const h=`${u}|${p}`;!n.reload&&this.store.hasResourceBundle(u,p)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,f=!1,o[h]===void 0&&(o[h]=!0),i[h]===void 0&&(i[h]=!0),c[p]===void 0&&(c[p]=!0)))}),f||(l[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,n){const r=e.split("|"),i=r[0],o=r[1];t&&this.emit("failedLoading",i,o,t),!t&&n&&this.store.addResourceBundle(i,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const l={};this.queue.forEach(c=>{Ri(c.loaded,[i],o),Xi(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const f=c.loaded[u];f.length&&f.forEach(p=>{l[u][p]===void 0&&(l[u][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:o});return}this.readingCalls++;const l=(u,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(u&&f&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,r+1,i*2,o)},i);return}o(u,f)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const u=c(e,t);u&&typeof u.then=="function"?u.then(f=>l(null,f)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,t,l)}prepareLoading(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();E(e)&&(e=this.languageUtils.toResolveHierarchy(e)),E(t)&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,o),!o&&l&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,l),this.loaded(e,o,l)})}saveMissing(e,t,n,r,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let f;u.length===5?f=u(e,t,n,r,c):f=u(e,t,n,r),f&&typeof f.then=="function"?f.then(p=>l(null,p)).catch(l):l(null,f)}catch(f){l(f)}else u(e,t,n,r,l,c)}!e||!e[0]||this.store.addResource(e[0],t,n,r)}}}const ls=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let e={};if(typeof s[1]=="object"&&(e=s[1]),E(s[1])&&(e.defaultValue=s[1]),E(s[2])&&(e.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const t=s[3]||s[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),cs=s=>(E(s.ns)&&(s.ns=[s.ns]),E(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),E(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs&&s.supportedLngs.indexOf("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),s),ze=()=>{},Qi=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(t=>{typeof s[t]=="function"&&(s[t]=s[t].bind(s))})};class De extends rt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=cs(e),this.services={},this.logger=ae,this.modules={external:[]},Qi(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(E(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=ls();this.options={...r,...this.options,...cs(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=f=>f?typeof f=="function"?new f:f:null;if(!this.options.isClone){this.modules.logger?ae.init(i(this.modules.logger),this.options):ae.init(null,this.options);let f;this.modules.formatter?f=this.modules.formatter:typeof Intl<"u"&&(f=Gi);const p=new is(this.options);this.store=new ns(this.options.resources,this.options);const h=this.services;h.logger=ae,h.resourceStore=this.store,h.languageUtils=p,h.pluralResolver=new qi(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=i(f),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new Wi(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Yi(i(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(g){for(var x=arguments.length,b=new Array(x>1?x-1:0),w=1;w<x;w++)b[w-1]=arguments[w];e.emit(g,...b)}),this.modules.languageDetector&&(h.languageDetector=i(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=i(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Ze(this.services,this.options),this.translator.on("*",function(g){for(var x=arguments.length,b=new Array(x>1?x-1:0),w=1;w<x;w++)b[w-1]=arguments[w];e.emit(g,...b)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=ze),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(f=>{this[f]=function(){return e.store[f](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(f=>{this[f]=function(){return e.store[f](...arguments),e}});const c=Le(),u=()=>{const f=(p,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(h),n(p,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return f(null,this.t.bind(this));this.changeLanguage(this.options.lng,f)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze;const r=E(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const i=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(l=>o(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(e,t,n){const r=Le();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=ze),this.services.backendConnector.reload(e,t,i=>{r.resolve(),n(i)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&$s.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=Le();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),t&&t(c,function(){return n.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=E(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,f=>{o(f,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),r}getFixedT(e,t,n){var r=this;const i=function(o,l){let c;if(typeof l!="object"){for(var u=arguments.length,f=new Array(u>2?u-2:0),p=2;p<u;p++)f[p-2]=arguments[p];c=r.options.overloadTranslationOptionHandler([o,l].concat(f))}else c={...l};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const h=r.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(o)?g=o.map(x=>`${c.keyPrefix}${h}${x}`):g=c.keyPrefix?`${c.keyPrefix}${h}${o}`:o,r.t(g,c)};return E(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(t.precheck){const l=t.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,e)&&(!r||o(i,e)))}loadNamespaces(e,t){const n=Le();return this.options.ns?(E(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{n.resolve(),t&&t(r)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Le();E(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(o=>r.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=r.concat(i),this.loadResources(o=>{n.resolve(),t&&t(o)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new is(ls());return t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new De(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new De(r);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new ns(this.store.data,r),i.services.resourceStore=i.store),i.translator=new Ze(i.services,r),i.translator.on("*",function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];i.emit(l,...u)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const q=De.createInstance();q.createInstance=De.createInstance;q.createInstance;q.dir;q.init;q.loadResources;q.reloadResources;q.use;q.changeLanguage;q.getFixedT;q.t;q.exists;q.setDefaultNamespace;q.hasLoadedNamespace;q.loadNamespaces;q.loadLanguages;function Ct(s){"@babel/helpers - typeof";return Ct=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(s)}function zs(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":Ct(XMLHttpRequest))==="object"}function Zi(s){return!!s&&typeof s.then=="function"}function eo(s){return Zi(s)?s:Promise.resolve(s)}const G=globalThis||void 0||self;var jt={exports:{}},He={exports:{}},us;function to(){return us||(us=1,function(s,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Re<"u"&&Re,n=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var l=typeof i<"u"&&i||typeof self<"u"&&self||typeof l<"u"&&l,c={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function u(d){return d&&DataView.prototype.isPrototypeOf(d)}if(c.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(d){return d&&f.indexOf(Object.prototype.toString.call(d))>-1};function h(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(d)||d==="")throw new TypeError('Invalid character in header field name: "'+d+'"');return d.toLowerCase()}function g(d){return typeof d!="string"&&(d=String(d)),d}function x(d){var m={next:function(){var v=d.shift();return{done:v===void 0,value:v}}};return c.iterable&&(m[Symbol.iterator]=function(){return m}),m}function b(d){this.map={},d instanceof b?d.forEach(function(m,v){this.append(v,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}b.prototype.append=function(d,m){d=h(d),m=g(m);var v=this.map[d];this.map[d]=v?v+", "+m:m},b.prototype.delete=function(d){delete this.map[h(d)]},b.prototype.get=function(d){return d=h(d),this.has(d)?this.map[d]:null},b.prototype.has=function(d){return this.map.hasOwnProperty(h(d))},b.prototype.set=function(d,m){this.map[h(d)]=g(m)},b.prototype.forEach=function(d,m){for(var v in this.map)this.map.hasOwnProperty(v)&&d.call(m,this.map[v],v,this)},b.prototype.keys=function(){var d=[];return this.forEach(function(m,v){d.push(v)}),x(d)},b.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),x(d)},b.prototype.entries=function(){var d=[];return this.forEach(function(m,v){d.push([v,m])}),x(d)},c.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function w(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function N(d){return new Promise(function(m,v){d.onload=function(){m(d.result)},d.onerror=function(){v(d.error)}})}function P(d){var m=new FileReader,v=N(m);return m.readAsArrayBuffer(d),v}function M(d){var m=new FileReader,v=N(m);return m.readAsText(d),v}function C(d){for(var m=new Uint8Array(d),v=new Array(m.length),O=0;O<m.length;O++)v[O]=String.fromCharCode(m[O]);return v.join("")}function S(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(d){this.bodyUsed=this.bodyUsed,this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:c.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:c.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():c.arrayBuffer&&c.blob&&u(d)?(this._bodyArrayBuffer=S(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||p(d))?this._bodyArrayBuffer=S(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var d=w(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var d=w(this);return d||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(P)}),this.text=function(){var d=w(this);if(d)return d;if(this._bodyBlob)return M(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function D(d){var m=d.toUpperCase();return A.indexOf(m)>-1?m:d}function _(d,m){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');m=m||{};var v=m.body;if(d instanceof _){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new b(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!v&&d._bodyInit!=null&&(v=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new b(m.headers)),this.method=D(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&v)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(v),(this.method==="GET"||this.method==="HEAD")&&(m.cache==="no-store"||m.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var I=/\?/;this.url+=(I.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})};function B(d){var m=new FormData;return d.trim().split("&").forEach(function(v){if(v){var O=v.split("="),I=O.shift().replace(/\+/g," "),L=O.join("=").replace(/\+/g," ");m.append(decodeURIComponent(I),decodeURIComponent(L))}}),m}function R(d){var m=new b,v=d.replace(/\r?\n[\t ]+/g," ");return v.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var I=O.split(":"),L=I.shift().trim();if(L){var J=I.join(":").trim();m.append(L,J)}}),m}j.call(_.prototype);function U(d,m){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText=m.statusText===void 0?"":""+m.statusText,this.headers=new b(m.headers),this.url=m.url||"",this._initBody(d)}j.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},U.error=function(){var d=new U(null,{status:0,statusText:""});return d.type="error",d};var z=[301,302,303,307,308];U.redirect=function(d,m){if(z.indexOf(m)===-1)throw new RangeError("Invalid status code");return new U(null,{status:m,headers:{location:d}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,v){this.message=m,this.name=v;var O=Error(m);this.stack=O.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function $(d,m){return new Promise(function(v,O){var I=new _(d,m);if(I.signal&&I.signal.aborted)return O(new o.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function J(){L.abort()}L.onload=function(){var H={status:L.status,statusText:L.statusText,headers:R(L.getAllResponseHeaders()||"")};H.url="responseURL"in L?L.responseURL:H.headers.get("X-Request-URL");var te="response"in L?L.response:L.responseText;setTimeout(function(){v(new U(te,H))},0)},L.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},L.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},L.onabort=function(){setTimeout(function(){O(new o.DOMException("Aborted","AbortError"))},0)};function Q(H){try{return H===""&&l.location.href?l.location.href:H}catch{return H}}L.open(I.method,Q(I.url),!0),I.credentials==="include"?L.withCredentials=!0:I.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&(c.blob?L.responseType="blob":c.arrayBuffer&&I.headers.get("Content-Type")&&I.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(L.responseType="arraybuffer")),m&&typeof m.headers=="object"&&!(m.headers instanceof b)?Object.getOwnPropertyNames(m.headers).forEach(function(H){L.setRequestHeader(H,g(m.headers[H]))}):I.headers.forEach(function(H,te){L.setRequestHeader(te,H)}),I.signal&&(I.signal.addEventListener("abort",J),L.onreadystatechange=function(){L.readyState===4&&I.signal.removeEventListener("abort",J)}),L.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return $.polyfill=!0,l.fetch||(l.fetch=$,l.Headers=b,l.Request=_,l.Response=U),o.Headers=b,o.Request=_,o.Response=U,o.fetch=$,o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=t.fetch?t:n;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,s.exports=e}(He,He.exports)),He.exports}(function(s,e){var t;if(typeof fetch=="function"&&(typeof Re<"u"&&Re.fetch?t=Re.fetch:typeof window<"u"&&window.fetch?t=window.fetch:t=fetch),typeof In<"u"&&typeof window>"u"){var n=t||to();n.default&&(n=n.default),e.default=n,s.exports=e.default}})(jt,jt.exports);var Hs=jt.exports;const Vs=An(Hs),ds=_n({__proto__:null,default:Vs},[Hs]);function fs(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function hs(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fs(Object(t),!0).forEach(function(n){so(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):fs(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function so(s,e,t){return(e=no(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function no(s){var e=ro(s,"string");return ye(e)=="symbol"?e:e+""}function ro(s,e){if(ye(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e||"default");if(ye(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function ye(s){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(s)}var le;typeof fetch=="function"&&(typeof G<"u"&&G.fetch?le=G.fetch:typeof window<"u"&&window.fetch?le=window.fetch:le=fetch);var Ue;zs()&&(typeof G<"u"&&G.XMLHttpRequest?Ue=G.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Ue=window.XMLHttpRequest));var et;typeof ActiveXObject=="function"&&(typeof G<"u"&&G.ActiveXObject?et=G.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(et=window.ActiveXObject));!le&&ds&&!Ue&&!et&&(le=Vs||ds);typeof le!="function"&&(le=void 0);var Ot=function(e,t){if(t&&ye(t)==="object"){var n="";for(var r in t)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t[r]);if(!n)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+n.slice(1)}return e},ps=function(e,t,n,r){var i=function(c){if(!c.ok)return n(c.statusText||"Error",{status:c.status});c.text().then(function(u){n(null,{status:c.status,data:u})}).catch(n)};if(r){var o=r(e,t);if(o instanceof Promise){o.then(i).catch(n);return}}typeof fetch=="function"?fetch(e,t).then(i).catch(n):le(e,t).then(i).catch(n)},gs=!1,io=function(e,t,n,r){e.queryStringParams&&(t=Ot(t,e.queryStringParams));var i=hs({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof G<"u"&&typeof G.process<"u"&&G.process.versions&&G.process.versions.node&&(i["User-Agent"]="i18next-http-backend (node/".concat(G.process.version,"; ").concat(G.process.platform," ").concat(G.process.arch,")")),n&&(i["Content-Type"]="application/json");var o=typeof e.requestOptions=="function"?e.requestOptions(n):e.requestOptions,l=hs({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:i},gs?{}:o),c=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{ps(t,l,r,c)}catch(u){if(!o||Object.keys(o).length===0||!u.message||u.message.indexOf("not implemented")<0)return r(u);try{Object.keys(o).forEach(function(f){delete l[f]}),ps(t,l,r,c),gs=!0}catch(f){r(f)}}},oo=function(e,t,n,r){n&&ye(n)==="object"&&(n=Ot("",n).slice(1)),e.queryStringParams&&(t=Ot(t,e.queryStringParams));try{var i;Ue?i=new Ue:i=new et("MSXML2.XMLHTTP.3.0"),i.open(n?"POST":"GET",t,1),e.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!e.withCredentials,n&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var o=e.customHeaders;if(o=typeof o=="function"?o():o,o)for(var l in o)i.setRequestHeader(l,o[l]);i.onreadystatechange=function(){i.readyState>3&&r(i.status>=400?i.statusText:null,{status:i.status,data:i.responseText})},i.send(n)}catch(c){console&&console.log(c)}},ao=function(e,t,n,r){if(typeof n=="function"&&(r=n,n=void 0),r=r||function(){},le&&t.indexOf("file:")!==0)return io(e,t,n,r);if(zs()||typeof ActiveXObject=="function")return oo(e,t,n,r);r(new Error("No fetch and no xhr implementation found!"))};function Ne(s){"@babel/helpers - typeof";return Ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(s)}function ms(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(s);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),t.push.apply(t,n)}return t}function dt(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ms(Object(t),!0).forEach(function(n){Ks(s,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):ms(Object(t)).forEach(function(n){Object.defineProperty(s,n,Object.getOwnPropertyDescriptor(t,n))})}return s}function lo(s,e){if(!(s instanceof e))throw new TypeError("Cannot call a class as a function")}function bs(s,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(s,qs(n.key),n)}}function co(s,e,t){return e&&bs(s.prototype,e),t&&bs(s,t),Object.defineProperty(s,"prototype",{writable:!1}),s}function Ks(s,e,t){return(e=qs(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function qs(s){var e=uo(s,"string");return Ne(e)=="symbol"?e:e+""}function uo(s,e){if(Ne(s)!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var n=t.call(s,e||"default");if(Ne(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}var fo=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,n,r){return Ks({},n,r||"")},parseLoadPayload:function(t,n){},request:ao,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Ws=function(){function s(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};lo(this,s),this.services=e,this.options=t,this.allOptions=n,this.type="backend",this.init(e,t,n)}return co(s,[{key:"init",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=dt(dt(dt({},fo()),this.options||{}),r),this.allOptions=i,this.services&&this.options.reloadInterval){var o=setInterval(function(){return n.reload()},this.options.reloadInterval);Ne(o)==="object"&&typeof o.unref=="function"&&o.unref()}}},{key:"readMulti",value:function(t,n,r){this._readAny(t,t,n,n,r)}},{key:"read",value:function(t,n,r){this._readAny([t],t,[n],n,r)}},{key:"_readAny",value:function(t,n,r,i,o){var l=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(t,r)),c=eo(c),c.then(function(u){if(!u)return o(null,{});var f=l.services.interpolator.interpolate(u,{lng:t.join("+"),ns:r.join("+")});l.loadUrl(f,o,n,i)})}},{key:"loadUrl",value:function(t,n,r,i){var o=this,l=typeof r=="string"?[r]:r,c=typeof i=="string"?[i]:i,u=this.options.parseLoadPayload(l,c);this.options.request(this.options,t,u,function(f,p){if(p&&(p.status>=500&&p.status<600||!p.status))return n("failed loading "+t+"; status code: "+p.status,!0);if(p&&p.status>=400&&p.status<500)return n("failed loading "+t+"; status code: "+p.status,!1);if(!p&&f&&f.message){var h=f.message.toLowerCase(),g=["failed","fetch","network","load"].find(function(w){return h.indexOf(w)>-1});if(g)return n("failed loading "+t+": "+f.message,!0)}if(f)return n(f,!1);var x,b;try{typeof p.data=="string"?x=o.options.parse(p.data,r,i):x=p.data}catch{b="failed parsing "+t+" to json"}if(b)return n(b,!1);n(null,x)})}},{key:"create",value:function(t,n,r,i,o){var l=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var c=this.options.parsePayload(n,r,i),u=0,f=[],p=[];t.forEach(function(h){var g=l.options.addPath;typeof l.options.addPath=="function"&&(g=l.options.addPath(h,n));var x=l.services.interpolator.interpolate(g,{lng:h,ns:n});l.options.request(l.options,x,c,function(b,w){u+=1,f.push(b),p.push(w),u===t.length&&typeof o=="function"&&o(f,p)})})}}},{key:"reload",value:function(){var t=this,n=this.services,r=n.backendConnector,i=n.languageUtils,o=n.logger,l=r.language;if(!(l&&l.toLowerCase()==="cimode")){var c=[],u=function(p){var h=i.toResolveHierarchy(p);h.forEach(function(g){c.indexOf(g)<0&&c.push(g)})};u(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(f){return u(f)}),c.forEach(function(f){t.allOptions.ns.forEach(function(p){r.read(f,p,"read",null,null,function(h,g){h&&o.warn("loading namespace ".concat(p," for language ").concat(f," failed"),h),!h&&g&&o.log("loaded namespace ".concat(p," for language ").concat(f),g),r.loaded("".concat(f,"|").concat(p),h,g)})})})}}}])}();Ws.type="backend";q.use(Ws).use(er).init({load:"languageOnly",lng:"en",interpolation:{escapeValue:!1}});fetch(Ei).then(s=>s.json()).then(s=>{Y.ready(),Y.expand(),be.init(s),q.addResourceBundle("en","custom",s.translates.en),q.addResourceBundle("ru","custom",s.translates.ru),pt.createRoot(document.getElementById("root")).render(a.jsx(En.StrictMode,{children:a.jsx(Pn,{defaultColorScheme:"auto",children:a.jsx(Ln,{manifestUrl:s.tonConnectProps.manifestUrl,uiPreferences:{theme:ht.DARK},actionsConfiguration:{twaReturnUrl:s.tonConnectProps.twaReturnUrl},children:a.jsx(Ai,{config:s})})})}))}).catch(s=>console.error("Error loading config:",s));
